---
uid: web-api/overview/security/external-authentication-services
title: Servizi di autenticazione esterno con ASP.NET Web API (c#) | Documenti Microsoft
author: rmcmurray
description: Viene descritto l'utilizzo di servizi di autenticazione esterni nell'API Web ASP.NET.
ms.author: aspnetcontent
manager: wpickett
ms.date: 06/26/2013
ms.topic: article
ms.assetid: 3bb8eb15-b518-44f5-a67d-a27e051aedc6
ms.technology: dotnet-webapi
ms.prod: .net-framework
msc.legacyurl: /web-api/overview/security/external-authentication-services
msc.type: authoredcontent
ms.openlocfilehash: 406a85db7055910cb7a4e15fec8ef68dff5a19dc
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/06/2018
---
<a name="external-authentication-services-with-aspnet-web-api-c"></a><span data-ttu-id="7c430-103">Servizi di autenticazione esterno con ASP.NET Web API (c#)</span><span class="sxs-lookup"><span data-stu-id="7c430-103">External Authentication Services with ASP.NET Web API (C#)</span></span>
====================
<span data-ttu-id="7c430-104">da [Robert McMurray](https://github.com/rmcmurray)</span><span class="sxs-lookup"><span data-stu-id="7c430-104">by [Robert McMurray](https://github.com/rmcmurray)</span></span>

<span data-ttu-id="7c430-105">Visual Studio 2013 e ASP.NET 4.5.1 espandere le opzioni di sicurezza per [Single Page Applications](../../../single-page-application/index.md) (SPA) e [API Web](../../index.md) servizi per l'integrazione con servizi di autenticazione esterno, che includono numerosi Servizi di autenticazione di social networking e OAuth/OpenID: Accounts Microsoft, Twitter, Facebook e Google.</span><span class="sxs-lookup"><span data-stu-id="7c430-105">Visual Studio 2013 and ASP.NET 4.5.1 expand the security options for [Single Page Applications](../../../single-page-application/index.md) (SPA) and [Web API](../../index.md) services to integrate with external authentication services, which include several OAuth/OpenID and social media authentication services: Microsoft Accounts, Twitter, Facebook, and Google.</span></span>

### <a name="in-this-walkthrough"></a><span data-ttu-id="7c430-106">In questa procedura dettagliata</span><span class="sxs-lookup"><span data-stu-id="7c430-106">In This Walkthrough</span></span>

- [<span data-ttu-id="7c430-107">Utilizzo di servizi di autenticazione esterni</span><span class="sxs-lookup"><span data-stu-id="7c430-107">Using External Authentication Services</span></span>](#USING)
- [<span data-ttu-id="7c430-108">Creazione dell'applicazione Web di esempio</span><span class="sxs-lookup"><span data-stu-id="7c430-108">Creating the Sample Web Application</span></span>](#SAMPLE)
- [<span data-ttu-id="7c430-109">Abilitazione dell'autenticazione di Facebook</span><span class="sxs-lookup"><span data-stu-id="7c430-109">Enabling Facebook Authentication</span></span>](#FACEBOOK)
- [<span data-ttu-id="7c430-110">Abilitazione dell'autenticazione di Google</span><span class="sxs-lookup"><span data-stu-id="7c430-110">Enabling Google Authentication</span></span>](#GOOGLE)
- [<span data-ttu-id="7c430-111">Abilitazione dell'autenticazione di Microsoft</span><span class="sxs-lookup"><span data-stu-id="7c430-111">Enabling Microsoft Authentication</span></span>](#MICROSOFT)
- [<span data-ttu-id="7c430-112">Abilitazione dell'autenticazione di Twitter</span><span class="sxs-lookup"><span data-stu-id="7c430-112">Enabling Twitter Authentication</span></span>](#TWITTER)
- [<span data-ttu-id="7c430-113">Informazioni aggiuntive</span><span class="sxs-lookup"><span data-stu-id="7c430-113">Additional Information</span></span>](#MOREINFO)

    - [<span data-ttu-id="7c430-114">La combinazione di servizi di autenticazione esterni</span><span class="sxs-lookup"><span data-stu-id="7c430-114">Combining External Authentication Services</span></span>](#COMBINE)
    - [<span data-ttu-id="7c430-115">Configurazione di IIS Express per utilizzare un nome di dominio completo</span><span class="sxs-lookup"><span data-stu-id="7c430-115">Configuring IIS Express to use a Fully Qualified Domain Name</span></span>](#FQDN)
    - [<span data-ttu-id="7c430-116">Come ottenere le impostazioni dell'applicazione per l'autenticazione di Microsoft</span><span class="sxs-lookup"><span data-stu-id="7c430-116">How to Obtain your Application Settings for Microsoft Authentication</span></span>](#OBTAIN)
    - [<span data-ttu-id="7c430-117">Facoltativo: Disabilitare la registrazione locale</span><span class="sxs-lookup"><span data-stu-id="7c430-117">Optional: Disable Local Registration</span></span>](#DISABLE)

### <a name="prerequisites"></a><span data-ttu-id="7c430-118">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="7c430-118">Prerequisites</span></span>

<span data-ttu-id="7c430-119">Per seguire gli esempi in questa procedura dettagliata, è necessario disporre di quanto segue:</span><span class="sxs-lookup"><span data-stu-id="7c430-119">To follow the examples in this walkthrough, you need to have the following:</span></span>

- <span data-ttu-id="7c430-120">Visual Studio 2013</span><span class="sxs-lookup"><span data-stu-id="7c430-120">Visual Studio 2013</span></span>
- <span data-ttu-id="7c430-121">Un account per almeno uno dei seguenti servizi di autenticazione esterni:</span><span class="sxs-lookup"><span data-stu-id="7c430-121">An account for at least one of the following external authentication services:</span></span>

    - <span data-ttu-id="7c430-122">Un account utente di Google</span><span class="sxs-lookup"><span data-stu-id="7c430-122">A Google user account</span></span>
    - <span data-ttu-id="7c430-123">Un account sviluppatore con l'identificatore dell'applicazione e una chiave privata per uno dei servizi di autenticazione di social networking seguenti:</span><span class="sxs-lookup"><span data-stu-id="7c430-123">A developer account with the application identifier and secret key for one of the following social media authentication services:</span></span>

        - <span data-ttu-id="7c430-124">Gli account Microsoft ([https://go.microsoft.com/fwlink/?LinkID=144070](https://go.microsoft.com/fwlink/?LinkID=144070))</span><span class="sxs-lookup"><span data-stu-id="7c430-124">Microsoft Accounts ([https://go.microsoft.com/fwlink/?LinkID=144070](https://go.microsoft.com/fwlink/?LinkID=144070))</span></span>
        - <span data-ttu-id="7c430-125">Twitter ([https://dev.twitter.com/](https://dev.twitter.com/))</span><span class="sxs-lookup"><span data-stu-id="7c430-125">Twitter ([https://dev.twitter.com/](https://dev.twitter.com/))</span></span>
        - <span data-ttu-id="7c430-126">Facebook ([https://developers.facebook.com/](https://developers.facebook.com/))</span><span class="sxs-lookup"><span data-stu-id="7c430-126">Facebook ([https://developers.facebook.com/](https://developers.facebook.com/))</span></span>

<a id="USING"></a>
## <a name="using-external-authentication-services"></a><span data-ttu-id="7c430-127">Utilizzo di servizi di autenticazione esterni</span><span class="sxs-lookup"><span data-stu-id="7c430-127">Using External Authentication Services</span></span>

<span data-ttu-id="7c430-128">Il numero elevato di servizi di autenticazione esterno che sono attualmente disponibili per la Guida agli sviluppatori web per ridurre lo sviluppo di tempo durante la creazione di nuove applicazioni web.</span><span class="sxs-lookup"><span data-stu-id="7c430-128">The abundance of external authentication services that are currently available to web developers help to reduce development time when creating new web applications.</span></span> <span data-ttu-id="7c430-129">Gli utenti Web in genere dispongono di diversi account esistenti per servizi web più comuni e i siti Web di social networking, pertanto quando si implementa un'applicazione web l'autenticazione dei servizi da un servizio web esterno o il sito Web di social networking, Salva la fase di sviluppo che spesa la creazione di un'implementazione di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="7c430-129">Web users typically have several existing accounts for popular web services and social media websites, therefore when a web application implements the authentication services from an external web service or social media website, it saves the development time that would have been spent creating an authentication implementation.</span></span> <span data-ttu-id="7c430-130">Utilizzo di un servizio di autenticazione esterno Salva gli utenti finali di dover creare un altro account per l'applicazione web e di dover ricordare un altro nome utente e password.</span><span class="sxs-lookup"><span data-stu-id="7c430-130">Using an external authentication service saves end users from having to create another account for your web application, and also from having to remember another username and password.</span></span>

<span data-ttu-id="7c430-131">In passato, gli sviluppatori hanno dovuto disponibili due opzioni: creare la propria implementazione di autenticazione, o informazioni su come integrare un servizio di autenticazione esterni nelle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="7c430-131">In the past, developers have had two choices: create their own authentication implementation, or learn how to integrate an external authentication service into their applications.</span></span> <span data-ttu-id="7c430-132">Livello di base, il diagramma seguente illustra un flusso di richiesta semplice di un agente utente (browser web) che richiede informazioni da un'applicazione web è configurata per utilizzare un servizio di autenticazione esterni:</span><span class="sxs-lookup"><span data-stu-id="7c430-132">At the most basic level, the following diagram illustrates a simple request flow for a user agent (web browser) that is requesting information from a web application that is configured to use an external authentication service:</span></span>

<span data-ttu-id="7c430-133">[![](external-authentication-services/_static/image2.png "Fare clic per espandere l'immagine")](external-authentication-services/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="7c430-133">[![](external-authentication-services/_static/image2.png "Click to Expand the Image")](external-authentication-services/_static/image1.png)</span></span>

<span data-ttu-id="7c430-134">Nel diagramma precedente, l'agente utente (o un browser web in questo esempio) effettua una richiesta a un'applicazione web, che reindirizza il browser web a un servizio di autenticazione esterno.</span><span class="sxs-lookup"><span data-stu-id="7c430-134">In the preceding diagram, the user agent (or web browser in this example) makes a request to a web application, which redirects the web browser to an external authentication service.</span></span> <span data-ttu-id="7c430-135">L'agente utente invia le credenziali per il servizio di autenticazione esterno, e se l'agente utente è autenticato, il servizio di autenticazione esterno reindirizzerà l'agente utente all'applicazione web originale con un tipo di token che il agente utente invierà all'applicazione web.</span><span class="sxs-lookup"><span data-stu-id="7c430-135">The user agent sends its credentials to the external authentication service, and if the user agent has successfully authenticated, the external authentication service will redirect the user agent to the original web application with some form of token which the user agent will send to the web application.</span></span> <span data-ttu-id="7c430-136">L'applicazione web utilizzerà il token per verificare che l'agente utente è stato autenticato dal servizio di autenticazione esterno e l'applicazione web può usare il token per raccogliere ulteriori informazioni sull'agente utente.</span><span class="sxs-lookup"><span data-stu-id="7c430-136">The web application will use the token to verify that the user agent has been successfully authenticated by the external authentication service, and the web application may use the token to gather more information about the user agent.</span></span> <span data-ttu-id="7c430-137">Dopo l'applicazione ha terminato l'elaborazione di informazioni dell'agente utente, l'applicazione web verrà restituito la risposta appropriata per l'agente utente in base alle proprie impostazioni di autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="7c430-137">Once the application is done processing the user agent's information, the web application will return the appropriate response to the user agent based on its authorization settings.</span></span>

<span data-ttu-id="7c430-138">Nel secondo esempio, l'agente utente negozia con l'applicazione web e server di autorizzazione esterni e l'applicazione web esegue ulteriori comunicazioni con il server di autorizzazione esterni per recuperare informazioni aggiuntive sull'utente agente:</span><span class="sxs-lookup"><span data-stu-id="7c430-138">In this second example, the user agent negotiates with the web application and external authorization server, and the web application performs additional communication with the external authorization server to retrieve additional information about the user agent:</span></span>

<span data-ttu-id="7c430-139">[![](external-authentication-services/_static/image4.png "Fare clic per espandere l'immagine")](external-authentication-services/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="7c430-139">[![](external-authentication-services/_static/image4.png "Click to Expand the Image")](external-authentication-services/_static/image3.png)</span></span>

<span data-ttu-id="7c430-140">Visual Studio 2013 e ASP.NET 4.5.1 semplificano l'integrazione con servizi di autenticazione esterni per gli sviluppatori fornendo integrazione incorporata per i servizi di autenticazione seguenti:</span><span class="sxs-lookup"><span data-stu-id="7c430-140">Visual Studio 2013 and ASP.NET 4.5.1 make integration with external authentication services easier for developers by providing built-in integration for the following authentication services:</span></span>

- <span data-ttu-id="7c430-141">Facebook</span><span class="sxs-lookup"><span data-stu-id="7c430-141">Facebook</span></span>
- <span data-ttu-id="7c430-142">Google</span><span class="sxs-lookup"><span data-stu-id="7c430-142">Google</span></span>
- <span data-ttu-id="7c430-143">Microsoft Accounts (account di Windows Live ID)</span><span class="sxs-lookup"><span data-stu-id="7c430-143">Microsoft Accounts (Windows Live ID accounts)</span></span>
- <span data-ttu-id="7c430-144">Twitter</span><span class="sxs-lookup"><span data-stu-id="7c430-144">Twitter</span></span>

<span data-ttu-id="7c430-145">Negli esempi inclusi in questa procedura dettagliata verranno illustrato come configurare ognuno dei servizi di autenticazione esterni supportati tramite il nuovo modello di applicazione Web ASP.NET che viene fornito con Visual Studio 2013.</span><span class="sxs-lookup"><span data-stu-id="7c430-145">The examples in this walkthrough will demonstrate how to configure each of the supported external authentication services by using the new ASP.NET Web Application template that ships with Visual Studio 2013.</span></span>

> [!NOTE]
> <span data-ttu-id="7c430-146">Se necessario, si potrebbe essere necessario aggiungere il nome di dominio completo per le impostazioni per il servizio di autenticazione esterno.</span><span class="sxs-lookup"><span data-stu-id="7c430-146">If necessary, you may need to add your FQDN to the settings for your external authentication service.</span></span> <span data-ttu-id="7c430-147">Questo requisito è in base ai vincoli di sicurezza per alcuni servizi di autenticazione esterno che richiedono il FQDN nelle impostazioni dell'applicazione in modo da corrispondere al nome FQDN usato dai client di.</span><span class="sxs-lookup"><span data-stu-id="7c430-147">This requirement is based on security constraints for some external authentication services which require the FQDN in your application settings to match the FQDN that is used by your clients.</span></span> <span data-ttu-id="7c430-148">(I passaggi per questo variano notevolmente per ogni servizio di autenticazione esterno, è necessario consultare la documentazione per ogni servizio di autenticazione esterno per vedere se questa operazione è necessaria e su come configurare queste impostazioni). Se è necessario configurare IIS Express per l'utilizzo di un FQDN per questo ambiente di testing, vedere il [la configurazione di IIS Express per utilizzare un nome di dominio completo](#FQDN) sezione più avanti in questa procedura dettagliata.</span><span class="sxs-lookup"><span data-stu-id="7c430-148">(The steps for this will vary greatly for each external authentication service; you will need to consult the documentation for each external authentication service to see if this is required and how to configure these settings.) If you need to configure IIS Express to use an FQDN for testing this environment, see the [Configuring IIS Express to use a Fully Qualified Domain Name](#FQDN) section later in this walkthrough.</span></span>


<a id="SAMPLE"></a>
## <a name="creating-a-sample-web-application"></a><span data-ttu-id="7c430-149">Creazione di un'applicazione Web di esempio</span><span class="sxs-lookup"><span data-stu-id="7c430-149">Creating a Sample Web Application</span></span>

<span data-ttu-id="7c430-150">La procedura seguente verrà avviata la creazione di un'applicazione di esempio utilizzando il modello di applicazione Web ASP.NET e si utilizzerà questa applicazione di esempio per ognuno dei servizi di autenticazione esterno più avanti in questa procedura dettagliata.</span><span class="sxs-lookup"><span data-stu-id="7c430-150">The following steps will lead you through creating a sample application by using the ASP.NET Web Application template, and you will use this sample application for each of the external authentication services later in this walkthrough.</span></span>

<span data-ttu-id="7c430-151">Avviare Visual Studio 2013 selezionare **nuovo progetto** dalla pagina iniziale.</span><span class="sxs-lookup"><span data-stu-id="7c430-151">Start Visual Studio 2013 select **New Project** from the Start page.</span></span> <span data-ttu-id="7c430-152">O dal **File** dal menu **New** e quindi **progetto**.</span><span class="sxs-lookup"><span data-stu-id="7c430-152">Or, from the **File** menu, select **New** and then **Project**.</span></span>

<span data-ttu-id="7c430-153">[![](external-authentication-services/_static/image6.png "Fare clic per espandere l'immagine")](external-authentication-services/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="7c430-153">[![](external-authentication-services/_static/image6.png "Click to Expand the Image")](external-authentication-services/_static/image5.png)</span></span>

<span data-ttu-id="7c430-154">Quando il **nuovo progetto** è visualizzata la finestra di dialogo, selezionare **installato** **modelli** espandere **Visual c#**.</span><span class="sxs-lookup"><span data-stu-id="7c430-154">When the **New Project** dialog box is displayed, select **Installed** **Templates** and expand **Visual C#**.</span></span> <span data-ttu-id="7c430-155">In **Visual c#**selezionare **Web**.</span><span class="sxs-lookup"><span data-stu-id="7c430-155">Under **Visual C#**, select **Web**.</span></span> <span data-ttu-id="7c430-156">Nell'elenco dei modelli di progetto, selezionare **applicazione Web ASP.NET**.</span><span class="sxs-lookup"><span data-stu-id="7c430-156">In the list of project templates, select **ASP.NET Web Application**.</span></span> <span data-ttu-id="7c430-157">Immettere un nome per il progetto e fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="7c430-157">Enter a name for your project and click **OK**.</span></span>

<span data-ttu-id="7c430-158">[![](external-authentication-services/_static/image8.png "Fare clic per espandere l'immagine")](external-authentication-services/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="7c430-158">[![](external-authentication-services/_static/image8.png "Click to Expand the Image")](external-authentication-services/_static/image7.png)</span></span>

<span data-ttu-id="7c430-159">Quando il **nuovo progetto ASP.NET** è visualizzata, scegliere il **SPA** modello e fare clic su **Crea progetto**.</span><span class="sxs-lookup"><span data-stu-id="7c430-159">When the **New ASP.NET Project** is displayed, select the **SPA** template and click **Create Project**.</span></span>

<span data-ttu-id="7c430-160">[![](external-authentication-services/_static/image10.png "Fare clic per espandere l'immagine")](external-authentication-services/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="7c430-160">[![](external-authentication-services/_static/image10.png "Click to Expand the Image")](external-authentication-services/_static/image9.png)</span></span>

<span data-ttu-id="7c430-161">Attesa di Visual Studio 2013 consente di creare il progetto.</span><span class="sxs-lookup"><span data-stu-id="7c430-161">Wait as Visual Studio 2013 creates your project.</span></span>

<span data-ttu-id="7c430-162">[![](external-authentication-services/_static/image12.png "Fare clic per espandere l'immagine")](external-authentication-services/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="7c430-162">[![](external-authentication-services/_static/image12.png "Click to Expand the Image")](external-authentication-services/_static/image11.png)</span></span>

<span data-ttu-id="7c430-163">Quando Visual Studio 2013 ha terminato la creazione del progetto, aprire il *Startup.Auth.cs* file a cui si trova il **App\_avviare** cartella.</span><span class="sxs-lookup"><span data-stu-id="7c430-163">When Visual Studio 2013 has finished creating your project, open the *Startup.Auth.cs* file that is located in the **App\_Start** folder.</span></span>

<span data-ttu-id="7c430-164">[![](external-authentication-services/_static/image14.png "Fare clic per espandere l'immagine")](external-authentication-services/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="7c430-164">[![](external-authentication-services/_static/image14.png "Click to Expand the Image")](external-authentication-services/_static/image13.png)</span></span>

<span data-ttu-id="7c430-165">Quando si crea il progetto, nessuno dei servizi di autenticazione esterni sono abilitati *Startup.Auth.cs* file; le operazioni seguenti viene illustrato ciò che potrebbe essere simile al codice, con le sezioni evidenziate per stabilire dove abiliti un servizio di autenticazione esterno ed eventuali impostazioni rilevanti per usare l'autenticazione di Microsoft Accounts, Twitter, Facebook o Google con l'applicazione ASP.NET:</span><span class="sxs-lookup"><span data-stu-id="7c430-165">When you first create the project, none of the external authentication services are enabled in *Startup.Auth.cs* file; the following illustrates what your code might resemble, with the sections highlighted for where you would enable an external authentication service and any relevant settings in order to use Microsoft Accounts, Twitter, Facebook, or Google authentication with your ASP.NET application:</span></span>

[!code-csharp[Main](external-authentication-services/samples/sample1.cs)]

<span data-ttu-id="7c430-166">Quando si preme F5 per compilare ed eseguire il debug dell'applicazione web, visualizzerà una schermata di accesso in cui si noterà che non sono stati definiti servizi di autenticazione esterni.</span><span class="sxs-lookup"><span data-stu-id="7c430-166">When you press F5 to build and debug your web application, it will display a login screen where you will see that no external authentication services have been defined.</span></span>

<span data-ttu-id="7c430-167">[![](external-authentication-services/_static/image16.png "Fare clic per espandere l'immagine")](external-authentication-services/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="7c430-167">[![](external-authentication-services/_static/image16.png "Click to Expand the Image")](external-authentication-services/_static/image15.png)</span></span>

<span data-ttu-id="7c430-168">Nelle sezioni seguenti, si apprenderà come abilitare ognuno dei servizi di autenticazione esterno che vengono forniti con ASP.NET in Visual Studio 2013.</span><span class="sxs-lookup"><span data-stu-id="7c430-168">In the following sections, you will learn how to enable each of the external authentication services that are provided with ASP.NET in Visual Studio 2013.</span></span>

<a id="FACEBOOK"></a>
## <a name="enabling-facebook-authentication"></a><span data-ttu-id="7c430-169">Abilitazione dell'autenticazione di Facebook</span><span class="sxs-lookup"><span data-stu-id="7c430-169">Enabling Facebook Authentication</span></span>

<span data-ttu-id="7c430-170">Utilizzano Facebook autenticazione è necessario creare un account sviluppatore di Facebook e il progetto richiederà un ID applicazione e una chiave privata da Facebook per il funzionamento.</span><span class="sxs-lookup"><span data-stu-id="7c430-170">Using Facebook authentication requires you to create a Facebook developer account, and your project will require an application ID and secret key from Facebook in order to function.</span></span> <span data-ttu-id="7c430-171">Per informazioni sulla creazione di un account sviluppatore di Facebook e ottenere l'ID dell'applicazione e una chiave privata, vedere [ https://go.microsoft.com/fwlink/?LinkID=252166 ](https://go.microsoft.com/fwlink/?LinkID=252166).</span><span class="sxs-lookup"><span data-stu-id="7c430-171">For information about creating a Facebook developer account and obtaining your application ID and secret key, see [https://go.microsoft.com/fwlink/?LinkID=252166](https://go.microsoft.com/fwlink/?LinkID=252166).</span></span>

<span data-ttu-id="7c430-172">Una volta ottenuta l'ID dell'applicazione e una chiave privata, attenersi alla procedura seguente per abilitare l'autenticazione di Facebook per l'applicazione web:</span><span class="sxs-lookup"><span data-stu-id="7c430-172">Once you have obtained your application ID and secret key, use the following steps to enable Facebook authentication for your web application:</span></span>

1. <span data-ttu-id="7c430-173">Quando il progetto è aperto in Visual Studio 2013, aprire il *Startup.Auth.cs* file:</span><span class="sxs-lookup"><span data-stu-id="7c430-173">When your project is open in Visual Studio 2013, open the *Startup.Auth.cs* file:</span></span>

    <span data-ttu-id="7c430-174">[![](external-authentication-services/_static/image18.png "Fare clic per espandere l'immagine")](external-authentication-services/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="7c430-174">[![](external-authentication-services/_static/image18.png "Click to Expand the Image")](external-authentication-services/_static/image17.png)</span></span>
2. <span data-ttu-id="7c430-175">Individuare la sezione evidenziata del codice:</span><span class="sxs-lookup"><span data-stu-id="7c430-175">Locate the highlighted section of code:</span></span>

    [!code-csharp[Main](external-authentication-services/samples/sample2.cs)]
3. <span data-ttu-id="7c430-176">Rimuovere il &quot; // &quot; caratteri da rimuovere il commento le righe di codice evidenziate e quindi aggiungere l'ID dell'applicazione e una chiave privata.</span><span class="sxs-lookup"><span data-stu-id="7c430-176">Remove the &quot;//&quot; characters to uncomment the highlighted lines of code, and then add your application ID and secret key.</span></span> <span data-ttu-id="7c430-177">Dopo aver aggiunto tali parametri, è possibile ricompilare il progetto:</span><span class="sxs-lookup"><span data-stu-id="7c430-177">Once you have added those parameters, you can recompile your project:</span></span>

    [!code-csharp[Main](external-authentication-services/samples/sample3.cs)]
4. <span data-ttu-id="7c430-178">Quando si preme F5 per aprire l'applicazione web nel browser web, si noterà che Facebook è stato definito come un servizio di autenticazione esterni:</span><span class="sxs-lookup"><span data-stu-id="7c430-178">When you press F5 to open your web application in your web browser, you will see that Facebook has been defined as an external authentication service:</span></span>

    <span data-ttu-id="7c430-179">[![](external-authentication-services/_static/image20.png "Fare clic per espandere l'immagine")](external-authentication-services/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="7c430-179">[![](external-authentication-services/_static/image20.png "Click to Expand the Image")](external-authentication-services/_static/image19.png)</span></span>
5. <span data-ttu-id="7c430-180">Quando si sceglie il **Facebook** pulsante, il browser verrà reindirizzato alla pagina di accesso Facebook:</span><span class="sxs-lookup"><span data-stu-id="7c430-180">When you click the **Facebook** button, your browser will be redirected to the Facebook login page:</span></span>

    <span data-ttu-id="7c430-181">[![](external-authentication-services/_static/image22.png "Fare clic per espandere l'immagine")](external-authentication-services/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="7c430-181">[![](external-authentication-services/_static/image22.png "Click to Expand the Image")](external-authentication-services/_static/image21.png)</span></span>
6. <span data-ttu-id="7c430-182">Dopo aver immesso le credenziali di Facebook e fare clic su **Accedi**, web browser verrà reindirizzato all'applicazione web, che richiederà il **nome utente** che si desidera associare il Account Facebook:</span><span class="sxs-lookup"><span data-stu-id="7c430-182">After you enter your Facebook credentials and click **Log in**, your web browser will be redirected back to your web application, which will prompt you for the **User name** that you want to associate with your Facebook account:</span></span>

    <span data-ttu-id="7c430-183">[![](external-authentication-services/_static/image24.png "Fare clic per espandere l'immagine")](external-authentication-services/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="7c430-183">[![](external-authentication-services/_static/image24.png "Click to Expand the Image")](external-authentication-services/_static/image23.png)</span></span>
7. <span data-ttu-id="7c430-184">Dopo aver immesso il nome utente e fa clic su di **iscriversi** pulsante, l'applicazione web verrà visualizzato il valore predefinito **home page di** per l'account Facebook:</span><span class="sxs-lookup"><span data-stu-id="7c430-184">After you have entered your user name and clicked the **Sign up** button, your web application will display the default **home page** for your Facebook account:</span></span>

    <span data-ttu-id="7c430-185">[![](external-authentication-services/_static/image26.png "Fare clic per espandere l'immagine")](external-authentication-services/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="7c430-185">[![](external-authentication-services/_static/image26.png "Click to Expand the Image")](external-authentication-services/_static/image25.png)</span></span>

<a id="GOOGLE"></a>
## <a name="enabling-google-authentication"></a><span data-ttu-id="7c430-186">Abilitazione dell'autenticazione di Google</span><span class="sxs-lookup"><span data-stu-id="7c430-186">Enabling Google Authentication</span></span>

<span data-ttu-id="7c430-187">Google è di gran lunga il più semplice di servizi di autenticazione esterni da abilitare perché non richiede un account sviluppatore, né richiede informazioni aggiuntive, ad esempio l'ID dell'applicazione o una chiave privata come gli altri servizi di autenticazione esterno necessitano.</span><span class="sxs-lookup"><span data-stu-id="7c430-187">Google is by far the easiest of the external authentication services to enable because it doesn't require a developer account, nor does it require additional information like your application ID or secret key as the other external authentication services necessitate.</span></span>

<span data-ttu-id="7c430-188">Per abilitare l'autenticazione di Google per l'applicazione web, attenersi alla procedura seguente:</span><span class="sxs-lookup"><span data-stu-id="7c430-188">To enable Google authentication for your web application, use the following steps:</span></span>

1. <span data-ttu-id="7c430-189">Quando il progetto è aperto in Visual Studio 2013, aprire il *Startup.Auth.cs* file:</span><span class="sxs-lookup"><span data-stu-id="7c430-189">When your project is open in Visual Studio 2013, open the *Startup.Auth.cs* file:</span></span>

    <span data-ttu-id="7c430-190">[![](external-authentication-services/_static/image28.png "Fare clic per espandere l'immagine")](external-authentication-services/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="7c430-190">[![](external-authentication-services/_static/image28.png "Click to Expand the Image")](external-authentication-services/_static/image27.png)</span></span>
2. <span data-ttu-id="7c430-191">Individuare la sezione evidenziata del codice:</span><span class="sxs-lookup"><span data-stu-id="7c430-191">Locate the highlighted section of code:</span></span>

    [!code-csharp[Main](external-authentication-services/samples/sample4.cs)]
3. <span data-ttu-id="7c430-192">Rimuovere il &quot; // &quot; caratteri da rimuovere il commento la riga di codice evidenziata e quindi ricompilare il progetto:</span><span class="sxs-lookup"><span data-stu-id="7c430-192">Remove the &quot;//&quot; characters to uncomment the highlighted line of code, and then recompile your project:</span></span>

    [!code-csharp[Main](external-authentication-services/samples/sample5.cs)]
4. <span data-ttu-id="7c430-193">Quando si preme F5 per aprire l'applicazione web nel browser web, si noterà che Google è stato definito come un servizio di autenticazione esterni:</span><span class="sxs-lookup"><span data-stu-id="7c430-193">When you press F5 to open your web application in your web browser, you will see that Google has been defined as an external authentication service:</span></span>

    <span data-ttu-id="7c430-194">[![](external-authentication-services/_static/image30.png "Fare clic per espandere l'immagine")](external-authentication-services/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="7c430-194">[![](external-authentication-services/_static/image30.png "Click to Expand the Image")](external-authentication-services/_static/image29.png)</span></span>
5. <span data-ttu-id="7c430-195">Quando si sceglie il **Google** pulsante, il browser verrà reindirizzato alla pagina di accesso di Google:</span><span class="sxs-lookup"><span data-stu-id="7c430-195">When you click the **Google** button, your browser will be redirected to the Google login page:</span></span>

    <span data-ttu-id="7c430-196">[![](external-authentication-services/_static/image32.png "Fare clic per espandere l'immagine")](external-authentication-services/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="7c430-196">[![](external-authentication-services/_static/image32.png "Click to Expand the Image")](external-authentication-services/_static/image31.png)</span></span>
6. <span data-ttu-id="7c430-197">Dopo aver immesso le credenziali di Google e fare clic su **Accedi**, Google verrà chiesto di verificare che l'applicazione web disponga delle autorizzazioni per accedere all'account di Google:</span><span class="sxs-lookup"><span data-stu-id="7c430-197">After you enter your Google credentials and click **Sign in**, Google will prompt you to verify that your web application has permissions to access your Google account:</span></span>

    <span data-ttu-id="7c430-198">[![](external-authentication-services/_static/image34.png "Fare clic per espandere l'immagine")](external-authentication-services/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="7c430-198">[![](external-authentication-services/_static/image34.png "Click to Expand the Image")](external-authentication-services/_static/image33.png)</span></span>
7. <span data-ttu-id="7c430-199">Quando fa clic su **Accept**, web browser verrà reindirizzato all'applicazione web, che richiederà il **nome utente** che si desidera associare all'account di Google:</span><span class="sxs-lookup"><span data-stu-id="7c430-199">When you click **Accept**, your web browser will be redirected back to your web application, which will prompt you for the **User name** that you want to associate with your Google account:</span></span>

    <span data-ttu-id="7c430-200">[![](external-authentication-services/_static/image36.png "Fare clic per espandere l'immagine")](external-authentication-services/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="7c430-200">[![](external-authentication-services/_static/image36.png "Click to Expand the Image")](external-authentication-services/_static/image35.png)</span></span>
8. <span data-ttu-id="7c430-201">Dopo aver immesso il nome utente e fa clic su di **iscriversi** pulsante, l'applicazione web verrà visualizzato il valore predefinito **home page di** per l'account di Google:</span><span class="sxs-lookup"><span data-stu-id="7c430-201">After you have entered your user name and clicked the **Sign up** button, your web application will display the default **home page** for your Google account:</span></span>

    <span data-ttu-id="7c430-202">[![](external-authentication-services/_static/image38.png "Fare clic per espandere l'immagine")](external-authentication-services/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="7c430-202">[![](external-authentication-services/_static/image38.png "Click to Expand the Image")](external-authentication-services/_static/image37.png)</span></span>

<a id="MICROSOFT"></a>
## <a name="enabling-microsoft-authentication"></a><span data-ttu-id="7c430-203">Abilitazione dell'autenticazione di Microsoft</span><span class="sxs-lookup"><span data-stu-id="7c430-203">Enabling Microsoft Authentication</span></span>

<span data-ttu-id="7c430-204">L'autenticazione di Microsoft è necessario creare un account sviluppatore, e richiede un ID client e il segreto client per il funzionamento.</span><span class="sxs-lookup"><span data-stu-id="7c430-204">Microsoft authentication requires you to create a developer account, and it requires a client ID and client secret in order to function.</span></span> <span data-ttu-id="7c430-205">Per informazioni sulla creazione di un account sviluppatore di Microsoft e ottenere l'ID client e il segreto client, vedere [ https://go.microsoft.com/fwlink/?LinkID=144070 ](https://go.microsoft.com/fwlink/?LinkID=144070).</span><span class="sxs-lookup"><span data-stu-id="7c430-205">For information about creating a Microsoft developer account and obtaining your client ID and client secret, see [https://go.microsoft.com/fwlink/?LinkID=144070](https://go.microsoft.com/fwlink/?LinkID=144070).</span></span>

<span data-ttu-id="7c430-206">Una volta ottenuta la chiave di consumer e un segreto del cliente, attenersi alla procedura seguente per abilitare l'autenticazione di Microsoft per l'applicazione web:</span><span class="sxs-lookup"><span data-stu-id="7c430-206">Once you have obtained your consumer key and consumer secret, use the following steps to enable Microsoft authentication for your web application:</span></span>

1. <span data-ttu-id="7c430-207">Quando il progetto è aperto in Visual Studio 2013, aprire il *Startup.Auth.cs* file:</span><span class="sxs-lookup"><span data-stu-id="7c430-207">When your project is open in Visual Studio 2013, open the *Startup.Auth.cs* file:</span></span>

    <span data-ttu-id="7c430-208">[![](external-authentication-services/_static/image40.png "Fare clic per espandere l'immagine")](external-authentication-services/_static/image39.png)</span><span class="sxs-lookup"><span data-stu-id="7c430-208">[![](external-authentication-services/_static/image40.png "Click to Expand the Image")](external-authentication-services/_static/image39.png)</span></span>
2. <span data-ttu-id="7c430-209">Individuare la sezione evidenziata del codice:</span><span class="sxs-lookup"><span data-stu-id="7c430-209">Locate the highlighted section of code:</span></span>

    [!code-csharp[Main](external-authentication-services/samples/sample6.cs)]
3. <span data-ttu-id="7c430-210">Rimuovere il &quot; // &quot; caratteri per rimuovere il commento le righe di codice evidenziate e quindi aggiungere l'ID client e il segreto client.</span><span class="sxs-lookup"><span data-stu-id="7c430-210">Remove the &quot;//&quot; characters to uncomment the highlighted lines of code, and then add your client ID and client secret.</span></span> <span data-ttu-id="7c430-211">Dopo aver aggiunto tali parametri, è possibile ricompilare il progetto:</span><span class="sxs-lookup"><span data-stu-id="7c430-211">Once you have added those parameters, you can recompile your project:</span></span>

    [!code-csharp[Main](external-authentication-services/samples/sample7.cs)]
4. <span data-ttu-id="7c430-212">Quando si preme F5 per aprire l'applicazione web nel browser web, si noterà che Microsoft sia stato definito come un servizio di autenticazione esterni:</span><span class="sxs-lookup"><span data-stu-id="7c430-212">When you press F5 to open your web application in your web browser, you will see that Microsoft has been defined as an external authentication service:</span></span>

    <span data-ttu-id="7c430-213">[![](external-authentication-services/_static/image42.png "Fare clic per espandere l'immagine")](external-authentication-services/_static/image41.png)</span><span class="sxs-lookup"><span data-stu-id="7c430-213">[![](external-authentication-services/_static/image42.png "Click to Expand the Image")](external-authentication-services/_static/image41.png)</span></span>
5. <span data-ttu-id="7c430-214">Quando si sceglie il **Microsoft** pulsante, il browser verrà reindirizzato alla pagina di accesso di Microsoft:</span><span class="sxs-lookup"><span data-stu-id="7c430-214">When you click the **Microsoft** button, your browser will be redirected to the Microsoft login page:</span></span>

    <span data-ttu-id="7c430-215">[![](external-authentication-services/_static/image44.png "Fare clic per espandere l'immagine")](external-authentication-services/_static/image43.png)</span><span class="sxs-lookup"><span data-stu-id="7c430-215">[![](external-authentication-services/_static/image44.png "Click to Expand the Image")](external-authentication-services/_static/image43.png)</span></span>
6. <span data-ttu-id="7c430-216">Dopo aver immesso le credenziali di Microsoft e fare clic su **Accedi**, verrà richiesto di verificare che l'applicazione web disponga delle autorizzazioni per accedere all'account Microsoft:</span><span class="sxs-lookup"><span data-stu-id="7c430-216">After you enter your Microsoft credentials and click **Sign in**, you will be prompted to verify that your web application has permissions to access your Microsoft account:</span></span>

    <span data-ttu-id="7c430-217">[![](external-authentication-services/_static/image46.png "Fare clic per espandere l'immagine")](external-authentication-services/_static/image45.png)</span><span class="sxs-lookup"><span data-stu-id="7c430-217">[![](external-authentication-services/_static/image46.png "Click to Expand the Image")](external-authentication-services/_static/image45.png)</span></span>
7. <span data-ttu-id="7c430-218">Quando fa clic su **Sì**, web browser verrà reindirizzato all'applicazione web, che richiederà il **nome utente** che si desidera associare all'account Microsoft:</span><span class="sxs-lookup"><span data-stu-id="7c430-218">When you click **Yes**, your web browser will be redirected back to your web application, which will prompt you for the **User name** that you want to associate with your Microsoft account:</span></span>

    <span data-ttu-id="7c430-219">[![](external-authentication-services/_static/image48.png "Fare clic per espandere l'immagine")](external-authentication-services/_static/image47.png)</span><span class="sxs-lookup"><span data-stu-id="7c430-219">[![](external-authentication-services/_static/image48.png "Click to Expand the Image")](external-authentication-services/_static/image47.png)</span></span>
8. <span data-ttu-id="7c430-220">Dopo aver immesso il nome utente e fa clic su di **iscriversi** pulsante, l'applicazione web verrà visualizzato il valore predefinito **home page di** del tuo account Microsoft:</span><span class="sxs-lookup"><span data-stu-id="7c430-220">After you have entered your user name and clicked the **Sign up** button, your web application will display the default **home page** for your Microsoft account:</span></span>

    <span data-ttu-id="7c430-221">[![](external-authentication-services/_static/image50.png "Fare clic per espandere l'immagine")](external-authentication-services/_static/image49.png)</span><span class="sxs-lookup"><span data-stu-id="7c430-221">[![](external-authentication-services/_static/image50.png "Click to Expand the Image")](external-authentication-services/_static/image49.png)</span></span>

<a id="TWITTER"></a>
## <a name="enabling-twitter-authentication"></a><span data-ttu-id="7c430-222">Abilitazione dell'autenticazione di Twitter</span><span class="sxs-lookup"><span data-stu-id="7c430-222">Enabling Twitter Authentication</span></span>

<span data-ttu-id="7c430-223">L'autenticazione è necessario creare un account sviluppatore, e richiede una chiave utente e il segreto del cliente per il funzionamento di Twitter.</span><span class="sxs-lookup"><span data-stu-id="7c430-223">Twitter authentication requires you to create a developer account, and it requires a consumer key and consumer secret in order to function.</span></span> <span data-ttu-id="7c430-224">Per informazioni sulla creazione di un account sviluppatore di Twitter e ottenere il codice del cliente e il segreto del cliente, vedere [ https://go.microsoft.com/fwlink/?LinkID=252166 ](https://go.microsoft.com/fwlink/?LinkID=252166).</span><span class="sxs-lookup"><span data-stu-id="7c430-224">For information about creating a Twitter developer account and obtaining your consumer key and consumer secret, see [https://go.microsoft.com/fwlink/?LinkID=252166](https://go.microsoft.com/fwlink/?LinkID=252166).</span></span>

<span data-ttu-id="7c430-225">Una volta ottenuta la chiave di consumer e un segreto del cliente, attenersi alla procedura seguente per abilitare l'autenticazione di Twitter per l'applicazione web:</span><span class="sxs-lookup"><span data-stu-id="7c430-225">Once you have obtained your consumer key and consumer secret, use the following steps to enable Twitter authentication for your web application:</span></span>

1. <span data-ttu-id="7c430-226">Quando il progetto è aperto in Visual Studio 2013, aprire il *Startup.Auth.cs* file:</span><span class="sxs-lookup"><span data-stu-id="7c430-226">When your project is open in Visual Studio 2013, open the *Startup.Auth.cs* file:</span></span>

    <span data-ttu-id="7c430-227">[![](external-authentication-services/_static/image52.png "Fare clic per espandere l'immagine")](external-authentication-services/_static/image51.png)</span><span class="sxs-lookup"><span data-stu-id="7c430-227">[![](external-authentication-services/_static/image52.png "Click to Expand the Image")](external-authentication-services/_static/image51.png)</span></span>
2. <span data-ttu-id="7c430-228">Individuare la sezione evidenziata del codice:</span><span class="sxs-lookup"><span data-stu-id="7c430-228">Locate the highlighted section of code:</span></span>

    [!code-csharp[Main](external-authentication-services/samples/sample8.cs)]
3. <span data-ttu-id="7c430-229">Rimuovere il &quot; // &quot; caratteri da rimuovere il commento le righe di codice evidenziate e quindi aggiungere il codice e il segreto del cliente.</span><span class="sxs-lookup"><span data-stu-id="7c430-229">Remove the &quot;//&quot; characters to uncomment the highlighted lines of code, and then add your consumer key and consumer secret.</span></span> <span data-ttu-id="7c430-230">Dopo aver aggiunto tali parametri, è possibile ricompilare il progetto:</span><span class="sxs-lookup"><span data-stu-id="7c430-230">Once you have added those parameters, you can recompile your project:</span></span>

    [!code-csharp[Main](external-authentication-services/samples/sample9.cs)]
4. <span data-ttu-id="7c430-231">Quando si preme F5 per aprire l'applicazione web nel browser web, si noterà che Twitter sia stato definito come un servizio di autenticazione esterni:</span><span class="sxs-lookup"><span data-stu-id="7c430-231">When you press F5 to open your web application in your web browser, you will see that Twitter has been defined as an external authentication service:</span></span>

    <span data-ttu-id="7c430-232">[![](external-authentication-services/_static/image54.png "Fare clic per espandere l'immagine")](external-authentication-services/_static/image53.png)</span><span class="sxs-lookup"><span data-stu-id="7c430-232">[![](external-authentication-services/_static/image54.png "Click to Expand the Image")](external-authentication-services/_static/image53.png)</span></span>
5. <span data-ttu-id="7c430-233">Quando si sceglie il **Twitter** pulsante, il browser verrà reindirizzato alla pagina di accesso Twitter:</span><span class="sxs-lookup"><span data-stu-id="7c430-233">When you click the **Twitter** button, your browser will be redirected to the Twitter login page:</span></span>

    <span data-ttu-id="7c430-234">[![](external-authentication-services/_static/image56.png "Fare clic per espandere l'immagine")](external-authentication-services/_static/image55.png)</span><span class="sxs-lookup"><span data-stu-id="7c430-234">[![](external-authentication-services/_static/image56.png "Click to Expand the Image")](external-authentication-services/_static/image55.png)</span></span>
6. <span data-ttu-id="7c430-235">Dopo aver immesso le credenziali di Twitter e fare clic su **Authorize app**, web browser verrà reindirizzato all'applicazione web, che richiederà il **nome utente** che si desidera associare a l'account Twitter:</span><span class="sxs-lookup"><span data-stu-id="7c430-235">After you enter your Twitter credentials and click **Authorize app**, your web browser will be redirected back to your web application, which will prompt you for the **User name** that you want to associate with your Twitter account:</span></span>

    <span data-ttu-id="7c430-236">[![](external-authentication-services/_static/image58.png "Fare clic per espandere l'immagine")](external-authentication-services/_static/image57.png)</span><span class="sxs-lookup"><span data-stu-id="7c430-236">[![](external-authentication-services/_static/image58.png "Click to Expand the Image")](external-authentication-services/_static/image57.png)</span></span>
7. <span data-ttu-id="7c430-237">Dopo aver immesso il nome utente e fa clic su di **iscriversi** pulsante, l'applicazione web verrà visualizzato il valore predefinito **home page di** per l'account Twitter:</span><span class="sxs-lookup"><span data-stu-id="7c430-237">After you have entered your user name and clicked the **Sign up** button, your web application will display the default **home page** for your Twitter account:</span></span>

    <span data-ttu-id="7c430-238">[![](external-authentication-services/_static/image60.png "Fare clic per espandere l'immagine")](external-authentication-services/_static/image59.png)</span><span class="sxs-lookup"><span data-stu-id="7c430-238">[![](external-authentication-services/_static/image60.png "Click to Expand the Image")](external-authentication-services/_static/image59.png)</span></span>

<a id="MOREINFO"></a>
## <a name="additional-information"></a><span data-ttu-id="7c430-239">Informazioni aggiuntive</span><span class="sxs-lookup"><span data-stu-id="7c430-239">Additional Information</span></span>

<span data-ttu-id="7c430-240">Per ulteriori informazioni sulla creazione di applicazioni che utilizzano OAuth e OpenID, vedere i seguenti URL:</span><span class="sxs-lookup"><span data-stu-id="7c430-240">For additional information about creating applications that use OAuth and OpenID, see the following URLs:</span></span>

- [https://go.microsoft.com/fwlink/?LinkID=252166](https://go.microsoft.com/fwlink/?LinkID=252166)
- [https://go.microsoft.com/fwlink/?LinkID=243995](https://go.microsoft.com/fwlink/?LinkID=243995)

<a id="COMBINE"></a>
### <a name="combining-external-authentication-services"></a><span data-ttu-id="7c430-241">La combinazione di servizi di autenticazione esterni</span><span class="sxs-lookup"><span data-stu-id="7c430-241">Combining External Authentication Services</span></span>

<span data-ttu-id="7c430-242">Per una maggiore flessibilità, è possibile definire più servizi di autenticazione esterno allo stesso tempo - web in questo modo gli utenti dell'applicazione di utilizzare un account da uno dei servizi di autenticazione esterno abilitato:</span><span class="sxs-lookup"><span data-stu-id="7c430-242">For greater flexibility, you can define multiple external authentication services at the same time - this allows your web application's users to use an account from any of the enabled external authentication services:</span></span>

<span data-ttu-id="7c430-243">[![](external-authentication-services/_static/image62.png "Fare clic per espandere l'immagine")](external-authentication-services/_static/image61.png)</span><span class="sxs-lookup"><span data-stu-id="7c430-243">[![](external-authentication-services/_static/image62.png "Click to Expand the Image")](external-authentication-services/_static/image61.png)</span></span>

<a id="FQDN"></a>
### <a name="configuring-iis-express-to-use-a-fully-qualified-domain-name"></a><span data-ttu-id="7c430-244">Configurazione di IIS Express per utilizzare un nome di dominio completo</span><span class="sxs-lookup"><span data-stu-id="7c430-244">Configuring IIS Express to use a Fully Qualified Domain Name</span></span>

<span data-ttu-id="7c430-245">Alcuni provider di autenticazione esterno non supportano il test dell'applicazione utilizzando un indirizzo HTTP come `http://localhost:port/`.</span><span class="sxs-lookup"><span data-stu-id="7c430-245">Some external authentication providers do not support testing your application by using an HTTP address like `http://localhost:port/`.</span></span> <span data-ttu-id="7c430-246">Per risolvere questo problema, è possibile aggiungere un mapping statico di completamente dominio nome completo (FQDN) per il file host e configurare le opzioni di progetto in Visual Studio 2013, usare il FQDN per il test e il debug.</span><span class="sxs-lookup"><span data-stu-id="7c430-246">To work around this issue, you can add a static Fully Qualified Domain Name (FQDN) mapping to your HOSTS file and configure your project options in Visual Studio 2013 to use the FQDN for testing/debugging.</span></span> <span data-ttu-id="7c430-247">A tale scopo, attenersi alla procedura seguente:</span><span class="sxs-lookup"><span data-stu-id="7c430-247">To do so, use the following steps:</span></span>

- <span data-ttu-id="7c430-248">Aggiungere un nome FQDN statico mapping nel file HOSTS:</span><span class="sxs-lookup"><span data-stu-id="7c430-248">Add a static FQDN mapping your HOSTS file:</span></span>

  1. <span data-ttu-id="7c430-249">Aprire un prompt dei comandi con privilegi elevati in Windows.</span><span class="sxs-lookup"><span data-stu-id="7c430-249">Open an elevated command prompt in Windows.</span></span>
  2. <span data-ttu-id="7c430-250">Digitare il comando seguente:</span><span class="sxs-lookup"><span data-stu-id="7c430-250">Type the following command:</span></span>

      <span data-ttu-id="7c430-251"><kbd>notepad %WinDir%\system32\drivers\etc\hosts</kbd></span><span class="sxs-lookup"><span data-stu-id="7c430-251"><kbd>notepad %WinDir%\system32\drivers\etc\hosts</kbd></span></span>
  3. <span data-ttu-id="7c430-252">Aggiungere una voce simile alla seguente al file HOSTS:</span><span class="sxs-lookup"><span data-stu-id="7c430-252">Add an entry like the following to the HOSTS file:</span></span>

      <span data-ttu-id="7c430-253"><kbd>127.0.0.1 www.wingtiptoys.com</kbd></span><span class="sxs-lookup"><span data-stu-id="7c430-253"><kbd>127.0.0.1 www.wingtiptoys.com</kbd></span></span>
  4. <span data-ttu-id="7c430-254">Salvare e chiudere il file HOSTS.</span><span class="sxs-lookup"><span data-stu-id="7c430-254">Save and close your HOSTS file.</span></span>

- <span data-ttu-id="7c430-255">Configurare il progetto di Visual Studio per usare il FQDN:</span><span class="sxs-lookup"><span data-stu-id="7c430-255">Configure your Visual Studio project to use the FQDN:</span></span>

  1. <span data-ttu-id="7c430-256">Quando il progetto è aperto in Visual Studio 2013, fare clic su di **progetto** menu, quindi selezionare le proprietà del progetto.</span><span class="sxs-lookup"><span data-stu-id="7c430-256">When your project is open in Visual Studio 2013, click the **Project** menu, and then select your project's properties.</span></span> <span data-ttu-id="7c430-257">Ad esempio, è possibile selezionare **WebApplication1 proprietà**.</span><span class="sxs-lookup"><span data-stu-id="7c430-257">For example, you might select **WebApplication1 Properties**.</span></span>
  2. <span data-ttu-id="7c430-258">Selezionare il **Web** scheda.</span><span class="sxs-lookup"><span data-stu-id="7c430-258">Select the **Web** tab.</span></span>
  3. <span data-ttu-id="7c430-259">Immettere il nome FQDN per il <strong>Url progetto</strong>.</span><span class="sxs-lookup"><span data-stu-id="7c430-259">Enter your FQDN for the <strong>Project Url</strong>.</span></span> <span data-ttu-id="7c430-260">Ad esempio, immettere <kbd> <http://www.wingtiptoys.com> </kbd> se che era il mapping del nome FQDN che è stato aggiunto al file HOSTS.</span><span class="sxs-lookup"><span data-stu-id="7c430-260">For example, you would enter <kbd><http://www.wingtiptoys.com></kbd> if that was the FQDN mapping that you added to your HOSTS file.</span></span>

- <span data-ttu-id="7c430-261">Configurare IIS Express per usare il FQDN per l'applicazione:</span><span class="sxs-lookup"><span data-stu-id="7c430-261">Configure IIS Express to use the FQDN for your application:</span></span>

    1. <span data-ttu-id="7c430-262">Aprire un prompt dei comandi con privilegi elevati in Windows.</span><span class="sxs-lookup"><span data-stu-id="7c430-262">Open an elevated command prompt in Windows.</span></span>
    2. <span data-ttu-id="7c430-263">Digitare il comando seguente per passare alla cartella IIS Express:</span><span class="sxs-lookup"><span data-stu-id="7c430-263">Type the following command to change to your IIS Express folder:</span></span>

        <span data-ttu-id="7c430-264"><kbd>CD /d &quot;%ProgramFiles%\IIS Express&quot;</kbd></span><span class="sxs-lookup"><span data-stu-id="7c430-264"><kbd>cd /d &quot;%ProgramFiles%\IIS Express&quot;</kbd></span></span>
    3. <span data-ttu-id="7c430-265">Digitare il comando seguente per aggiungere il nome FQDN nell'applicazione:</span><span class="sxs-lookup"><span data-stu-id="7c430-265">Type the following command to add the FQDN to your application:</span></span>

        <span data-ttu-id="7c430-266"><kbd>appcmd.exe set config -section:system.applicationHost/sites /+&quot;[name='WebApplication1'].bindings.[protocol='http',bindingInformation='\*:80:www.wingtiptoys.com']&quot; /commit:apphost</kbd></span><span class="sxs-lookup"><span data-stu-id="7c430-266"><kbd>appcmd.exe set config -section:system.applicationHost/sites /+&quot;[name='WebApplication1'].bindings.[protocol='http',bindingInformation='\*:80:www.wingtiptoys.com']&quot; /commit:apphost</kbd></span></span>

  <span data-ttu-id="7c430-267">Dove **WebApplication1** è il nome del progetto e **bindingInformation** contiene il numero di porta e il nome di dominio completo che si desidera utilizzare per il test.</span><span class="sxs-lookup"><span data-stu-id="7c430-267">Where **WebApplication1** is the name of your project and **bindingInformation** contains the port number and FQDN that you want to use for your testing.</span></span>

<a id="OBTAIN"></a>
### <a name="how-to-obtain-your-application-settings-for-microsoft-authentication"></a><span data-ttu-id="7c430-268">Come ottenere le impostazioni dell'applicazione per l'autenticazione di Microsoft</span><span class="sxs-lookup"><span data-stu-id="7c430-268">How to Obtain your Application Settings for Microsoft Authentication</span></span>

<span data-ttu-id="7c430-269">Il collegamento di un'applicazione a Windows Live per Microsoft Authentication è un processo semplice.</span><span class="sxs-lookup"><span data-stu-id="7c430-269">Linking an application to Windows Live for Microsoft Authentication is a simple process.</span></span> <span data-ttu-id="7c430-270">Se un'applicazione a Windows Live non è già collegato, è possibile utilizzare la procedura seguente:</span><span class="sxs-lookup"><span data-stu-id="7c430-270">If you have not already linked an application to Windows Live, you can use the following steps:</span></span>

1. <span data-ttu-id="7c430-271">Passare a [ https://go.microsoft.com/fwlink/?LinkID=144070 ](https://go.microsoft.com/fwlink/?LinkID=144070) e immettere il nome dell'account Microsoft e la password, quando richiesto, quindi fare clic su **Accedi**:</span><span class="sxs-lookup"><span data-stu-id="7c430-271">Browse to [https://go.microsoft.com/fwlink/?LinkID=144070](https://go.microsoft.com/fwlink/?LinkID=144070) and enter your Microsoft account name and password when prompted, then click **Sign in**:</span></span>

    <span data-ttu-id="7c430-272">[![](external-authentication-services/_static/image64.png "Fare clic per espandere l'immagine")](external-authentication-services/_static/image63.png)</span><span class="sxs-lookup"><span data-stu-id="7c430-272">[![](external-authentication-services/_static/image64.png "Click to Expand the Image")](external-authentication-services/_static/image63.png)</span></span>
2. <span data-ttu-id="7c430-273">Immettere il nome e la lingua dell'applicazione quando viene richiesto e quindi fare clic su **accettare**:</span><span class="sxs-lookup"><span data-stu-id="7c430-273">Enter the name and language of your application when prompted, and then click **I accept**:</span></span>

    <span data-ttu-id="7c430-274">[![](external-authentication-services/_static/image66.png "Fare clic per espandere l'immagine")](external-authentication-services/_static/image65.png)</span><span class="sxs-lookup"><span data-stu-id="7c430-274">[![](external-authentication-services/_static/image66.png "Click to Expand the Image")](external-authentication-services/_static/image65.png)</span></span>
3. <span data-ttu-id="7c430-275">Nel **impostazioni API** pagina per l'applicazione, immettere il dominio di reindirizzamento per l'applicazione e copia il **ID Client** e **segreto Client** per il progetto, quindi Fare clic su **salvare**:</span><span class="sxs-lookup"><span data-stu-id="7c430-275">On the **API Settings** page for your application, enter the redirect domain for your application and copy the **Client ID** and **Client secret** for your project, and then click **Save**:</span></span>

    <span data-ttu-id="7c430-276">[![](external-authentication-services/_static/image68.png "Fare clic per espandere l'immagine")](external-authentication-services/_static/image67.png)</span><span class="sxs-lookup"><span data-stu-id="7c430-276">[![](external-authentication-services/_static/image68.png "Click to Expand the Image")](external-authentication-services/_static/image67.png)</span></span>

<a id="DISABLE"></a>
### <a name="optional-disable-local-registration"></a><span data-ttu-id="7c430-277">Facoltativo: Disabilitare la registrazione locale</span><span class="sxs-lookup"><span data-stu-id="7c430-277">Optional: Disable Local Registration</span></span>

<span data-ttu-id="7c430-278">La funzionalità di registrazione locale corrente di ASP.NET non impedisce la creazione di account; membro di programmi automatizzati (componenti) ad esempio, utilizzando una tecnologia di convalida e di prevenzione bot come [CAPTCHA](../../../web-pages/overview/security/16-adding-security-and-membership.md).</span><span class="sxs-lookup"><span data-stu-id="7c430-278">The current ASP.NET local registration functionality does not prevent automated programs (bots) from creating member accounts; for example, by using a bot-prevention and validation technology like [CAPTCHA](../../../web-pages/overview/security/16-adding-security-and-membership.md).</span></span> <span data-ttu-id="7c430-279">Per questo motivo, è necessario rimuovere il collegamento di modulo e la registrazione di account di accesso locale nella pagina di accesso.</span><span class="sxs-lookup"><span data-stu-id="7c430-279">Because of this, you should remove the local login form and registration link on the login page.</span></span> <span data-ttu-id="7c430-280">A tale scopo, aprire il * \_cshtml* pagina nel progetto e quindi impostare come commento le righe per il pannello di accesso locale e il collegamento di registrazione.</span><span class="sxs-lookup"><span data-stu-id="7c430-280">To do so, open the *\_Login.cshtml* page in your project, and then comment out the lines for the local login panel and the registration link.</span></span> <span data-ttu-id="7c430-281">Nella pagina risultante dovrebbe essere come nell'esempio di codice seguente:</span><span class="sxs-lookup"><span data-stu-id="7c430-281">The resulting page should look like the following code sample:</span></span>

[!code-html[Main](external-authentication-services/samples/sample10.html)]

<span data-ttu-id="7c430-282">Una volta il pannello di accesso locale e il collegamento di registrazione sono state disabilitate, la pagina di accesso verrà visualizzate solo i provider di autenticazione esterno che è stata abilitata:</span><span class="sxs-lookup"><span data-stu-id="7c430-282">Once the local login panel and the registration link have been disabled, your login page will only display the external authentication providers that you have enabled:</span></span>

<span data-ttu-id="7c430-283">[![](external-authentication-services/_static/image70.png "Fare clic per espandere l'immagine")](external-authentication-services/_static/image69.png)</span><span class="sxs-lookup"><span data-stu-id="7c430-283">[![](external-authentication-services/_static/image70.png "Click to Expand the Image")](external-authentication-services/_static/image69.png)</span></span>
