---
uid: web-forms/overview/data-access/filtering-scenarios-with-the-datalist-and-repeater/master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs
title: Master-Details con un elenco puntato dei record Master DataList dettagli (c#) | Documenti Microsoft
author: rick-anderson
description: In questa esercitazione si sarà comprimere il report di due pagine master-details dell'esercitazione precedente in una singola pagina, che mostra un elenco di nomi di categoria in t...
ms.author: aspnetcontent
manager: wpickett
ms.date: 10/17/2006
ms.topic: article
ms.assetid: c727bb73-7b59-41a1-8dc3-623c6d69e7c2
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/data-access/filtering-scenarios-with-the-datalist-and-repeater/master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs
msc.type: authoredcontent
ms.openlocfilehash: c041c352c379dc1d3c0f13013e7e323faa500912
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/06/2018
ms.locfileid: "30888968"
---
<a name="masterdetail-using-a-bulleted-list-of-master-records-with-a-details-datalist-c"></a><span data-ttu-id="9adc8-103">Master-Details con un elenco puntato dei record Master DataList dettagli (c#)</span><span class="sxs-lookup"><span data-stu-id="9adc8-103">Master/Detail Using a Bulleted List of Master Records with a Details DataList (C#)</span></span>
====================
<span data-ttu-id="9adc8-104">da [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="9adc8-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="9adc8-105">[Scaricare App di esempio](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_35_CS.exe) o [Scarica il PDF](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/datatutorial35cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="9adc8-105">[Download Sample App](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_35_CS.exe) or [Download PDF](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/datatutorial35cs1.pdf)</span></span>

> <span data-ttu-id="9adc8-106">In questa esercitazione si sarà comprimere il report di due pagine master-details dell'esercitazione precedente in una singola pagina, che mostra un elenco di nomi di categoria sul lato sinistro dello schermo e i prodotti della categoria selezionata a destra della schermata.</span><span class="sxs-lookup"><span data-stu-id="9adc8-106">In this tutorial we'll compress the two-page master/detail report of the previous tutorial into a single page, showing a bulleted list of category names on the left side of the screen and the selected category's products on the right of the screen.</span></span>


## <a name="introduction"></a><span data-ttu-id="9adc8-107">Introduzione</span><span class="sxs-lookup"><span data-stu-id="9adc8-107">Introduction</span></span>

<span data-ttu-id="9adc8-108">Nel [esercitazione precedente](master-detail-filtering-acess-two-pages-datalist-cs.md) abbiamo esaminato come separare un report master/dettaglio tra due pagine.</span><span class="sxs-lookup"><span data-stu-id="9adc8-108">In the [preceding tutorial](master-detail-filtering-acess-two-pages-datalist-cs.md) we looked at how to separate a master/detail report across two pages.</span></span> <span data-ttu-id="9adc8-109">Nella pagina master è usato un controllo Repeater per il rendering di un elenco puntato di categorie.</span><span class="sxs-lookup"><span data-stu-id="9adc8-109">In the master page we used a Repeater control to render a bulleted list of categories.</span></span> <span data-ttu-id="9adc8-110">Ogni nome di categoria è un collegamento ipertestuale che, quando si fa clic, si accettano l'utente alla pagina dei dettagli, in cui un controllo DataList due colonne mostrano i prodotti appartenenti alla categoria selezionata.</span><span class="sxs-lookup"><span data-stu-id="9adc8-110">Each category name was a hyperlink that, when clicked, would take the user to the details page, where a two-column DataList showed those products belonging to the selected category.</span></span>

<span data-ttu-id="9adc8-111">In questa esercitazione si verrà comprimere l'esercitazione di due pagine in una singola pagina, che mostra un elenco di nomi di categoria sul lato sinistro della schermata con il nome di ogni categoria sottoposto a rendering come LinkButton.</span><span class="sxs-lookup"><span data-stu-id="9adc8-111">In this tutorial we'll compress the two-page tutorial into a single page, showing a bulleted list of category names on the left side of the screen with each category name rendered as a LinkButton.</span></span> <span data-ttu-id="9adc8-112">Facendo clic sul nome della categoria LinkButton provoca un postback e associa i prodotti s categoria selezionata DataList due colonne a destra della schermata.</span><span class="sxs-lookup"><span data-stu-id="9adc8-112">Clicking one of the category name LinkButtons induces a postback and binds the selected category s products to a two-column DataList on the right of the screen.</span></span> <span data-ttu-id="9adc8-113">Oltre a visualizzare il nome di ogni categoria s, Ripetitore a sinistra mostra del numero totale di prodotti per una determinata categoria (vedere la figura 1).</span><span class="sxs-lookup"><span data-stu-id="9adc8-113">In addition to displaying each category s name, the Repeater on the left shows how many total products there are for a given category (see Figure 1).</span></span>


<span data-ttu-id="9adc8-114">[![La categoria s nome e il numero totale di prodotti vengono visualizzate a sinistra](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image2.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="9adc8-114">[![The Category s Name and Total Number of Products are Displayed on the Left](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image2.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image1.png)</span></span>

<span data-ttu-id="9adc8-115">**Figura 1**: numero totale di prodotti e la categoria s nome vengono visualizzati a sinistra ([fare clic per visualizzare l'immagine ingrandita](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="9adc8-115">**Figure 1**: The Category s Name and Total Number of Products are Displayed on the Left ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image3.png))</span></span>


## <a name="step-1-displaying-a-repeater-in-the-left-portion-of-the-screen"></a><span data-ttu-id="9adc8-116">Passaggio 1: Visualizzare un ripetitore nella parte sinistra della schermata</span><span class="sxs-lookup"><span data-stu-id="9adc8-116">Step 1: Displaying a Repeater in the Left Portion of the Screen</span></span>

<span data-ttu-id="9adc8-117">Per questa esercitazione è necessario disporre dell'elenco delle categorie vengono visualizzate a sinistra dei prodotti s categoria selezionata.</span><span class="sxs-lookup"><span data-stu-id="9adc8-117">For this tutorial we need to have the bulleted list of categories appear to the left of the selected category s products.</span></span> <span data-ttu-id="9adc8-118">Il contenuto all'interno di una pagina web può essere posizionato utilizzando tag HTML standard elementi paragrafo, gli spazi unificatori, `<table>` s e così via o tramite le tecniche di foglio di stile (CSS).</span><span class="sxs-lookup"><span data-stu-id="9adc8-118">Content within a web page can be positioned using standard HTML elements paragraph tags, non-breaking spaces, `<table>` s, and so on or through cascading stylesheet (CSS) techniques.</span></span> <span data-ttu-id="9adc8-119">Tutte le esercitazioni finora sono utilizzate le tecniche CSS per il posizionamento.</span><span class="sxs-lookup"><span data-stu-id="9adc8-119">All of our tutorials thus far have used CSS techniques for positioning.</span></span> <span data-ttu-id="9adc8-120">Quando si compila l'interfaccia utente di spostamento in questa pagina master nel [pagine Master e esplorazione del sito](../introduction/master-pages-and-site-navigation-cs.md) esercitazione utilizzassimo *il posizionamento assoluto*, che indica l'offset del precisa pixel per la navigazione elenco e il contenuto principale.</span><span class="sxs-lookup"><span data-stu-id="9adc8-120">When we built the navigation user interface in our master page in the [Master Pages and Site Navigation](../introduction/master-pages-and-site-navigation-cs.md) tutorial we used *absolute positioning*, indicating the precise pixel offset for the navigation list and the main content.</span></span> <span data-ttu-id="9adc8-121">In alternativa, CSS può essere utilizzati per posizionare un elemento a destra o a sinistra di un altro tramite *mobile*.</span><span class="sxs-lookup"><span data-stu-id="9adc8-121">Alternatively, CSS can be used to position one element to the right or left of another through *floating*.</span></span> <span data-ttu-id="9adc8-122">Possiamo abbiamo dell'elenco delle categorie vengono visualizzate a sinistra dei prodotti s categoria selezionata da Mobile Ripetitore a sinistra del controllo DataList</span><span class="sxs-lookup"><span data-stu-id="9adc8-122">We can have the bulleted list of categories appear to the left of the selected category s products by floating the Repeater to the left of the DataList</span></span>

<span data-ttu-id="9adc8-123">Aprire il `CategoriesAndProducts.aspx` pagina dal `DataListRepeaterFiltering` cartella e aggiungere alla pagina un ripetitore e un controllo DataList.</span><span class="sxs-lookup"><span data-stu-id="9adc8-123">Open the `CategoriesAndProducts.aspx` page from the `DataListRepeaterFiltering` folder and add to the page a Repeater and a DataList.</span></span> <span data-ttu-id="9adc8-124">Impostare il controllo Repeater s `ID` a `Categories` e DataList s per `CategoryProducts`.</span><span class="sxs-lookup"><span data-stu-id="9adc8-124">Set the Repeater s `ID` to `Categories` and the DataList s to `CategoryProducts`.</span></span> <span data-ttu-id="9adc8-125">Passare alla visualizzazione origine e inserire i controlli Repeater e DataList entro i propri `<div>` elementi.</span><span class="sxs-lookup"><span data-stu-id="9adc8-125">Go to the Source view and put the Repeater and DataList controls within their own `<div>` elements.</span></span> <span data-ttu-id="9adc8-126">Vale a dire, racchiudere Ripetitore all'interno di un `<div>` elemento prima e quindi DataList nel proprio `<div>` elemento direttamente dopo il controllo Repeater.</span><span class="sxs-lookup"><span data-stu-id="9adc8-126">That is, enclose the Repeater within a `<div>` element first and then the DataList in its own `<div>` element directly after the Repeater.</span></span> <span data-ttu-id="9adc8-127">Il markup a questo punto dovrebbe essere simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="9adc8-127">Your markup at this point should look similar to the following:</span></span>


[!code-aspx[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/samples/sample1.aspx)]

<span data-ttu-id="9adc8-128">Per rendere mobile Ripetitore a sinistra del controllo DataList, è necessario utilizzare il `float` attributo di stile CSS, come illustrato di seguito:</span><span class="sxs-lookup"><span data-stu-id="9adc8-128">To float the Repeater to the left of the DataList, we need to use the `float` CSS style attribute, like so:</span></span>


[!code-html[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/samples/sample2.html)]

<span data-ttu-id="9adc8-129">Il `float: left;` scorre il primo `<div>` elemento a sinistra del secondo.</span><span class="sxs-lookup"><span data-stu-id="9adc8-129">The `float: left;` floats the first `<div>` element to the left of the second one.</span></span> <span data-ttu-id="9adc8-130">Il `width` e `padding-right` impostazioni indicano il primo `<div>` s `width` e viene aggiunta la spaziatura tra il `<div>` contenuto dell'elemento s e il margine destro.</span><span class="sxs-lookup"><span data-stu-id="9adc8-130">The `width` and `padding-right` settings indicate the first `<div>` s `width` and how much padding is added between the `<div>` element s content and its right margin.</span></span> <span data-ttu-id="9adc8-131">Per ulteriori informazioni su mobile elementi in CSS estrarre il [Floatutorial](http://css.maxdesign.com.au/floatutorial/).</span><span class="sxs-lookup"><span data-stu-id="9adc8-131">For more information on floating elements in CSS check out the [Floatutorial](http://css.maxdesign.com.au/floatutorial/).</span></span>

<span data-ttu-id="9adc8-132">Anziché specificare l'impostazione di stile direttamente tramite il primo `<p>` elemento s `style` attributo, consente di creare invece una nuova classe CSS in s `Styles.css` denominato `FloatLeft`:</span><span class="sxs-lookup"><span data-stu-id="9adc8-132">Rather than specify the style setting directly through the first `<p>` element s `style` attribute, let s instead create a new CSS class in `Styles.css` named `FloatLeft`:</span></span>


[!code-css[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/samples/sample3.css)]

<span data-ttu-id="9adc8-133">Quindi è possibile sostituire il `<div>` con `<div class="FloatLeft">`.</span><span class="sxs-lookup"><span data-stu-id="9adc8-133">Then we can replace the `<div>` with `<div class="FloatLeft">`.</span></span>

<span data-ttu-id="9adc8-134">Dopo aver aggiunto la classe CSS e il markup nella configurazione di `CategoriesAndProducts.aspx` page, passare alla finestra di progettazione.</span><span class="sxs-lookup"><span data-stu-id="9adc8-134">After adding the CSS class and configuring the markup in the `CategoriesAndProducts.aspx` page, go to the Designer.</span></span> <span data-ttu-id="9adc8-135">Dovrebbe essere Ripetitore a virgola mobile a sinistra del controllo DataList (sebbene destra entrambi semplicemente appariranno come le caselle di grigie poiché è ve ancora per configurare le origini dati o modelli).</span><span class="sxs-lookup"><span data-stu-id="9adc8-135">You should see the Repeater floating to the left of the DataList (although right now both just appear as gray boxes since we ve yet to configure their data sources or templates).</span></span>


<span data-ttu-id="9adc8-136">[![Ripetitore è resa mobile a sinistra del controllo DataList](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image5.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="9adc8-136">[![The Repeater is Floated to the Left of the DataList](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image5.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image4.png)</span></span>

<span data-ttu-id="9adc8-137">**Figura 2**: il Ripetitore è resa mobile a sinistra del controllo DataList ([fare clic per visualizzare l'immagine ingrandita](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="9adc8-137">**Figure 2**: The Repeater is Floated to the Left of the DataList ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image6.png))</span></span>


## <a name="step-2-determining-the-number-of-products-for-each-category"></a><span data-ttu-id="9adc8-138">Passaggio 2: Determinare il numero di prodotti per ogni categoria</span><span class="sxs-lookup"><span data-stu-id="9adc8-138">Step 2: Determining the Number of Products for Each Category</span></span>

<span data-ttu-id="9adc8-139">S Repeater e DataList circostanti markup completo, è nuovamente pronto per associare i dati della categoria a Repeater di controllo.</span><span class="sxs-lookup"><span data-stu-id="9adc8-139">With the Repeater and DataList s surrounding markup complete, we re ready to bind the category data to the Repeater control.</span></span> <span data-ttu-id="9adc8-140">Tuttavia, come mostra l'elenco puntato delle categorie nella figura 1, oltre a ogni nome di categoria s è anche necessario visualizzare il numero di prodotti associati alla categoria.</span><span class="sxs-lookup"><span data-stu-id="9adc8-140">However, as the bulleted list of categories in Figure 1 shows, in addition to each category s name we also need to display the number of products associated with the category.</span></span> <span data-ttu-id="9adc8-141">Per accedere a queste informazioni è possibile:</span><span class="sxs-lookup"><span data-stu-id="9adc8-141">To access this information we can either:</span></span>

- <span data-ttu-id="9adc8-142">**Determinare le informazioni dai classe code-behind s pagina ASP.NET.**</span><span class="sxs-lookup"><span data-stu-id="9adc8-142">**Determine this information from the ASP.NET page s code-behind class.**</span></span> <span data-ttu-id="9adc8-143">Fornendo una particolare *`categoryID`* è possibile determinare il numero di prodotti associati chiamando il `ProductsBLL` classe s `GetProductsByCategoryID(categoryID)` metodo.</span><span class="sxs-lookup"><span data-stu-id="9adc8-143">Given a particular *`categoryID`* we can determine the number of associated products by calling the `ProductsBLL` class s `GetProductsByCategoryID(categoryID)` method.</span></span> <span data-ttu-id="9adc8-144">Questo metodo restituisce un `ProductsDataTable` i cui `Count` proprietà indica quanti `ProductsRow` s esista, che corrisponde al numero di prodotti per l'oggetto specificato *`categoryID`*.</span><span class="sxs-lookup"><span data-stu-id="9adc8-144">This method returns a `ProductsDataTable` object whose `Count` property indicates how many `ProductsRow` s exists, which is the number of products for the specified *`categoryID`*.</span></span> <span data-ttu-id="9adc8-145">È possibile creare un `ItemDataBound` gestore eventi per il controllo Repeater che, per ogni categoria associato al controllo Repeater, chiama il `ProductsBLL` classe s `GetProductsByCategoryID(categoryID)` (metodo) e include il conteggio nell'output.</span><span class="sxs-lookup"><span data-stu-id="9adc8-145">We can create an `ItemDataBound` event handler for the Repeater that, for each category bound to the Repeater, calls the `ProductsBLL` class s `GetProductsByCategoryID(categoryID)` method and includes its count in the output.</span></span>
- <span data-ttu-id="9adc8-146">**Aggiornamento di `CategoriesDataTable` del dataset tipizzato da includere un `NumberOfProducts` colonna.**</span><span class="sxs-lookup"><span data-stu-id="9adc8-146">**Update the `CategoriesDataTable` in the Typed DataSet to include a `NumberOfProducts` column.**</span></span> <span data-ttu-id="9adc8-147">È quindi possibile aggiornare il `GetCategories()` metodo il `CategoriesDataTable` per includere tali informazioni o, in alternativa, lasciare `GetCategories()` come-è e creare un nuovo `CategoriesDataTable` metodo chiamato `GetCategoriesAndNumberOfProducts()`.</span><span class="sxs-lookup"><span data-stu-id="9adc8-147">We can then update the `GetCategories()` method in the `CategoriesDataTable` to include this information or, alternatively, leave `GetCategories()` as-is and create a new `CategoriesDataTable` method called `GetCategoriesAndNumberOfProducts()`.</span></span>

<span data-ttu-id="9adc8-148">Consente di esplorare entrambe le tecniche s.</span><span class="sxs-lookup"><span data-stu-id="9adc8-148">Let s explore both of these techniques.</span></span> <span data-ttu-id="9adc8-149">Il primo approccio è più semplice implementare poiché non abbiamo non è necessario aggiornare il livello di accesso ai dati; Tuttavia, è necessario le ulteriori comunicazioni con il database.</span><span class="sxs-lookup"><span data-stu-id="9adc8-149">The first approach is simpler to implement since we don t need to update the Data Access Layer; however, it requires more communications with the database.</span></span> <span data-ttu-id="9adc8-150">La chiamata al `ProductsBLL` classe s `GetProductsByCategoryID(categoryID)` metodo il `ItemDataBound` gestore eventi aggiunge una chiamata di database aggiuntive per ogni categoria visualizzata nel Repeater.</span><span class="sxs-lookup"><span data-stu-id="9adc8-150">The call to the `ProductsBLL` class s `GetProductsByCategoryID(categoryID)` method in the `ItemDataBound` event handler adds an extra database call for each category displayed in the Repeater.</span></span> <span data-ttu-id="9adc8-151">Con questa tecnica esistono *N* + chiamate di 1 database, dove *N* è il numero di categorie visualizzate nel Repeater.</span><span class="sxs-lookup"><span data-stu-id="9adc8-151">With this technique there are *N* + 1 database calls, where *N* is the number of categories displayed in the Repeater.</span></span> <span data-ttu-id="9adc8-152">Con il secondo approccio, viene restituito il numero di prodotti con informazioni su ogni categoria di `CategoriesBLL` classe s `GetCategories()` (o `GetCategoriesAndNumberOfProducts()`) (metodo), determinando in tal modo solo un unico round trip al database.</span><span class="sxs-lookup"><span data-stu-id="9adc8-152">With the second approach, the product count is returned with information about each category from the `CategoriesBLL` class s `GetCategories()` (or `GetCategoriesAndNumberOfProducts()`) method, thereby resulting in just one trip to the database.</span></span>

## <a name="determining-the-number-of-products-in-the-itemdatabound-event-handler"></a><span data-ttu-id="9adc8-153">Determinazione del numero di prodotti nel gestore eventi ItemDataBound</span><span class="sxs-lookup"><span data-stu-id="9adc8-153">Determining the Number of Products in the ItemDataBound Event Handler</span></span>

<span data-ttu-id="9adc8-154">Determinazione del numero di prodotti per ogni categoria nel Repeater s `ItemDataBound` gestore dell'evento non richiede alcuna modifica per il livello di accesso ai dati esistenti.</span><span class="sxs-lookup"><span data-stu-id="9adc8-154">Determining the number of products for each category in the Repeater s `ItemDataBound` event handler does not require any modifications to our existing Data Access Layer.</span></span> <span data-ttu-id="9adc8-155">Tutte le modifiche, è possono eseguire direttamente all'interno di `CategoriesAndProducts.aspx` pagina.</span><span class="sxs-lookup"><span data-stu-id="9adc8-155">All modifications can be made directly within the `CategoriesAndProducts.aspx` page.</span></span> <span data-ttu-id="9adc8-156">Per iniziare, aggiungere un nuovo oggetto ObjectDataSource denominato `CategoriesDataSource` tramite lo smart tag Ripetitore s.</span><span class="sxs-lookup"><span data-stu-id="9adc8-156">Start by adding a new ObjectDataSource named `CategoriesDataSource` via the Repeater s smart tag.</span></span> <span data-ttu-id="9adc8-157">A questo punto, configurare il `CategoriesDataSource` ObjectDataSource in modo che recupera i dati di `CategoriesBLL` classe s `GetCategories()` metodo.</span><span class="sxs-lookup"><span data-stu-id="9adc8-157">Next, configure the `CategoriesDataSource` ObjectDataSource so that it retrieves its data from the `CategoriesBLL` class s `GetCategories()` method.</span></span>


<span data-ttu-id="9adc8-158">[![Configurare ObjectDataSource per utilizzare la classe CategoriesBLL s GetCategories() (metodo)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image8.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="9adc8-158">[![Configure the ObjectDataSource to Use the CategoriesBLL class s GetCategories() Method](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image8.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image7.png)</span></span>

<span data-ttu-id="9adc8-159">**Figura 3**: configurare ObjectDataSource per utilizzare il `CategoriesBLL` classe s `GetCategories()` metodo ([fare clic per visualizzare l'immagine ingrandita](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="9adc8-159">**Figure 3**: Configure the ObjectDataSource to Use the `CategoriesBLL` class s `GetCategories()` Method ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image9.png))</span></span>


<span data-ttu-id="9adc8-160">Ogni elemento di `Categories` Ripetitore deve essere selezionabile e, quando si fa clic, che il `CategoryProducts` DataList per visualizzare i prodotti per la categoria selezionata.</span><span class="sxs-lookup"><span data-stu-id="9adc8-160">Each item in the `Categories` Repeater needs to be clickable and, when clicked, cause the `CategoryProducts` DataList to display those products for the selected category.</span></span> <span data-ttu-id="9adc8-161">Questo può essere eseguito apportando ogni categoria di un collegamento ipertestuale, il collegamento a questa pagina stessa (`CategoriesAndProducts.aspx`), ma passando il `CategoryID` tramite il parametro querystring, proprio come abbiamo visto nell'esercitazione precedente.</span><span class="sxs-lookup"><span data-stu-id="9adc8-161">This can be accomplished by making each category a hyperlink, linking back to this same page (`CategoriesAndProducts.aspx`), but passing the `CategoryID` through the querystring, much like we saw in the previous tutorial.</span></span> <span data-ttu-id="9adc8-162">Il vantaggio di questo approccio è che una pagina contenente i prodotti di una particolare categoria s può essere rimossa e indicizzata dal motore di ricerca.</span><span class="sxs-lookup"><span data-stu-id="9adc8-162">The advantage of this approach is that a page displaying a particular category s products can be bookmarked and indexed by a search engine.</span></span>

<span data-ttu-id="9adc8-163">In alternativa, è possibile rendere ogni categoria LinkButton, che è l'approccio da usare per questa esercitazione.</span><span class="sxs-lookup"><span data-stu-id="9adc8-163">Alternatively, we can make each category a LinkButton, which is the approach we'll use for this tutorial.</span></span> <span data-ttu-id="9adc8-164">Esegue il rendering nel browser utente s come collegamento ipertestuale sull'elemento LinkButton ma, quando si fa clic, provoca un postback; durante il postback, s DataList ObjectDataSource deve essere aggiornato per visualizzare i prodotti appartenenti alla categoria selezionata.</span><span class="sxs-lookup"><span data-stu-id="9adc8-164">The LinkButton renders in the user s browser as a hyperlink but, when clicked, induces a postback; on postback, the DataList s ObjectDataSource needs to be refreshed to display those products belonging to the selected category.</span></span> <span data-ttu-id="9adc8-165">Per questa esercitazione, utilizzando un collegamento ipertestuale preferibile rispetto all'utilizzo di LinkButton; Tuttavia, potrebbero esserci altri scenari in cui è più vantaggioso utilizzare LinkButton.</span><span class="sxs-lookup"><span data-stu-id="9adc8-165">For this tutorial, using a hyperlink makes more sense than using a LinkButton; however, there may be other scenarios where using a LinkButton is more advantageous.</span></span> <span data-ttu-id="9adc8-166">Mentre l'approccio di collegamento ipertestuale sarebbe ideale per questo esempio, consentire s alternativa all'utilizzo di LinkButton.</span><span class="sxs-lookup"><span data-stu-id="9adc8-166">While the hyperlink approach would be ideal for this example, let s instead explore using the LinkButton.</span></span> <span data-ttu-id="9adc8-167">Come si vedrà, utilizzando un LinkButton implica alcuni problemi che con un collegamento ipertestuale non risulterebbe in caso contrario.</span><span class="sxs-lookup"><span data-stu-id="9adc8-167">As we'll see, using a LinkButton introduces some challenges that would not otherwise arise with a hyperlink.</span></span> <span data-ttu-id="9adc8-168">Utilizzando un LinkButton in questa esercitazione verrà evidenziare queste sfide pertanto consentono di fornire soluzioni per gli scenari in cui si può decidere di utilizzare LinkButton anziché un collegamento ipertestuale.</span><span class="sxs-lookup"><span data-stu-id="9adc8-168">Therefore, using a LinkButton in this tutorial will highlight these challenges and help provide solutions for those scenarios where we may want to use a LinkButton instead of a hyperlink.</span></span>

> [!NOTE]
> <span data-ttu-id="9adc8-169">Vengono fornite informazioni utili per ripetere questa esercitazione utilizzando un controllo collegamento ipertestuale o `<a>` elemento anziché sull'elemento LinkButton.</span><span class="sxs-lookup"><span data-stu-id="9adc8-169">You are encouraged to repeat this tutorial using a HyperLink control or `<a>` element in lieu of the LinkButton.</span></span>


<span data-ttu-id="9adc8-170">Il markup seguente viene illustrata la sintassi dichiarativa per Ripetitore e ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="9adc8-170">The following markup shows the declarative syntax for the Repeater and the ObjectDataSource.</span></span> <span data-ttu-id="9adc8-171">Si noti che i modelli di s Ripetitore eseguire il rendering di un elenco puntato con ogni elemento come LinkButton:</span><span class="sxs-lookup"><span data-stu-id="9adc8-171">Note that the Repeater s templates render a bulleted list with each item as a LinkButton:</span></span>


[!code-aspx[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/samples/sample4.aspx)]

> [!NOTE]
> <span data-ttu-id="9adc8-172">Per questa esercitazione Ripetitore deve avere il proprio stato abilitato (si noti l'omissione del `EnableViewState="False"` dalla sintassi dichiarativa del ripetitore s).</span><span class="sxs-lookup"><span data-stu-id="9adc8-172">For this tutorial the Repeater must have its view state enabled (note the omission of the `EnableViewState="False"` from the Repeater s declarative syntax).</span></span> <span data-ttu-id="9adc8-173">Nel passaggio 3 è verrà creato un gestore eventi per il controllo Repeater s `ItemCommand` evento in cui sarà possibile l'aggiornamento è DataList s s ObjectDataSource `SelectParameters` insieme.</span><span class="sxs-lookup"><span data-stu-id="9adc8-173">In step 3 we'll be creating an event handler for the Repeater s `ItemCommand` event in which we'll be updating the DataList s ObjectDataSource s `SelectParameters` collection.</span></span> <span data-ttu-id="9adc8-174">Ripetitore s `ItemCommand`, tuttavia, ha vinto incendio t Se lo stato di visualizzazione è disabilitato.</span><span class="sxs-lookup"><span data-stu-id="9adc8-174">The Repeater s `ItemCommand`, however, won t fire if view state is disabled.</span></span> <span data-ttu-id="9adc8-175">Vedere [A Stumper di una domanda ASP.NET](http://scottonwriting.net/sowblog/posts/1263.aspx) e [la soluzione](http://scottonwriting.net/sowBlog/posts/1268.aspx) per ulteriori informazioni sui motivi per cui lo stato di visualizzazione deve essere abilitato per un ripetitore s `ItemCommand` dell'evento da generare.</span><span class="sxs-lookup"><span data-stu-id="9adc8-175">See [A Stumper of an ASP.NET Question](http://scottonwriting.net/sowblog/posts/1263.aspx) and [its solution](http://scottonwriting.net/sowBlog/posts/1268.aspx) for more information on why view state must be enabled for a Repeater s `ItemCommand` event to fire.</span></span>


<span data-ttu-id="9adc8-176">Sull'elemento LinkButton con il `ID` valore della proprietà `ViewCategory` non dispone il `Text` set di proprietà.</span><span class="sxs-lookup"><span data-stu-id="9adc8-176">The LinkButton with the `ID` property value of `ViewCategory` does not have its `Text` property set.</span></span> <span data-ttu-id="9adc8-177">Se avessimo desideriamo visualizzare il nome di categoria, si sarebbe impostato la proprietà Text in modo dichiarativo, tramite la sintassi per l'associazione dati, come illustrato di seguito:</span><span class="sxs-lookup"><span data-stu-id="9adc8-177">If we had just wanted to display the category name, we would have set the Text property declaratively, through databinding syntax, like so:</span></span>


[!code-aspx[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/samples/sample5.aspx)]

<span data-ttu-id="9adc8-178">Tuttavia, con cui si desidera mostrare sia il nome di categoria s *e* il numero di prodotti appartenenti alla categoria selezionata.</span><span class="sxs-lookup"><span data-stu-id="9adc8-178">However, we want to show both the category s name *and* the number of products belonging to that category.</span></span> <span data-ttu-id="9adc8-179">Queste informazioni possono essere recuperate da Ripetitore s `ItemDataBound` effettuando una chiamata al gestore dell'evento di `ProductBLL` classe s `GetCategoriesByProductID(categoryID)` (metodo) e determinare il numero di record restituito nella finestra di `ProductsDataTable`, come nel codice seguente di seguito viene illustrato:</span><span class="sxs-lookup"><span data-stu-id="9adc8-179">This information can be retrieved from the Repeater s `ItemDataBound` event handler by making a call to the `ProductBLL` class s `GetCategoriesByProductID(categoryID)` method and determining how many records are returned in the resulting `ProductsDataTable`, as the following code illustrates:</span></span>


[!code-csharp[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/samples/sample6.cs)]

<span data-ttu-id="9adc8-180">Iniziamo assicurando che abbiamo re l'utilizzo di un elemento di dati (uno cui `ItemType` è `Item` o `AlternatingItem`) e quindi fare riferimento il `CategoriesRow` istanza in cui è appena stato associato all'oggetto corrente `RepeaterItem`.</span><span class="sxs-lookup"><span data-stu-id="9adc8-180">We start out by ensuring that we re working with a data item (one whose `ItemType` is `Item` or `AlternatingItem`) and then reference the `CategoriesRow` instance that has just been bound to the current `RepeaterItem`.</span></span> <span data-ttu-id="9adc8-181">Successivamente, è determinare il numero di prodotti per questa categoria viene creata un'istanza del `ProductsBLL` classe, chiamata relativo `GetCategoriesByProductID(categoryID)` (metodo) e determinare il numero di record restituiti utilizzando il `Count` proprietà.</span><span class="sxs-lookup"><span data-stu-id="9adc8-181">Next, we determine the number of products for this category by creating an instance of the `ProductsBLL` class, calling its `GetCategoriesByProductID(categoryID)` method, and determining the number of records returned using the `Count` property.</span></span> <span data-ttu-id="9adc8-182">Infine, il `ViewCategory` LinkButton in ItemTemplate è riferimenti e il relativo `Text` è impostata su *CategoryName* (*NumberOfProductsInCategory*), dove  *NumberOfProductsInCategory* è formattato come un numero con zero cifre decimali.</span><span class="sxs-lookup"><span data-stu-id="9adc8-182">Finally, the `ViewCategory` LinkButton in the ItemTemplate is references and its `Text` property is set to *CategoryName* (*NumberOfProductsInCategory*), where *NumberOfProductsInCategory* is formatted as a number with zero decimal places.</span></span>

> [!NOTE]
> <span data-ttu-id="9adc8-183">In alternativa, è possibile avere aggiunto un *formattazione funzione* per la classe code-behind di pagine ASP.NET che accetta una categoria s `CategoryName` e `CategoryID` valori e restituisce il `CategoryName` concatenato con il numero di Nella categoria di prodotti (come determinato chiamando il `GetCategoriesByProductID(categoryID)` (metodo)).</span><span class="sxs-lookup"><span data-stu-id="9adc8-183">Alternatively, we could have added a *formatting function* to the ASP.NET page s code-behind class that accepts a category s `CategoryName` and `CategoryID` values and returns the `CategoryName` concatenated with the number of products in the category (as determined by calling the `GetCategoriesByProductID(categoryID)` method).</span></span> <span data-ttu-id="9adc8-184">I risultati di tale funzione formattazione può essere assegnati in modo dichiarativo a s LinkButton eliminando la necessità di proprietà di testo il `ItemDataBound` gestore dell'evento.</span><span class="sxs-lookup"><span data-stu-id="9adc8-184">The results of such a formatting function could be declaratively assigned to the LinkButton s Text property replacing the need for the `ItemDataBound` event handler.</span></span> <span data-ttu-id="9adc8-185">Fare riferimento al [TemplateFields utilizzo nel controllo GridView](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md) o [formattazione di DataList e basato su dati Ripetitore](../displaying-data-with-the-datalist-and-repeater/formatting-the-datalist-and-repeater-based-upon-data-cs.md) esercitazioni per ulteriori informazioni sull'utilizzo delle funzioni di formattazione.</span><span class="sxs-lookup"><span data-stu-id="9adc8-185">Refer to the [Using TemplateFields in the GridView Control](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md) or [Formatting the DataList and Repeater Based Upon Data](../displaying-data-with-the-datalist-and-repeater/formatting-the-datalist-and-repeater-based-upon-data-cs.md) tutorials for more information on using formatting functions.</span></span>


<span data-ttu-id="9adc8-186">Dopo aver aggiunto il gestore eventi, è opportuno testare la pagina tramite un browser.</span><span class="sxs-lookup"><span data-stu-id="9adc8-186">After adding this event handler, take a moment to test the page through a browser.</span></span> <span data-ttu-id="9adc8-187">Si noti come ogni categoria è elencato in un elenco puntato, visualizzare il nome della categoria s e il numero di prodotti associati alla categoria (vedere la figura 4).</span><span class="sxs-lookup"><span data-stu-id="9adc8-187">Note how each category is listed in a bulleted list, displaying the category s name and the number of products associated with the category (see Figure 4).</span></span>


<span data-ttu-id="9adc8-188">[![Ogni nome di categoria e numero di prodotti vengono visualizzati](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image11.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="9adc8-188">[![Each Category s Name and Number of Products are Displayed](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image11.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image10.png)</span></span>

<span data-ttu-id="9adc8-189">**Figura 4**: numero di prodotti e ogni categoria s nome vengono visualizzati ([fare clic per visualizzare l'immagine ingrandita](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="9adc8-189">**Figure 4**: Each Category s Name and Number of Products are Displayed ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image12.png))</span></span>


## <a name="updating-thecategoriesdatatableandcategoriestableadapterto-include-the-number-of-products-for-each-category"></a><span data-ttu-id="9adc8-190">L'aggiornamento di`CategoriesDataTable`e`CategoriesTableAdapter`per includere il numero di prodotti per ogni categoria</span><span class="sxs-lookup"><span data-stu-id="9adc8-190">Updating the`CategoriesDataTable`and`CategoriesTableAdapter`to Include the Number of Products for Each Category</span></span>

<span data-ttu-id="9adc8-191">Invece di determinare il numero di prodotti per ogni categoria come s associato al controllo Repeater, è possibile semplificare questo processo regolando il `CategoriesDataTable` e `CategoriesTableAdapter` nel livello di accesso ai dati da includere queste informazioni in modo nativo.</span><span class="sxs-lookup"><span data-stu-id="9adc8-191">Rather than determining the number of products for each category as it s bound to the Repeater, we can streamline this process by adjusting the `CategoriesDataTable` and `CategoriesTableAdapter` in the Data Access Layer to include this information natively.</span></span> <span data-ttu-id="9adc8-192">A tale scopo, è necessario aggiungere una nuova colonna a `CategoriesDataTable` per contenere il numero di prodotti associati.</span><span class="sxs-lookup"><span data-stu-id="9adc8-192">To achieve this, we must add a new column to `CategoriesDataTable` to hold the number of associated products.</span></span> <span data-ttu-id="9adc8-193">Per aggiungere una nuova colonna a un oggetto DataTable, aprire il DataSet tipizzato (`App_Code\DAL\Northwind.xsd`), fare clic su oggetto DataTable da modificare e scegliere Aggiungi / colonna.</span><span class="sxs-lookup"><span data-stu-id="9adc8-193">To add a new column to a DataTable, open the Typed DataSet (`App_Code\DAL\Northwind.xsd`), right-click on the DataTable to modify, and choose Add / Column.</span></span> <span data-ttu-id="9adc8-194">Aggiungere una nuova colonna per il `CategoriesDataTable` (vedere Figura 5).</span><span class="sxs-lookup"><span data-stu-id="9adc8-194">Add a new column to the `CategoriesDataTable` (see Figure 5).</span></span>


<span data-ttu-id="9adc8-195">[![Aggiungere una nuova colonna per il CategoriesDataSource](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image14.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="9adc8-195">[![Add a New Column to the CategoriesDataSource](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image14.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image13.png)</span></span>

<span data-ttu-id="9adc8-196">**Figura 5**: aggiungere una nuova colonna per il `CategoriesDataSource` ([fare clic per visualizzare l'immagine ingrandita](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="9adc8-196">**Figure 5**: Add a New Column to the `CategoriesDataSource` ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image15.png))</span></span>


<span data-ttu-id="9adc8-197">Verrà aggiunta una nuova colonna denominata `Column1`, che è possibile modificare semplicemente digitando un nome diverso.</span><span class="sxs-lookup"><span data-stu-id="9adc8-197">This will add a new column named `Column1`, which you can change by simply typing in a different name.</span></span> <span data-ttu-id="9adc8-198">La nuova colonna rinominata `NumberOfProducts`.</span><span class="sxs-lookup"><span data-stu-id="9adc8-198">Rename this new column to `NumberOfProducts`.</span></span> <span data-ttu-id="9adc8-199">Successivamente, è necessario configurare le proprietà di questa colonna s.</span><span class="sxs-lookup"><span data-stu-id="9adc8-199">Next, we need to configure this column s properties.</span></span> <span data-ttu-id="9adc8-200">Fare clic su nuova colonna e passare alla finestra Proprietà.</span><span class="sxs-lookup"><span data-stu-id="9adc8-200">Click on the new column and go to the Properties window.</span></span> <span data-ttu-id="9adc8-201">Modificare la colonna s `DataType` proprietà `System.String` a `System.Int32` e impostare il `ReadOnly` proprietà `True`, come illustrato nella figura 6.</span><span class="sxs-lookup"><span data-stu-id="9adc8-201">Change the column s `DataType` property from `System.String` to `System.Int32` and set the `ReadOnly` property to `True`, as shown in Figure 6.</span></span>


![Impostare le proprietà di sola lettura della nuova colonna e il tipo di dati](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image16.png)

<span data-ttu-id="9adc8-203">**Figura 6**: impostare il `DataType` e `ReadOnly` le proprietà della nuova colonna</span><span class="sxs-lookup"><span data-stu-id="9adc8-203">**Figure 6**: Set the `DataType` and `ReadOnly` Properties of the New Column</span></span>


<span data-ttu-id="9adc8-204">Mentre il `CategoriesDataTable` include ora un `NumberOfProducts` colonna, il relativo valore non è impostato da una delle query s TableAdapter corrispondente.</span><span class="sxs-lookup"><span data-stu-id="9adc8-204">While the `CategoriesDataTable` now has a `NumberOfProducts` column, its value is not set by any of the corresponding TableAdapter s queries.</span></span> <span data-ttu-id="9adc8-205">È possibile aggiornare il `GetCategories()` per restituire queste informazioni se si desiderano che tali informazioni restituito ogni volta che viene recuperate le informazioni di categoria.</span><span class="sxs-lookup"><span data-stu-id="9adc8-205">We can update the `GetCategories()` method to return this information if we want such information returned every time category information is retrieved.</span></span> <span data-ttu-id="9adc8-206">Se, tuttavia, è necessario solo acquisire il numero di prodotti associati per le categorie in rari casi, ad esempio solo per questa esercitazione, quindi, è possibile mantenere `GetCategories()` come-è e creare un nuovo metodo che restituisce queste informazioni.</span><span class="sxs-lookup"><span data-stu-id="9adc8-206">If, however, we only need to grab the number of associated products for the categories in rare instances (such as just for this tutorial), then we can leave `GetCategories()` as-is and create a new method that returns this information.</span></span> <span data-ttu-id="9adc8-207">S consentono di utilizzare questa procedura, la creazione di un nuovo metodo denominato `GetCategoriesAndNumberOfProducts()`.</span><span class="sxs-lookup"><span data-stu-id="9adc8-207">Let s use this latter approach, creating a new method named `GetCategoriesAndNumberOfProducts()`.</span></span>

<span data-ttu-id="9adc8-208">Per aggiungere questo nuovo `GetCategoriesAndNumberOfProducts()` destro del mouse sul metodo di `CategoriesTableAdapter` e scegliere Nuova Query.</span><span class="sxs-lookup"><span data-stu-id="9adc8-208">To add this new `GetCategoriesAndNumberOfProducts()` method, right-click on the `CategoriesTableAdapter` and choose New Query.</span></span> <span data-ttu-id="9adc8-209">In questo modo up TableAdapter Query configurazione guidata, che si va utilizzata più volte nelle esercitazioni precedenti.</span><span class="sxs-lookup"><span data-stu-id="9adc8-209">This brings up the TableAdapter Query Configuration Wizard, which we ve used numerous times in previous tutorials.</span></span> <span data-ttu-id="9adc8-210">Per questo metodo, avviare la procedura guidata, indicando che la query utilizza un'istruzione SQL ad hoc che restituisce righe.</span><span class="sxs-lookup"><span data-stu-id="9adc8-210">For this method, start the wizard by indicating that the query uses an ad-hoc SQL statement that returns rows.</span></span>


<span data-ttu-id="9adc8-211">[![Creare il metodo usando un'istruzione SQL Ad Hoc](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image18.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="9adc8-211">[![Create the Method Using an Ad-Hoc SQL Statement](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image18.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image17.png)</span></span>

<span data-ttu-id="9adc8-212">**Figura 7**: creare il metodo usando un'istruzione SQL Ad Hoc ([fare clic per visualizzare l'immagine ingrandita](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image19.png))</span><span class="sxs-lookup"><span data-stu-id="9adc8-212">**Figure 7**: Create the Method Using an Ad-Hoc SQL Statement ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image19.png))</span></span>


<span data-ttu-id="9adc8-213">[![L'istruzione SQL restituisce righe](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image21.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image20.png)</span><span class="sxs-lookup"><span data-stu-id="9adc8-213">[![The SQL Statement Returns Rows](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image21.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image20.png)</span></span>

<span data-ttu-id="9adc8-214">**Figura 8**: l'istruzione di SQL restituisce righe ([fare clic per visualizzare l'immagine ingrandita](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image22.png))</span><span class="sxs-lookup"><span data-stu-id="9adc8-214">**Figure 8**: The SQL Statement Returns Rows ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image22.png))</span></span>


<span data-ttu-id="9adc8-215">Schermata di procedura guidata richiede us per la query da utilizzare.</span><span class="sxs-lookup"><span data-stu-id="9adc8-215">The next wizard screen prompts us for the query to use.</span></span> <span data-ttu-id="9adc8-216">Per ogni categoria s `CategoryID`, `CategoryName`, e `Description` campi, insieme al numero di prodotti associati alla categoria, utilizzano la seguente `SELECT` istruzione:</span><span class="sxs-lookup"><span data-stu-id="9adc8-216">To return each category s `CategoryID`, `CategoryName`, and `Description` fields, along with the number of products associated with the category, use the following `SELECT` statement:</span></span>


[!code-sql[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/samples/sample7.sql)]


<span data-ttu-id="9adc8-217">[![Specificare la Query da utilizzare](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image24.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="9adc8-217">[![Specify the Query to Use](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image24.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image23.png)</span></span>

<span data-ttu-id="9adc8-218">**Figura 9**: specificare la Query da utilizzare ([fare clic per visualizzare l'immagine ingrandita](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image25.png))</span><span class="sxs-lookup"><span data-stu-id="9adc8-218">**Figure 9**: Specify the Query to Use ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image25.png))</span></span>


<span data-ttu-id="9adc8-219">Si noti che la sottoquery che calcola il numero di prodotti associati alla categoria è associato l'alias `NumberOfProducts`.</span><span class="sxs-lookup"><span data-stu-id="9adc8-219">Note that the subquery that computes the number of products associated with the category is aliased as `NumberOfProducts`.</span></span> <span data-ttu-id="9adc8-220">La corrispondenza dei nomi, il valore restituito da questa sottoquery può essere associato il `CategoriesDataTable` s `NumberOfProducts` colonna.</span><span class="sxs-lookup"><span data-stu-id="9adc8-220">This naming match causes the value returned by this subquery to be associated with the `CategoriesDataTable` s `NumberOfProducts` column.</span></span>

<span data-ttu-id="9adc8-221">Dopo aver immesso la query, l'ultimo passaggio consiste nello scegliere il nome per il nuovo metodo.</span><span class="sxs-lookup"><span data-stu-id="9adc8-221">After entering this query, the last step is to choose the name for the new method.</span></span> <span data-ttu-id="9adc8-222">Utilizzare `FillWithNumberOfProducts` e `GetCategoriesAndNumberOfProducts` per il riempimento del DataTable e restituire un oggetto DataTable modelli, rispettivamente.</span><span class="sxs-lookup"><span data-stu-id="9adc8-222">Use `FillWithNumberOfProducts` and `GetCategoriesAndNumberOfProducts` for the Fill a DataTable and Return a DataTable patterns, respectively.</span></span>


<span data-ttu-id="9adc8-223">[![Nome di metodi FillWithNumberOfProducts nuovo TableAdapter s e GetCategoriesAndNumberOfProducts](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image27.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image26.png)</span><span class="sxs-lookup"><span data-stu-id="9adc8-223">[![Name the New TableAdapter s Methods FillWithNumberOfProducts and GetCategoriesAndNumberOfProducts](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image27.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image26.png)</span></span>

<span data-ttu-id="9adc8-224">**Figura 10**: nome i TableAdapter nuovi metodi `FillWithNumberOfProducts` e `GetCategoriesAndNumberOfProducts` ([fare clic per visualizzare l'immagine ingrandita](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image28.png))</span><span class="sxs-lookup"><span data-stu-id="9adc8-224">**Figure 10**: Name the New TableAdapter s Methods `FillWithNumberOfProducts` and `GetCategoriesAndNumberOfProducts` ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image28.png))</span></span>


<span data-ttu-id="9adc8-225">A questo punto il livello di accesso ai dati è stato esteso per includere il numero di prodotti per categoria.</span><span class="sxs-lookup"><span data-stu-id="9adc8-225">At this point the Data Access Layer has been extended to include the number of products per category.</span></span> <span data-ttu-id="9adc8-226">È necessario aggiungere un corrispondente poiché tutto il livello di presentazione indirizza tutte le chiamate alla funzione tramite un livello di logica di Business separato DAL `GetCategoriesAndNumberOfProducts` metodo per la `CategoriesBLL` classe:</span><span class="sxs-lookup"><span data-stu-id="9adc8-226">Since all our presentation layer routes all calls to the DAL through a separate Business Logic Layer we need to add a corresponding `GetCategoriesAndNumberOfProducts` method to the `CategoriesBLL` class:</span></span>


[!code-csharp[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/samples/sample8.cs)]

<span data-ttu-id="9adc8-227">Con DAL e BLL completa, è re pronti per l'associazione dati per il `Categories` Ripetitore in `CategoriesAndProducts.aspx`!</span><span class="sxs-lookup"><span data-stu-id="9adc8-227">With the DAL and BLL complete, we re ready to bind this data to the `Categories` Repeater in `CategoriesAndProducts.aspx`!</span></span> <span data-ttu-id="9adc8-228">Se è già creato già ObjectDataSource per Ripetitore da di determinare il numero di prodotti nel `ItemDataBound` sezione del gestore eventi, eliminare questo ObjectDataSource e rimuovere Ripetitore s `DataSourceID` proprietà impostazione; liberare dai cavi anche il Ripetitore s `ItemDataBound` evento dal gestore dell'evento rimuovendo il `Handles Categories.OnItemDataBound` sintassi nella classe code-behind ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="9adc8-228">If you ve already created an ObjectDataSource for the Repeater from the Determining the Number of Products in the `ItemDataBound` Event Handler section, delete this ObjectDataSource and remove the Repeater s `DataSourceID` property setting; also unwire the Repeater s `ItemDataBound` event from the event handler by removing the `Handles Categories.OnItemDataBound` syntax in the ASP.NET code-behind class.</span></span>

<span data-ttu-id="9adc8-229">Con il controllo Repeater nuovamente nello stato originale, aggiungere un nuovo oggetto ObjectDataSource denominato `CategoriesDataSource` tramite lo smart tag Ripetitore s.</span><span class="sxs-lookup"><span data-stu-id="9adc8-229">With the Repeater back in its original state, add a new ObjectDataSource named `CategoriesDataSource` via the Repeater s smart tag.</span></span> <span data-ttu-id="9adc8-230">Configurare ObjectDataSource per utilizzare il `CategoriesBLL` (classe), ma anziché utilizzare il `GetCategories()` (metodo), hanno utilizzi `GetCategoriesAndNumberOfProducts()` invece (vedere Figura 11).</span><span class="sxs-lookup"><span data-stu-id="9adc8-230">Configure the ObjectDataSource to use the `CategoriesBLL` class, but instead of having it use the `GetCategories()` method, have it use `GetCategoriesAndNumberOfProducts()` instead (see Figure 11).</span></span>


<span data-ttu-id="9adc8-231">[![Configurare ObjectDataSource per utilizzare il metodo GetCategoriesAndNumberOfProducts](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image30.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="9adc8-231">[![Configure the ObjectDataSource to Use the GetCategoriesAndNumberOfProducts Method](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image30.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image29.png)</span></span>

<span data-ttu-id="9adc8-232">**Figura 11**: configurare ObjectDataSource per usare il `GetCategoriesAndNumberOfProducts` metodo ([fare clic per visualizzare l'immagine ingrandita](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image31.png))</span><span class="sxs-lookup"><span data-stu-id="9adc8-232">**Figure 11**: Configure the ObjectDataSource to Use the `GetCategoriesAndNumberOfProducts` Method ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image31.png))</span></span>


<span data-ttu-id="9adc8-233">Aggiornare quindi il `ItemTemplate` in modo che s LinkButton `Text` proprietà viene assegnata in modo dichiarativo utilizzando la sintassi di associazione dati e include sia il `CategoryName` e `NumberOfProducts` campi dati.</span><span class="sxs-lookup"><span data-stu-id="9adc8-233">Next, update the `ItemTemplate` so that the LinkButton s `Text` property is declaratively assigned using databinding syntax and includes both the `CategoryName` and `NumberOfProducts` data fields.</span></span> <span data-ttu-id="9adc8-234">Il markup dichiarativo completo per il controllo Repeater e `CategoriesDataSource` ObjectDataSource seguenti:</span><span class="sxs-lookup"><span data-stu-id="9adc8-234">The complete declarative markup for the Repeater and the `CategoriesDataSource` ObjectDataSource follow:</span></span>


[!code-aspx[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/samples/sample9.aspx)]

<span data-ttu-id="9adc8-235">L'output sottoposto a rendering mediante l'aggiornamento per includere un `NumberOfProducts` colonna equivale all'utilizzo di `ItemDataBound` approccio gestore dell'evento (vedere la figura 4 per visualizzare una schermata cattura del ripetitore con i nomi di categoria e un numero di prodotti).</span><span class="sxs-lookup"><span data-stu-id="9adc8-235">The output rendered by updating the DAL to include a `NumberOfProducts` column is the same as using the `ItemDataBound` event handler approach (refer back to Figure 4 to see a screen shot of the Repeater showing the category names and number of products).</span></span>

## <a name="step-3-displaying-the-selected-category-s-products"></a><span data-ttu-id="9adc8-236">Passaggio 3: Visualizzare i prodotti s categoria selezionata</span><span class="sxs-lookup"><span data-stu-id="9adc8-236">Step 3: Displaying the Selected Category s Products</span></span>

<span data-ttu-id="9adc8-237">A questo punto si dispone di `Categories` Ripetitore la visualizzazione dell'elenco di categorie e il numero di prodotti in ogni categoria.</span><span class="sxs-lookup"><span data-stu-id="9adc8-237">At this point we have the `Categories` Repeater displaying the list of categories along with the number of products in each category.</span></span> <span data-ttu-id="9adc8-238">Ripetitore utilizza LinkButton per ogni categoria che, quando si fa clic, comporta un postback, in corrispondenza del quale punto è necessario visualizzare i prodotti per la categoria selezionata nel `CategoryProducts` DataList.</span><span class="sxs-lookup"><span data-stu-id="9adc8-238">The Repeater uses a LinkButton for each category that, when clicked, causes a postback, at which point we need to display those products for the selected category in the `CategoryProducts` DataList.</span></span>

<span data-ttu-id="9adc8-239">Una sfida che ci viene illustrato come visualizzare solo i prodotti per la categoria selezionata in DataList.</span><span class="sxs-lookup"><span data-stu-id="9adc8-239">One challenge facing us is how to have the DataList display just those products for the selected category.</span></span> <span data-ttu-id="9adc8-240">Nel [Master/dettaglio con Master GridView selezionabile DetailsView dettagli](../masterdetail/master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs.md) esercitazione è stato illustrato come compilare un controllo GridView le cui righe potrebbe essere selezionata, con la riga selezionata s dettagli visualizzati in un controllo DetailsView nella stessa pagina.</span><span class="sxs-lookup"><span data-stu-id="9adc8-240">In the [Master/Detail Using a Selectable Master GridView with a Details DetailsView](../masterdetail/master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs.md) tutorial we saw how to build a GridView whose rows could be selected, with the selected row s details being displayed in a DetailsView on the same page.</span></span> <span data-ttu-id="9adc8-241">S GridView ObjectDataSource restituite informazioni su tutti i prodotti usando il `ProductsBLL` s `GetProducts()` il metodo s DetailsView ObjectDataSource recupera informazioni sull'utilizzo di un prodotto selezionato il `GetProductsByProductID(productID)` metodo.</span><span class="sxs-lookup"><span data-stu-id="9adc8-241">The GridView s ObjectDataSource returned information about all products using the `ProductsBLL` s `GetProducts()` method while the DetailsView s ObjectDataSource retrieved information about the selected product using the `GetProductsByProductID(productID)` method.</span></span> <span data-ttu-id="9adc8-242">Il *`productID`* valore del parametro è stato specificato in modo dichiarativo mediante l'associazione con il valore di GridView s `SelectedValue` proprietà.</span><span class="sxs-lookup"><span data-stu-id="9adc8-242">The *`productID`* parameter value was provided declaratively by associating it with the value of the GridView s `SelectedValue` property.</span></span> <span data-ttu-id="9adc8-243">Purtroppo, Ripetitore non dispone di un `SelectedValue` proprietà e non può essere utilizzato come origine parametro.</span><span class="sxs-lookup"><span data-stu-id="9adc8-243">Unfortunately, the Repeater does not have a `SelectedValue` property and cannot serve as a parameter source.</span></span>

> [!NOTE]
> <span data-ttu-id="9adc8-244">Questo è uno di tali sfide che vengono visualizzati quando si utilizza il LinkButton in un controllo Repeater.</span><span class="sxs-lookup"><span data-stu-id="9adc8-244">This is one of those challenges that appear when using the LinkButton in a Repeater.</span></span> <span data-ttu-id="9adc8-245">Se avessimo è utilizzato un collegamento ipertestuale per passare il `CategoryID` tramite il parametro querystring è invece possibile usare tale campo QueryString come origine per il valore del parametro s.</span><span class="sxs-lookup"><span data-stu-id="9adc8-245">Had we used a hyperlink to pass in the `CategoryID` through the querystring instead, we could use that QueryString field as the source for the parameter s value.</span></span>


<span data-ttu-id="9adc8-246">Prima di un problema è causato dalla mancanza di un `SelectedValue` proprietà per il controllo Repeater, tuttavia, consentono s prima di associare DataList ObjectDataSource e specificare il relativo `ItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="9adc8-246">Before we worry about the lack of a `SelectedValue` property for the Repeater, though, let s first bind the DataList to an ObjectDataSource and specify its `ItemTemplate`.</span></span>

<span data-ttu-id="9adc8-247">Smart tag DataList s, scegliere di aggiungere un nuovo oggetto ObjectDataSource denominato `CategoryProductsDataSource` e configurarlo per utilizzare il `ProductsBLL` classe s `GetProductsByCategoryID(categoryID)` metodo.</span><span class="sxs-lookup"><span data-stu-id="9adc8-247">From the DataList s smart tag, opt to add a new ObjectDataSource named `CategoryProductsDataSource` and configure it to use the `ProductsBLL` class s `GetProductsByCategoryID(categoryID)` method.</span></span> <span data-ttu-id="9adc8-248">Poiché in questa esercitazione DataList offre un'interfaccia di sola lettura, è possibile impostare gli elenchi a discesa nell'istruzione INSERT, UPDATE ed eliminare le tabulazioni su (nessuno).</span><span class="sxs-lookup"><span data-stu-id="9adc8-248">Since the DataList in this tutorial offers a read-only interface, feel free to set the drop-down lists in the INSERT, UPDATE, and DELETE tabs to (None).</span></span>


<span data-ttu-id="9adc8-249">[![Configurare ObjectDataSource per utilizzare ProductsBLL s GetProductsByCategoryID(categoryID) metodo della classe](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image33.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image32.png)</span><span class="sxs-lookup"><span data-stu-id="9adc8-249">[![Configure the ObjectDataSource to Use ProductsBLL Class s GetProductsByCategoryID(categoryID) Method](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image33.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image32.png)</span></span>

<span data-ttu-id="9adc8-250">**Figura 12**: configurare ObjectDataSource per uso `ProductsBLL` classe s `GetProductsByCategoryID(categoryID)` metodo ([fare clic per visualizzare l'immagine ingrandita](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image34.png))</span><span class="sxs-lookup"><span data-stu-id="9adc8-250">**Figure 12**: Configure the ObjectDataSource to Use `ProductsBLL` Class s `GetProductsByCategoryID(categoryID)` Method ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image34.png))</span></span>


<span data-ttu-id="9adc8-251">Poiché il `GetProductsByCategoryID(categoryID)` metodo prevede un parametro di input (*`categoryID`*), la configurazione guidata origine dati consente di specificare l'origine di s parametri.</span><span class="sxs-lookup"><span data-stu-id="9adc8-251">Since the `GetProductsByCategoryID(categoryID)` method expects an input parameter (*`categoryID`*), the Configure Data Source wizard allows us to specify the parameter s source.</span></span> <span data-ttu-id="9adc8-252">Le categorie erano stato elencate in un controllo GridView o DataList, d impostiamo l'elenco di riepilogo a discesa Origine parametro al controllo e il ControlID per il `ID` dei dati di controllo Web.</span><span class="sxs-lookup"><span data-stu-id="9adc8-252">Had the categories been listed in a GridView or a DataList, we d set the Parameter source drop-down list to Control and the ControlID to the `ID` of the data Web control.</span></span> <span data-ttu-id="9adc8-253">Tuttavia, poiché non è stato specificato il Ripetitore un `SelectedValue` proprietà non può essere utilizzato come un'origine del parametro.</span><span class="sxs-lookup"><span data-stu-id="9adc8-253">However, since the Repeater lacks a `SelectedValue` property it cannot be used as a parameter source.</span></span> <span data-ttu-id="9adc8-254">Se si seleziona, si noterà che l'elenco di riepilogo a discesa ControlID contiene solo un controllo `ID``CategoryProducts`, `ID` del controllo DataList.</span><span class="sxs-lookup"><span data-stu-id="9adc8-254">If you check, you'll find that the ControlID drop-down list only contains one control `ID``CategoryProducts`, the `ID` of the DataList.</span></span>

<span data-ttu-id="9adc8-255">Per il momento, impostare l'elenco di riepilogo a discesa Origine parametro su Nessuno.</span><span class="sxs-lookup"><span data-stu-id="9adc8-255">For now, set the Parameter source drop-down list to None.</span></span> <span data-ttu-id="9adc8-256">Al termine saremo assegnazione livello di codice il valore di questo parametro, quando una categoria a cui si fa clic su LinkButton nel Repeater.</span><span class="sxs-lookup"><span data-stu-id="9adc8-256">We'll end up programmatically assigning this parameter value when a category LinkButton is clicked in the Repeater.</span></span>


<span data-ttu-id="9adc8-257">[![Eseguire operazioni non specifica un'origine di parametro per il parametro categoryID](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image36.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="9adc8-257">[![Do Not Specify a Parameter Source for the categoryID Parameter](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image36.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image35.png)</span></span>

<span data-ttu-id="9adc8-258">**Figura 13**: non si specifica un parametro di origine per il *`categoryID`* parametro ([fare clic per visualizzare l'immagine ingrandita](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image37.png))</span><span class="sxs-lookup"><span data-stu-id="9adc8-258">**Figure 13**: Do Not Specify a Parameter Source for the *`categoryID`* Parameter ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image37.png))</span></span>


<span data-ttu-id="9adc8-259">Dopo aver completato la configurazione guidata origine dati, Visual Studio genera automaticamente DataList s `ItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="9adc8-259">After completing the Configure Data Source wizard, Visual Studio auto-generates the DataList s `ItemTemplate`.</span></span> <span data-ttu-id="9adc8-260">Sostituire il valore predefinito `ItemTemplate` con il modello utilizzato nell'esercitazione precedente; inoltre, impostare DataList s `RepeatColumns` proprietà su 2.</span><span class="sxs-lookup"><span data-stu-id="9adc8-260">Replace this default `ItemTemplate` with the template we used in the preceding tutorial; also, set the DataList s `RepeatColumns` property to 2.</span></span> <span data-ttu-id="9adc8-261">Dopo aver apportato queste modifiche dichiarativo del controllo DataList e ObjectDataSource associati dovrebbe essere simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="9adc8-261">After making these changes the declarative markup for your DataList and its associated ObjectDataSource should look like the following:</span></span>


[!code-aspx[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/samples/sample10.aspx)]

<span data-ttu-id="9adc8-262">Attualmente, il `CategoryProductsDataSource` ObjectDataSource s *`categoryID`* parametro non viene impostato in modo prodotti non vengono visualizzati quando si visualizza la pagina.</span><span class="sxs-lookup"><span data-stu-id="9adc8-262">Currently, the `CategoryProductsDataSource` ObjectDataSource s *`categoryID`* parameter is never set, so no products are displayed when viewing the page.</span></span> <span data-ttu-id="9adc8-263">È necessario è impostato il valore del parametro in base il `CategoryID` della categoria selezionata nel Repeater.</span><span class="sxs-lookup"><span data-stu-id="9adc8-263">What we need to do is have this parameter value set based on the `CategoryID` of the clicked category in the Repeater.</span></span> <span data-ttu-id="9adc8-264">Ciò introduce due sfide: in primo luogo, come Microsoft determina quando LinkButton nel Repeater s `ItemTemplate` è stato fatto clic; e il secondo, come è possibile determinare il `CategoryID` della categoria corrispondente il cui LinkButton selezionato?</span><span class="sxs-lookup"><span data-stu-id="9adc8-264">This introduces two challenges: first, how do we determine when a LinkButton in the Repeater s `ItemTemplate` has been clicked; and second, how can we determine the `CategoryID` of the corresponding category whose LinkButton was clicked?</span></span>

<span data-ttu-id="9adc8-265">Sull'elemento LinkButton Analogamente ai controlli Button e ImageButton ha un `Click` evento e un [ `Command` evento](https://msdn.microsoft.com/library/system.web.ui.webcontrols.linkbutton.command.aspx).</span><span class="sxs-lookup"><span data-stu-id="9adc8-265">The LinkButton like the Button and ImageButton controls has a `Click` event and a [`Command` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.linkbutton.command.aspx).</span></span> <span data-ttu-id="9adc8-266">Il `Click` evento è progettato per semplicemente si noti che è stato fatto clic con il LinkButton.</span><span class="sxs-lookup"><span data-stu-id="9adc8-266">The `Click` event is designed to simply note that the LinkButton has been clicked.</span></span> <span data-ttu-id="9adc8-267">In alcuni casi, tuttavia, oltre a notare che è stato fatto clic con il LinkButton è anche necessario passare alcune informazioni aggiuntive per il gestore dell'evento.</span><span class="sxs-lookup"><span data-stu-id="9adc8-267">At times, however, in addition to noting that the LinkButton has been clicked we also need to pass some extra information to the event handler.</span></span> <span data-ttu-id="9adc8-268">In questo caso, s LinkButton [ `CommandName` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.linkbutton.commandname.aspx) e [ `CommandArgument` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.linkbutton.commandargument.aspx) proprietà possono essere assegnate a queste informazioni aggiuntive.</span><span class="sxs-lookup"><span data-stu-id="9adc8-268">If this is the case, the LinkButton s [`CommandName`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.linkbutton.commandname.aspx) and [`CommandArgument`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.linkbutton.commandargument.aspx) properties can be assigned this extra information.</span></span> <span data-ttu-id="9adc8-269">Quindi, quando si fa clic sull'elemento LinkButton, relativo `Command` viene generato l'evento (invece che relativo `Click` eventi), il gestore dell'evento verrà passato i valori del `CommandName` e `CommandArgument` proprietà.</span><span class="sxs-lookup"><span data-stu-id="9adc8-269">Then, when the LinkButton is clicked, its `Command` event fires (instead of its `Click` event) and the event handler is passed the values of the `CommandName` and `CommandArgument` properties.</span></span>

<span data-ttu-id="9adc8-270">Quando un `Command` evento viene generato dall'interno di un modello nel Repeater, s Ripetitore [ `ItemCommand` evento](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeater.itemcommand.aspx) viene generato e viene passato il `CommandName` e `CommandArgument` i valori del controllo LinkButton selezionato (o un pulsante o ImageButton).</span><span class="sxs-lookup"><span data-stu-id="9adc8-270">When a `Command` event is raised from within a template in the Repeater, the Repeater s [`ItemCommand` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeater.itemcommand.aspx) fires and is passed the `CommandName` and `CommandArgument` values of the clicked LinkButton (or Button or ImageButton).</span></span> <span data-ttu-id="9adc8-271">Pertanto, per determinare quando è stata scelta una categoria LinkButton nel Repeater, è necessario eseguire le operazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="9adc8-271">Therefore, to determine when a category LinkButton in the Repeater has been clicked, we need to do the following:</span></span>

1. <span data-ttu-id="9adc8-272">Impostare il `CommandName` proprietà del controllo LinkButton nel Repeater s `ItemTemplate` su un valore (è già stato utilizzato ListProducts).</span><span class="sxs-lookup"><span data-stu-id="9adc8-272">Set the `CommandName` property of the LinkButton in the Repeater s `ItemTemplate` to some value (I ve used ListProducts ).</span></span> <span data-ttu-id="9adc8-273">Impostando questo `CommandName` valore s LinkButton `Command` evento viene generato quando si fa clic sull'elemento LinkButton.</span><span class="sxs-lookup"><span data-stu-id="9adc8-273">By setting this `CommandName` value, the LinkButton s `Command` event fires when the LinkButton is clicked.</span></span>
2. <span data-ttu-id="9adc8-274">Impostare il s LinkButton `CommandArgument` sul valore dell'elemento corrente s `CategoryID`.</span><span class="sxs-lookup"><span data-stu-id="9adc8-274">Set the LinkButton s `CommandArgument` property to the value of the current item s `CategoryID`.</span></span>
3. <span data-ttu-id="9adc8-275">Creare un gestore eventi per il controllo Repeater s `ItemCommand` evento.</span><span class="sxs-lookup"><span data-stu-id="9adc8-275">Create an event handler for the Repeater s `ItemCommand` event.</span></span> <span data-ttu-id="9adc8-276">Nel set di eventi gestore, la `CategoryProductsDataSource` ObjectDataSource s `CategoryID` parametro il valore passato `CommandArgument`.</span><span class="sxs-lookup"><span data-stu-id="9adc8-276">In the event handler, set the `CategoryProductsDataSource` ObjectDataSource s `CategoryID` parameter to the value of the passed-in `CommandArgument`.</span></span>

<span data-ttu-id="9adc8-277">Le operazioni seguenti `ItemTemplate` markup per il controllo Repeater categorie implementa i passaggi 1 e 2.</span><span class="sxs-lookup"><span data-stu-id="9adc8-277">The following `ItemTemplate` markup for the Categories Repeater implements steps 1 and 2.</span></span> <span data-ttu-id="9adc8-278">Si noti come `CommandArgument` valore viene assegnato l'elemento dati s `CategoryID` utilizzando la sintassi di associazione dati:</span><span class="sxs-lookup"><span data-stu-id="9adc8-278">Note how the `CommandArgument` value is assigned the data item s `CategoryID` using databinding syntax:</span></span>


[!code-aspx[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/samples/sample11.aspx)]

<span data-ttu-id="9adc8-279">Ogni volta che la creazione di un `ItemCommand` gestore eventi, è consigliabile verificare sempre in ingresso `CommandName` valore perché *qualsiasi* `Command` evento generato da *qualsiasi* Button, LinkButton, o ImageButton all'interno di Repeater causerà la `ItemCommand` dell'evento da generare.</span><span class="sxs-lookup"><span data-stu-id="9adc8-279">Whenever creating an `ItemCommand` event handler it is prudent to always first check the incoming `CommandName` value because *any* `Command` event raised by *any* Button, LinkButton, or ImageButton within the Repeater will cause the `ItemCommand` event to fire.</span></span> <span data-ttu-id="9adc8-280">Anche se si dispone solo uno di tali LinkButton ora, in futuro è (o un altro sviluppatore del team) potrebbe essere aggiungere ulteriore pulsante controlli Web Repeater che, quando si fa clic, genera lo stesso `ItemCommand` gestore dell'evento.</span><span class="sxs-lookup"><span data-stu-id="9adc8-280">While we currently only have one such LinkButton now, in the future we (or another developer on our team) might add additional button Web controls to the Repeater that, when clicked, raises the same `ItemCommand` event handler.</span></span> <span data-ttu-id="9adc8-281">Pertanto, è s preferibile sempre accertarsi di controllare il `CommandName` proprietà e procedere con la logica a livello di codice solo se corrisponde al valore previsto.</span><span class="sxs-lookup"><span data-stu-id="9adc8-281">Therefore, it s best to always make sure you check the `CommandName` property and only proceed with your programmatic logic if it matches up to the value expected.</span></span>

<span data-ttu-id="9adc8-282">Dopo aver verificato che passato `CommandName` ListProducts il valore è uguale, quindi assegna il gestore dell'evento di `CategoryProductsDataSource` ObjectDataSource s `CategoryID` parametro il valore passato `CommandArgument`.</span><span class="sxs-lookup"><span data-stu-id="9adc8-282">After ensuring that the passed-in `CommandName` value equals ListProducts, the event handler then assigns the `CategoryProductsDataSource` ObjectDataSource s `CategoryID` parameter to the value of the passed-in `CommandArgument`.</span></span> <span data-ttu-id="9adc8-283">Questa modifica al s ObjectDataSource `SelectParameters` automaticamente provoca DataList riassociazione stesso all'origine dati, che mostra i prodotti per la categoria selezionata.</span><span class="sxs-lookup"><span data-stu-id="9adc8-283">This modification to the ObjectDataSource s `SelectParameters` automatically causes the DataList to rebind itself to the data source, showing the products for the newly selected category.</span></span>


[!code-csharp[Main](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/samples/sample12.cs)]

<span data-ttu-id="9adc8-284">Con queste aggiunte, questa esercitazione è stata completata.</span><span class="sxs-lookup"><span data-stu-id="9adc8-284">With these additions, our tutorial is complete!</span></span> <span data-ttu-id="9adc8-285">Richiedere qualche istante test in un browser.</span><span class="sxs-lookup"><span data-stu-id="9adc8-285">Take a moment to test it out in a browser.</span></span> <span data-ttu-id="9adc8-286">Nella figura 14 viene visualizzata la schermata durante la prima visita la pagina.</span><span class="sxs-lookup"><span data-stu-id="9adc8-286">Figure 14 shows the screen when first visiting the page.</span></span> <span data-ttu-id="9adc8-287">Poiché una categoria deve ancora essere selezionata, viene visualizzato alcun prodotto.</span><span class="sxs-lookup"><span data-stu-id="9adc8-287">Since a category has yet to be selected, no products are displayed.</span></span> <span data-ttu-id="9adc8-288">Facendo clic su una categoria, ad esempio, consente di visualizzare i prodotti nella categoria di prodotto in una visualizzazione a due colonne (vedere Figura 15).</span><span class="sxs-lookup"><span data-stu-id="9adc8-288">Clicking on a category, such as Produce, displays those products in the Product category in a two-column view (see Figure 15).</span></span>


<span data-ttu-id="9adc8-289">[![Nessun prodotto viene visualizzati quando prima visita la pagina](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image39.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image38.png)</span><span class="sxs-lookup"><span data-stu-id="9adc8-289">[![No Products are Displayed When First Visiting the Page](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image39.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image38.png)</span></span>

<span data-ttu-id="9adc8-290">**Figura 14**: No prodotti vengono visualizzati quando prima visita la pagina ([fare clic per visualizzare l'immagine ingrandita](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image40.png))</span><span class="sxs-lookup"><span data-stu-id="9adc8-290">**Figure 14**: No Products are Displayed When First Visiting the Page ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image40.png))</span></span>


<span data-ttu-id="9adc8-291">[![Fare clic sugli elenchi di categoria di prodotti i prodotti corrispondenti a destra](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image42.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image41.png)</span><span class="sxs-lookup"><span data-stu-id="9adc8-291">[![Clicking the Produce Category Lists the Matching Products to the Right](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image42.png)](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image41.png)</span></span>

<span data-ttu-id="9adc8-292">**Figura 15**: facendo clic sulla categoria di prodotto sono elencati i prodotti corrispondenti a destra ([fare clic per visualizzare l'immagine ingrandita](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image43.png))</span><span class="sxs-lookup"><span data-stu-id="9adc8-292">**Figure 15**: Clicking the Produce Category Lists the Matching Products to the Right ([Click to view full-size image](master-detail-using-a-bulleted-list-of-master-records-with-a-details-datalist-cs/_static/image43.png))</span></span>


## <a name="summary"></a><span data-ttu-id="9adc8-293">Riepilogo</span><span class="sxs-lookup"><span data-stu-id="9adc8-293">Summary</span></span>

<span data-ttu-id="9adc8-294">Come abbiamo visto in questa esercitazione e quello precedente, possono essere distribuiti in due pagine master-details report o consolidati in uno.</span><span class="sxs-lookup"><span data-stu-id="9adc8-294">As we saw in this tutorial and the preceding one, master/detail reports can be spread out across two pages, or consolidated on one.</span></span> <span data-ttu-id="9adc8-295">Visualizzazione di una relazione master/dettagli in una singola pagina, tuttavia, implica alcuni problemi sulla migliore per lo schema di layout e i record dei dettagli della pagina.</span><span class="sxs-lookup"><span data-stu-id="9adc8-295">Displaying a master/details report on a single page, however, introduces some challenges on how best to layout the master and details records on the page.</span></span> <span data-ttu-id="9adc8-296">Nel *Master/dettaglio con Master GridView selezionabile DetailsView dettagli* esercitazione abbiamo i record di dettagli vengono visualizzati sopra i record master; in questa esercitazione è stata utilizzata tecniche CSS per avere il valore float record master per il a sinistra dei dettagli.</span><span class="sxs-lookup"><span data-stu-id="9adc8-296">In the *Master/Detail Using a Selectable Master GridView with a Details DetailsView* tutorial we had the details records appear above the master records; in this tutorial we used CSS techniques to have the master records float to the left of the details.</span></span>

<span data-ttu-id="9adc8-297">Con la visualizzazione master/dettagli report, è anche avuto la possibilità di esplorare come recuperare il numero di prodotti associati a ogni categoria, nonché come eseguire la logica sul lato server quando un LinkButton (pulsante o ImageButton) viene selezionato dall'interno un Repeater.</span><span class="sxs-lookup"><span data-stu-id="9adc8-297">Along with displaying master/details reports, we also had the opportunity to explore how to retrieve the number of products associated with each category as well as how to perform server-side logic when a LinkButton (or Button or ImageButton) is clicked from within a Repeater.</span></span>

<span data-ttu-id="9adc8-298">In questa esercitazione viene completato l'esame del report master/dettaglio DataList e Repeater.</span><span class="sxs-lookup"><span data-stu-id="9adc8-298">This tutorial completes our examination of master/detail reports with the DataList and Repeater.</span></span> <span data-ttu-id="9adc8-299">Il set successivo di esercitazioni viene illustrato come aggiungere, modificare ed eliminare le funzionalità del controllo DataList.</span><span class="sxs-lookup"><span data-stu-id="9adc8-299">Our next set of tutorials will illustrate how to add editing and deleting capabilities to the DataList control.</span></span>

<span data-ttu-id="9adc8-300">Buona programmazione!</span><span class="sxs-lookup"><span data-stu-id="9adc8-300">Happy Programming!</span></span>

## <a name="further-reading"></a><span data-ttu-id="9adc8-301">Ulteriori informazioni</span><span class="sxs-lookup"><span data-stu-id="9adc8-301">Further Reading</span></span>

<span data-ttu-id="9adc8-302">Per ulteriori informazioni sugli argomenti trattati in questa esercitazione, vedere le risorse seguenti:</span><span class="sxs-lookup"><span data-stu-id="9adc8-302">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- <span data-ttu-id="9adc8-303">[Floatutorial](http://css.maxdesign.com.au/floatutorial/) un'esercitazione sul mobile degli elementi CSS con CSS</span><span class="sxs-lookup"><span data-stu-id="9adc8-303">[Floatutorial](http://css.maxdesign.com.au/floatutorial/) a tutorial on floating CSS elements with CSS</span></span>
- <span data-ttu-id="9adc8-304">[Il posizionamento CSS](http://www.brainjar.com/css/positioning/) ulteriori informazioni sul posizionamento di elementi con CSS</span><span class="sxs-lookup"><span data-stu-id="9adc8-304">[CSS Positioning](http://www.brainjar.com/css/positioning/) more information on positioning elements with CSS</span></span>
- <span data-ttu-id="9adc8-305">[Layout di uscita del contenuto con HTML](http://www.w3schools.com/html/html_layout.asp) utilizzando `<table>` s e altri elementi HTML per il posizionamento</span><span class="sxs-lookup"><span data-stu-id="9adc8-305">[Laying Out Content with HTML](http://www.w3schools.com/html/html_layout.asp) using `<table>` s and other HTML elements for positioning</span></span>

## <a name="about-the-author"></a><span data-ttu-id="9adc8-306">Informazioni sull'autore</span><span class="sxs-lookup"><span data-stu-id="9adc8-306">About the Author</span></span>

<span data-ttu-id="9adc8-307">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), l'autore di sette libri e fondatore di [4GuysFromRolla](http://www.4guysfromrolla.com), ha lavorato con tecnologie Web di Microsoft dal 1998.</span><span class="sxs-lookup"><span data-stu-id="9adc8-307">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="9adc8-308">Scott funziona come un consulente trainer e writer.</span><span class="sxs-lookup"><span data-stu-id="9adc8-308">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="9adc8-309">Il suo ultimo libro è [ *SAM insegna manualmente ASP.NET 2.0 nelle 24 ore*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="9adc8-309">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="9adc8-310">Egli può essere raggiunto al [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) o sul suo blog, cui è reperibile in [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="9adc8-310">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="9adc8-311">Ringraziamenti speciali</span><span class="sxs-lookup"><span data-stu-id="9adc8-311">Special Thanks To</span></span>

<span data-ttu-id="9adc8-312">Questa serie di esercitazioni è stata esaminata da diversi validi revisori.</span><span class="sxs-lookup"><span data-stu-id="9adc8-312">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="9adc8-313">Il revisore per questa esercitazione è stata Zack Jones.</span><span class="sxs-lookup"><span data-stu-id="9adc8-313">Lead reviewer for this tutorial was Zack Jones.</span></span> <span data-ttu-id="9adc8-314">Se si è interessati my prossimi articoli MSDN?</span><span class="sxs-lookup"><span data-stu-id="9adc8-314">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="9adc8-315">In caso affermativo, Inviami una riga alla [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="9adc8-315">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="9adc8-316">[Precedente](master-detail-filtering-acess-two-pages-datalist-cs.md)
> [Successivo](master-detail-filtering-with-a-dropdownlist-datalist-vb.md)</span><span class="sxs-lookup"><span data-stu-id="9adc8-316">[Previous](master-detail-filtering-acess-two-pages-datalist-cs.md)
[Next](master-detail-filtering-with-a-dropdownlist-datalist-vb.md)</span></span>
