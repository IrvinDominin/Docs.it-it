---
uid: web-forms/overview/data-access/editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-cs
title: Aggiunta di controlli di convalida per la modifica e l'inserimento di interfacce (c#) | Documenti Microsoft
author: rick-anderson
description: In questa esercitazione si vedrà quanto sia facile aggiungere i controlli di convalida EditItemTemplate e InsertItemTemplate dei dati di controllo Web, per offrire maggiori...
ms.author: aspnetcontent
manager: wpickett
ms.date: 07/17/2006
ms.topic: article
ms.assetid: 2086cb1a-ab78-49ae-9c0b-03891c69776a
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/data-access/editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-cs
msc.type: authoredcontent
ms.openlocfilehash: 3df80984d15e13efddc52497d600d396d775d365
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/06/2018
ms.locfileid: "30888448"
---
<a name="adding-validation-controls-to-the-editing-and-inserting-interfaces-c"></a><span data-ttu-id="f1d6c-103">Aggiunta di controlli di convalida per la modifica e l'inserimento di interfacce (c#)</span><span class="sxs-lookup"><span data-stu-id="f1d6c-103">Adding Validation Controls to the Editing and Inserting Interfaces (C#)</span></span>
====================
<span data-ttu-id="f1d6c-104">da [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="f1d6c-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="f1d6c-105">[Scaricare App di esempio](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_19_CS.exe) o [Scarica il PDF](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/datatutorial19cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="f1d6c-105">[Download Sample App](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_19_CS.exe) or [Download PDF](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/datatutorial19cs1.pdf)</span></span>

> <span data-ttu-id="f1d6c-106">In questa esercitazione verranno esaminati quanto sia facile aggiungere i controlli di convalida EditItemTemplate e InsertItemTemplate dei dati di controllo Web, per fornire un'interfaccia utente più infallibile.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-106">In this tutorial we'll see how easy it is to add validation controls to the EditItemTemplate and InsertItemTemplate of a data Web control, to provide a more foolproof user interface.</span></span>


## <a name="introduction"></a><span data-ttu-id="f1d6c-107">Introduzione</span><span class="sxs-lookup"><span data-stu-id="f1d6c-107">Introduction</span></span>

<span data-ttu-id="f1d6c-108">I controlli GridView e DetailsView negli esempi abbiamo esplorato negli ultimi tre esercitazioni sono tutti stato composto da BoundField e CheckBoxFields (i tipi di campo aggiunti automaticamente da Visual Studio quando si associa un controllo GridView o DetailsView a un'origine dati controllo tramite lo smart tag).</span><span class="sxs-lookup"><span data-stu-id="f1d6c-108">The GridView and DetailsView controls in the examples we've explored over the past three tutorials have all been composed of BoundFields and CheckBoxFields (the field types automatically added by Visual Studio when binding a GridView or DetailsView to a data source control through the smart tag).</span></span> <span data-ttu-id="f1d6c-109">Quando si modifica una riga in un controllo GridView o DetailsView, tali BoundField che non sono di sola lettura vengono convertiti nelle caselle di testo, da cui l'utente finale può modificare i dati esistenti.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-109">When editing a row in a GridView or DetailsView, those BoundFields that are not read-only are converted into textboxes, from which the end user can modify the existing data.</span></span> <span data-ttu-id="f1d6c-110">Analogamente, quando inserire un nuovo record in un controllo DetailsView, tali BoundField cui `InsertVisible` è impostata su `true` (predefinito) vengono visualizzati come caselle di testo vuota, in cui l'utente può fornire i valori dei campi del nuovo record.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-110">Similarly, when inserting a new record into a DetailsView control, those BoundFields whose `InsertVisible` property is set to `true` (the default) are rendered as empty textboxes, into which the user can provide the new record's field values.</span></span> <span data-ttu-id="f1d6c-111">Analogamente, CheckBoxFields, che sono disabilitate nell'interfaccia standard, di sola lettura, vengono convertiti in caselle di controllo abilitato la modifica e l'inserimento di interfacce.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-111">Likewise, CheckBoxFields, which are disabled in the standard, read-only interface, are converted into enabled checkboxes in the editing and inserting interfaces.</span></span>

<span data-ttu-id="f1d6c-112">Durante l'impostazione predefinita, la modifica e l'inserimento di interfacce per il BoundField e CheckBoxField può essere utile, l'interfaccia non dispone di alcun tipo di convalida.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-112">While the default editing and inserting interfaces for the BoundField and CheckBoxField can be helpful, the interface lacks any sort of validation.</span></span> <span data-ttu-id="f1d6c-113">Se un utente esegue un errore di immissione dati - ad esempio l'omissione di `ProductName` campo oppure immettendo un valore valido per `UnitsInStock` (ad esempio -50) verrà generata un'eccezione da all'interno di efficacia dell'architettura dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-113">If a user makes a data entry mistake - such as omitting the `ProductName` field or entering an invalid value for `UnitsInStock` (such as -50) an exception will be raised from within the depths of the application architecture.</span></span> <span data-ttu-id="f1d6c-114">Durante questa eccezione può essere gestita correttamente come dimostrato nel [esercitazione precedente](handling-bll-and-dal-level-exceptions-in-an-asp-net-page-cs.md), idealmente la modifica o l'inserimento dell'interfaccia utente includono i controlli di convalida per impedire un utente di immettere tali dati non validi nel primo elemento.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-114">While this exception can be gracefully handled as demonstrated in the [previous tutorial](handling-bll-and-dal-level-exceptions-in-an-asp-net-page-cs.md), ideally the editing or inserting user interface would include validation controls to prevent a user from entering such invalid data in the first place.</span></span>

<span data-ttu-id="f1d6c-115">Per fornire una modalità di modifica personalizzata o un'interfaccia di inserimento, è necessario sostituire il BoundField o CheckBoxField con un TemplateField.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-115">In order to provide a customized editing or inserting interface, we need to replace the BoundField or CheckBoxField with a TemplateField.</span></span> <span data-ttu-id="f1d6c-116">TemplateFields, ovvero l'argomento di discussione nel [TemplateFields utilizzo nel controllo GridView](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md) e [TemplateFields utilizzo nel controllo DetailsView](../custom-formatting/using-templatefields-in-the-detailsview-control-cs.md) esercitazioni, può essere costituito da più la definizione di modelli di separano le interfacce per gli stati di riga diversi.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-116">TemplateFields, which were the topic of discussion in the [Using TemplateFields in the GridView Control](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md) and [Using TemplateFields in the DetailsView Control](../custom-formatting/using-templatefields-in-the-detailsview-control-cs.md) tutorials, can consist of multiple templates defining separate interfaces for different row states.</span></span> <span data-ttu-id="f1d6c-117">Il TemplateField `ItemTemplate` viene utilizzato per il rendering di campi di sola lettura o le righe nel controllo DetailsView o GridView, mentre il `EditItemTemplate` e `InsertItemTemplate` indicano le interfacce da utilizzare per la modifica e l'inserimento di modalità, rispettivamente.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-117">The TemplateField's `ItemTemplate` is used to when rendering read-only fields or rows in the DetailsView or GridView controls, whereas the `EditItemTemplate` and `InsertItemTemplate` indicate the interfaces to use for the editing and inserting modes, respectively.</span></span>

<span data-ttu-id="f1d6c-118">In questa esercitazione si vedrà quanto sia facile aggiungere i controlli di convalida per il TemplateField `EditItemTemplate` e `InsertItemTemplate` per fornire un'interfaccia utente più infallibile.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-118">In this tutorial we'll see how easy it is to add validation controls to the TemplateField's `EditItemTemplate` and `InsertItemTemplate` to provide a more foolproof user interface.</span></span> <span data-ttu-id="f1d6c-119">In particolare, questa esercitazione illustra l'esempio creato nel [esaminando gli eventi associati con l'inserimento, aggiornamento ed eliminazione](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) esercitazione e consente la modifica e l'inserimento delle interfacce per includere la convalida appropriata.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-119">Specifically, this tutorial takes the example created in the [Examining the Events Associated with Inserting, Updating, and Deleting](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) tutorial and augments the editing and inserting interfaces to include appropriate validation.</span></span>

## <a name="step-1-replicating-the-example-fromexamining-the-events-associated-with-inserting-updating-and-deletingexamining-the-events-associated-with-inserting-updating-and-deleting-csmd"></a><span data-ttu-id="f1d6c-120">Passaggio 1: La replica di esempio dal[esaminando gli eventi associati inserimento, aggiornamento ed eliminazione](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md)</span><span class="sxs-lookup"><span data-stu-id="f1d6c-120">Step 1: Replicating the Example from[Examining the Events Associated with Inserting, Updating, and Deleting](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md)</span></span>

<span data-ttu-id="f1d6c-121">Nel [esaminando gli eventi associati con l'inserimento, aggiornamento ed eliminazione](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) esercitazione è stata creata una pagina elencati i nomi e i prezzi dei prodotti in un controllo GridView. modificabile.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-121">In the [Examining the Events Associated with Inserting, Updating, and Deleting](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) tutorial we created a page that listed the names and prices of the products in an editable GridView.</span></span> <span data-ttu-id="f1d6c-122">Inoltre, la pagina è incluso un controllo DetailsView cui `DefaultMode` è stata impostata su `Insert`, pertanto è sempre il rendering in modalità di inserimento.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-122">Additionally, the page included a DetailsView whose `DefaultMode` property was set to `Insert`, thereby always rendering in insert mode.</span></span> <span data-ttu-id="f1d6c-123">Da questo controllo DetailsView, l'utente può immettere il nome e il prezzo per un nuovo prodotto, fare clic su Inserisci e aggiungerlo al sistema (vedere la figura 1).</span><span class="sxs-lookup"><span data-stu-id="f1d6c-123">From this DetailsView, the user could enter the name and price for a new product, click Insert, and have it added to the system (see Figure 1).</span></span>


<span data-ttu-id="f1d6c-124">[![Nell'esempio precedente consente agli utenti di aggiungere nuovi prodotti e modificare quelle esistenti](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image2.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="f1d6c-124">[![The Previous Example Allows Users to Add New Products and Edit Existing Ones](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image2.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image1.png)</span></span>

<span data-ttu-id="f1d6c-125">**Figura 1**: il precedente esempio consente agli utenti di aggiungere nuovi prodotti e modificare quelli esistenti ([fare clic per visualizzare l'immagine ingrandita](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="f1d6c-125">**Figure 1**: The Previous Example Allows Users to Add New Products and Edit Existing Ones ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image3.png))</span></span>


<span data-ttu-id="f1d6c-126">L'obiettivo di questa esercitazione è per aumentare il controllo DetailsView e GridView per fornire i controlli di convalida.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-126">Our goal for this tutorial is to augment the DetailsView and GridView to provide validation controls.</span></span> <span data-ttu-id="f1d6c-127">In particolare, la logica di convalida sarà:</span><span class="sxs-lookup"><span data-stu-id="f1d6c-127">In particular, our validation logic will:</span></span>

- <span data-ttu-id="f1d6c-128">Richiede che il nome deve essere fornito durante l'inserimento o modifica di un prodotto</span><span class="sxs-lookup"><span data-stu-id="f1d6c-128">Require that the name be provided when inserting or editing a product</span></span>
- <span data-ttu-id="f1d6c-129">Richiede che il prezzo deve essere fornito quando si inserisce un record. Quando si modifica un record, si sarà comunque necessario un prezzo, ma utilizzerà la logica di programmazione in GridView `RowUpdating` gestore dell'evento dall'esercitazione precedente è già presente</span><span class="sxs-lookup"><span data-stu-id="f1d6c-129">Require that the price be provided when inserting a record; when editing a record, we will still require a price, but will use the programmatic logic in the GridView's `RowUpdating` event handler already present from the earlier tutorial</span></span>
- <span data-ttu-id="f1d6c-130">Verificare che il valore immesso per il prezzo è un formato di valuta validi</span><span class="sxs-lookup"><span data-stu-id="f1d6c-130">Ensure that the value entered for the price is a valid currency format</span></span>

<span data-ttu-id="f1d6c-131">Prima di poter esaminare in modo da integrare l'esempio precedente per includere la convalida, è innanzitutto necessario replicare l'esempio dal `DataModificationEvents.aspx` pagina per la pagina per questa esercitazione, `UIValidation.aspx`.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-131">Before we can look at augmenting the previous example to include validation, we first need to replicate the example from the `DataModificationEvents.aspx` page to the page for this tutorial, `UIValidation.aspx`.</span></span> <span data-ttu-id="f1d6c-132">A tale scopo è necessario copiare sia la `DataModificationEvents.aspx` markup dichiarativo della pagina e il relativo codice sorgente.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-132">To accomplish this we need to copy over both the `DataModificationEvents.aspx` page's declarative markup and its source code.</span></span> <span data-ttu-id="f1d6c-133">Copiare innanzitutto il markup dichiarativo eseguendo i passaggi seguenti:</span><span class="sxs-lookup"><span data-stu-id="f1d6c-133">First copy over the declarative markup by performing the following steps:</span></span>

1. <span data-ttu-id="f1d6c-134">Aprire il `DataModificationEvents.aspx` pagina in Visual Studio</span><span class="sxs-lookup"><span data-stu-id="f1d6c-134">Open the `DataModificationEvents.aspx` page in Visual Studio</span></span>
2. <span data-ttu-id="f1d6c-135">Passare al codice dichiarativo della pagina (fare clic sul pulsante nella parte inferiore della pagina di origine)</span><span class="sxs-lookup"><span data-stu-id="f1d6c-135">Go to the page's declarative markup (click on the Source button at the bottom of the page)</span></span>
3. <span data-ttu-id="f1d6c-136">Copiare il testo all'interno di `<asp:Content>` e `</asp:Content>` tag (righe 3 a 44), come illustrato nella figura 2.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-136">Copy the text within the `<asp:Content>` and `</asp:Content>` tags (lines 3 through 44), as shown in Figure 2.</span></span>


<span data-ttu-id="f1d6c-137">[![Copiare il testo all'interno del &lt;asp: Content&gt; controllo](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image5.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="f1d6c-137">[![Copy the Text Within the &lt;asp:Content&gt; Control](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image5.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image4.png)</span></span>

<span data-ttu-id="f1d6c-138">**Figura 2**: copiare il testo all'interno del `<asp:Content>` controllo ([fare clic per visualizzare l'immagine ingrandita](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="f1d6c-138">**Figure 2**: Copy the Text Within the `<asp:Content>` Control ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image6.png))</span></span>


1. <span data-ttu-id="f1d6c-139">Aprire il `UIValidation.aspx` pagina</span><span class="sxs-lookup"><span data-stu-id="f1d6c-139">Open the `UIValidation.aspx` page</span></span>
2. <span data-ttu-id="f1d6c-140">Passare al codice dichiarativo della pagina</span><span class="sxs-lookup"><span data-stu-id="f1d6c-140">Go to the page's declarative markup</span></span>
3. <span data-ttu-id="f1d6c-141">Incollare il testo all'interno di `<asp:Content>` controllo.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-141">Paste the text within the `<asp:Content>` control.</span></span>

<span data-ttu-id="f1d6c-142">Per copiare il codice sorgente, aprire il `DataModificationEvents.aspx.cs` pagina e copiare solo il testo *all'interno di* la `EditInsertDelete_DataModificationEvents` classe.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-142">To copy over the source code, open the `DataModificationEvents.aspx.cs` page and copy just the text *within* the `EditInsertDelete_DataModificationEvents` class.</span></span> <span data-ttu-id="f1d6c-143">Copiare i tre gestori eventi (`Page_Load`, `GridView1_RowUpdating`, e `ObjectDataSource1_Inserting`), ma **non** copiare la dichiarazione di classe o `using` istruzioni.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-143">Copy the three event handlers (`Page_Load`, `GridView1_RowUpdating`, and `ObjectDataSource1_Inserting`), but do **not** copy the class declaration or `using` statements.</span></span> <span data-ttu-id="f1d6c-144">Incollare il testo copiato *all'interno di* il `EditInsertDelete_UIValidation` classe `UIValidation.aspx.cs`.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-144">Paste the copied text *within* the `EditInsertDelete_UIValidation` class in `UIValidation.aspx.cs`.</span></span>

<span data-ttu-id="f1d6c-145">Dopo avere spostato il contenuto e il codice da `DataModificationEvents.aspx` a `UIValidation.aspx`, dedicare alcuni minuti per il test dello stato di avanzamento in un browser.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-145">After moving over the content and code from `DataModificationEvents.aspx` to `UIValidation.aspx`, take a moment to test out your progress in a browser.</span></span> <span data-ttu-id="f1d6c-146">Si noterà lo stesso output e la stessa funzionalità in ognuna di queste due pagine esperienza (indietro per vedere la figura 1 una cattura di schermata della `DataModificationEvents.aspx` in azione).</span><span class="sxs-lookup"><span data-stu-id="f1d6c-146">You should see the same output and experience the same functionality in each of these two pages (refer back to Figure 1 for a screen shot of `DataModificationEvents.aspx` in action).</span></span>

## <a name="step-2-converting-the-boundfields-into-templatefields"></a><span data-ttu-id="f1d6c-147">Passaggio 2: Conversione di BoundField in TemplateFields</span><span class="sxs-lookup"><span data-stu-id="f1d6c-147">Step 2: Converting the BoundFields Into TemplateFields</span></span>

<span data-ttu-id="f1d6c-148">Per aggiungere i controlli di convalida per le interfacce di modificare e l'inserimento, devono essere convertiti in TemplateFields il BoundField usato dai controlli DetailsView e GridView.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-148">To add validation controls to the editing and inserting interfaces, the BoundFields used by the DetailsView and GridView controls need to be converted into TemplateFields.</span></span> <span data-ttu-id="f1d6c-149">A tale scopo, scegliere i collegamenti di modifica colonne e modificare i campi in GridView e DetailsView smart tag, rispettivamente.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-149">To achieve this, click on the Edit Columns and Edit Fields links in the GridView and DetailsView's smart tags, respectively.</span></span> <span data-ttu-id="f1d6c-150">Qui, selezionare ogni il BoundField e fare clic sul collegamento "Converti il campo in un TemplateField".</span><span class="sxs-lookup"><span data-stu-id="f1d6c-150">There, select each of the BoundFields and click the "Convert this field into a TemplateField" link.</span></span>


<span data-ttu-id="f1d6c-151">[![Ognuna delle BoundField di DetailsView e del controllo GridView. convertire TemplateFields](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image8.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="f1d6c-151">[![Convert Each of the DetailsView's and GridView's BoundFields Into TemplateFields](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image8.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image7.png)</span></span>

<span data-ttu-id="f1d6c-152">**Figura 3**: convertirli singolarmente di DetailsView e GridView BoundField in TemplateFields ([fare clic per visualizzare l'immagine ingrandita](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="f1d6c-152">**Figure 3**: Convert Each of the DetailsView's and GridView's BoundFields Into TemplateFields ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image9.png))</span></span>


<span data-ttu-id="f1d6c-153">Conversione di un BoundField in un TemplateField tramite la finestra di dialogo campi genera un TemplateField che presenta le stesse interfacce di sola lettura, modificare e inserimento BoundField stesso.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-153">Converting a BoundField into a TemplateField through the Fields dialog box generates a TemplateField that exhibits the same read-only, editing, and inserting interfaces as the BoundField itself.</span></span> <span data-ttu-id="f1d6c-154">Il markup seguente mostra la sintassi dichiarativa per il `ProductName` campo nel controllo DetailsView. dopo aver convertito in un TemplateField:</span><span class="sxs-lookup"><span data-stu-id="f1d6c-154">The following markup shows the declarative syntax for the `ProductName` field in the DetailsView after it has been converted into a TemplateField:</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample1.aspx)]

<span data-ttu-id="f1d6c-155">Si noti che questo TemplateField ha tre modelli creati automaticamente `ItemTemplate`, `EditItemTemplate`, e `InsertItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-155">Note that this TemplateField had three templates automatically created `ItemTemplate`, `EditItemTemplate`, and `InsertItemTemplate`.</span></span> <span data-ttu-id="f1d6c-156">Il `ItemTemplate` consente di visualizzare il valore di un campo di dati single (`ProductName`) utilizza un controllo etichetta Web, mentre il `EditItemTemplate` e `InsertItemTemplate` presentare il valore del campo dati in un controllo casella di testo Web che associa il campo dei dati con la casella di testo `Text` proprietà con associazione a dati bidirezionale.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-156">The `ItemTemplate` displays a single data field value (`ProductName`) using a Label Web control, while the `EditItemTemplate` and `InsertItemTemplate` present the data field value in a TextBox Web control that associates the data field with the TextBox's `Text` property using two-way databinding.</span></span> <span data-ttu-id="f1d6c-157">Poiché il controllo DetailsView vengono utilizzate solo in questa pagina per l'inserimento, è possibile rimuovere il `ItemTemplate` e `EditItemTemplate` da due TemplateFields, sebbene non sia lasciarli non causa problemi.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-157">Since we are only using the DetailsView in this page for inserting, you may remove the `ItemTemplate` and `EditItemTemplate` from the two TemplateFields, although there's no harm in leaving them.</span></span>

<span data-ttu-id="f1d6c-158">Poiché GridView non supporta l'inserimento di funzionalità del controllo DetailsView, conversione di GridView predefinito `ProductName` campo in un TemplateField comporta solo un `ItemTemplate` e `EditItemTemplate`:</span><span class="sxs-lookup"><span data-stu-id="f1d6c-158">Since the GridView does not support the built-in inserting features of the DetailsView, converting the GridView's `ProductName` field into a TemplateField results in only an `ItemTemplate` and `EditItemTemplate`:</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample2.aspx)]

<span data-ttu-id="f1d6c-159">Fare clic su "Converti il campo in un TemplateField", Visual Studio ha creato un TemplateField cui modelli di simulano l'interfaccia utente di BoundField convertito.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-159">By clicking the "Convert this field into a TemplateField," Visual Studio has created a TemplateField whose templates mimic the user interface of the converted BoundField.</span></span> <span data-ttu-id="f1d6c-160">È possibile verificare questa, visitare questa pagina tramite un browser.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-160">You can verify this by visiting this page through a browser.</span></span> <span data-ttu-id="f1d6c-161">Sono disponibili che l'aspetto e il comportamento del TemplateFields è identico all'esperienza quando sono stati utilizzati BoundField.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-161">You'll find that the appearance and behavior of the TemplateFields is identical to the experience when BoundFields were used instead.</span></span>

> [!NOTE]
> <span data-ttu-id="f1d6c-162">È possibile personalizzare le interfacce modificare nei modelli in base alle esigenze.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-162">Feel free to customize the editing interfaces in the templates as needed.</span></span> <span data-ttu-id="f1d6c-163">Potrebbe ad esempio, si vuole avere la casella di testo nel `UnitPrice` TemplateFields sottoposto a rendering come una casella di testo più piccola rispetto di `ProductName` casella di testo.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-163">For example, we may want to have the TextBox in the `UnitPrice` TemplateFields rendered as a smaller textbox than the `ProductName` textbox.</span></span> <span data-ttu-id="f1d6c-164">A tale scopo è possibile impostare la casella di testo `Columns` proprietà su un valore appropriato oppure specificare una larghezza assoluta tramite il `Width` proprietà.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-164">To accomplish this you can set the TextBox's `Columns` property to an appropriate value or provide an absolute width via the `Width` property.</span></span> <span data-ttu-id="f1d6c-165">Nella prossima esercitazione vedremo come personalizzare completamente l'interfaccia di modifica sostituendo la casella di testo con una voce di dati alternativi controllo Web.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-165">In the next tutorial we'll see how to completely customize the editing interface by replacing the TextBox with an alternate data entry Web control.</span></span>


## <a name="step-3-adding-the-validation-controls-to-the-gridviewsedititemtemplate-s"></a><span data-ttu-id="f1d6c-166">Passaggio 3: Aggiunta di controlli di convalida per il controllo GridView`EditItemTemplate` s</span><span class="sxs-lookup"><span data-stu-id="f1d6c-166">Step 3: Adding the Validation Controls to the GridView's`EditItemTemplate` s</span></span>

<span data-ttu-id="f1d6c-167">Quando si crea il form di immissione dati, è importante che gli utenti immettere tutti i campi obbligatori e che tutti gli input forniti sono valori validi, formattato correttamente.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-167">When constructing data entry forms, it is important that users enter any required fields and that all provided inputs are legal, properly-formatted values.</span></span> <span data-ttu-id="f1d6c-168">Per garantire che l'input dell'utente siano valide, ASP.NET fornisce cinque i controlli di convalida incorporate che sono progettati per essere utilizzati per convalidare il valore di un singolo controllo di input:</span><span class="sxs-lookup"><span data-stu-id="f1d6c-168">To help ensure that a user's inputs are valid, ASP.NET provides five built-in validation controls that are designed to be used to validate the value of a single input control:</span></span>

- <span data-ttu-id="f1d6c-169">[RequiredFieldValidator](https://msdn.microsoft.com/library/5hbw267h(VS.80).aspx) assicura che è stato fornito un valore</span><span class="sxs-lookup"><span data-stu-id="f1d6c-169">[RequiredFieldValidator](https://msdn.microsoft.com/library/5hbw267h(VS.80).aspx) ensures that a value has been provided</span></span>
- <span data-ttu-id="f1d6c-170">[CompareValidator](https://msdn.microsoft.com/library/db330ayw(VS.80).aspx) convalida un valore rispetto a un altro valore di controllo Web o un valore costante, oppure verifica che il formato del valore è valido per un tipo di dati specificato</span><span class="sxs-lookup"><span data-stu-id="f1d6c-170">[CompareValidator](https://msdn.microsoft.com/library/db330ayw(VS.80).aspx) validates a value against another Web control value or a constant value, or ensures that the value's format is legal for a specified data type</span></span>
- <span data-ttu-id="f1d6c-171">[RangeValidator](https://msdn.microsoft.com/library/f70d09xt.aspx) assicura che un valore sia all'interno di un intervallo di valori</span><span class="sxs-lookup"><span data-stu-id="f1d6c-171">[RangeValidator](https://msdn.microsoft.com/library/f70d09xt.aspx) ensures that a value is within a range of values</span></span>
- <span data-ttu-id="f1d6c-172">[RegularExpressionValidator](https://msdn.microsoft.com/library/eahwtc9e.aspx) convalida un valore rispetto a un [espressioni regolari](http://en.wikipedia.org/wiki/Regular_expression)</span><span class="sxs-lookup"><span data-stu-id="f1d6c-172">[RegularExpressionValidator](https://msdn.microsoft.com/library/eahwtc9e.aspx) validates a value against a [regular expression](http://en.wikipedia.org/wiki/Regular_expression)</span></span>
- <span data-ttu-id="f1d6c-173">[CustomValidator](https://msdn.microsoft.com/library/9eee01cx(VS.80).aspx) convalida un valore rispetto a un metodo personalizzato definito dall'utente</span><span class="sxs-lookup"><span data-stu-id="f1d6c-173">[CustomValidator](https://msdn.microsoft.com/library/9eee01cx(VS.80).aspx) validates a value against a custom, user-defined method</span></span>

<span data-ttu-id="f1d6c-174">Per ulteriori informazioni su questi cinque controlli, consultare il [sezione relativa ai controlli di convalida](https://quickstarts.asp.net/quickstartv20/aspnet/doc/ctrlref/validation/default.aspx) del [esercitazioni delle Guide rapide ASP.NET](https://asp.net/QuickStart/aspnet/).</span><span class="sxs-lookup"><span data-stu-id="f1d6c-174">For more information on these five controls, check out the [Validation Controls section](https://quickstarts.asp.net/quickstartv20/aspnet/doc/ctrlref/validation/default.aspx) of the [ASP.NET Quickstart Tutorials](https://asp.net/QuickStart/aspnet/).</span></span>

<span data-ttu-id="f1d6c-175">Per questa esercitazione è necessario utilizzare un RequiredFieldValidator DetailsView sia GridView in `ProductName` TemplateFields e RequiredFieldValidator dal controllo DetailsView `UnitPrice` TemplateField.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-175">For our tutorial we'll need to use a RequiredFieldValidator in both the DetailsView and GridView's `ProductName` TemplateFields and a RequiredFieldValidator in the DetailsView's `UnitPrice` TemplateField.</span></span> <span data-ttu-id="f1d6c-176">Inoltre, sarà necessario aggiungere un controllo CompareValidator per entrambi i controlli `UnitPrice` TemplateFields che assicura che il prezzo immesso con un valore maggiore o uguale a 0 e verrà presentato in un formato di valuta validi.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-176">Furthermore, we'll need to add a CompareValidator to both controls' `UnitPrice` TemplateFields that ensures that the entered price has a value greater than or equal to 0 and is presented in a valid currency format.</span></span>

> [!NOTE]
> <span data-ttu-id="f1d6c-177">Mentre ASP.NET 1. x era questi stessi controlli di convalida di cinque, ASP.NET 2.0 ha aggiunto una serie di miglioramenti, principale due script sul lato client da supportare per browser diverso da Internet Explorer e la possibilità di controlli di convalida di partizione in una pagina in gruppi di convalida.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-177">While ASP.NET 1.x had these same five validation controls, ASP.NET 2.0 has added a number of improvements, the main two being client-side script support for browsers other than Internet Explorer and the ability to partition validation controls on a page into validation groups.</span></span> <span data-ttu-id="f1d6c-178">Per ulteriori informazioni sulle nuove funzionalità di controllo di convalida in 2.0, fare riferimento a [Sezionando i controlli di convalida in ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/112305-1.aspx).</span><span class="sxs-lookup"><span data-stu-id="f1d6c-178">For more information on the new validation control features in 2.0, refer to [Dissecting the Validation Controls in ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/112305-1.aspx).</span></span>


<span data-ttu-id="f1d6c-179">Per iniziare, aggiungere i controlli di convalida necessari per il `EditItemTemplate` s in TemplateFields del controllo GridView.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-179">Let's start by adding the necessary validation controls to the `EditItemTemplate` s in the GridView's TemplateFields.</span></span> <span data-ttu-id="f1d6c-180">A tale scopo, fare clic sul collegamento Modifica modelli dal smart tag di GridView per visualizzare l'interfaccia di modifica del modello.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-180">To accomplish this, click on the Edit Templates link from the GridView's smart tag to bring up the template editing interface.</span></span> <span data-ttu-id="f1d6c-181">Da qui è possibile selezionare il modello da modificare dall'elenco a discesa.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-181">From here, you can select which template to edit from the drop-down list.</span></span> <span data-ttu-id="f1d6c-182">Poiché si desidera estendere l'interfaccia di modifica, è necessario aggiungere i controlli di convalida per il `ProductName` e `UnitPrice`del `EditItemTemplate` s.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-182">Since we want to augment the editing interface, we need to add validation controls to the `ProductName` and `UnitPrice`'s `EditItemTemplate` s.</span></span>


<span data-ttu-id="f1d6c-183">[![È necessario estendere il ProductName ed EditItemTemplates del prezzo unitario](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image11.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="f1d6c-183">[![We Need to Extend the ProductName and UnitPrice's EditItemTemplates](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image11.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image10.png)</span></span>

<span data-ttu-id="f1d6c-184">**Figura 4**: È necessario estendere il `ProductName` e `UnitPrice`del `EditItemTemplate` s ([fare clic per visualizzare l'immagine ingrandita](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="f1d6c-184">**Figure 4**: We Need to Extend the `ProductName` and `UnitPrice`'s `EditItemTemplate` s ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image12.png))</span></span>


<span data-ttu-id="f1d6c-185">Nel `ProductName` `EditItemTemplate`, aggiungere un controllo RequiredFieldValidator trascinandolo dalla casella degli strumenti all'interfaccia di modifica del modello, inserire dopo la casella di testo.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-185">In the `ProductName` `EditItemTemplate`, add a RequiredFieldValidator by dragging it from the Toolbox into the template editing interface, placing after the TextBox.</span></span>


<span data-ttu-id="f1d6c-186">[![Aggiungere un controllo RequiredFieldValidator ProductName EditItemTemplate](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image14.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="f1d6c-186">[![Add a RequiredFieldValidator to the ProductName EditItemTemplate](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image14.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image13.png)</span></span>

<span data-ttu-id="f1d6c-187">**Figura 5**: aggiungere un controllo RequiredFieldValidator per il `ProductName` `EditItemTemplate` ([fare clic per visualizzare l'immagine ingrandita](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="f1d6c-187">**Figure 5**: Add a RequiredFieldValidator to the `ProductName` `EditItemTemplate` ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image15.png))</span></span>


<span data-ttu-id="f1d6c-188">Tutti i controlli di convalida di lavoro tramite la convalida dell'input di un singolo controllo Web ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-188">All validation controls work by validating the input of a single ASP.NET Web control.</span></span> <span data-ttu-id="f1d6c-189">Pertanto, è necessario indicare che è stato appena aggiunto RequiredFieldValidator deve convalidare contro la casella di testo nel `EditItemTemplate`; questa operazione viene eseguita mediante l'impostazione del controllo di convalida [proprietà ControlToValidate](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.controltovalidate(VS.80).aspx) per il `ID` del controllo Web appropriato.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-189">Therefore, we need to indicate that the RequiredFieldValidator we just added should validate against the TextBox in the `EditItemTemplate`; this is accomplished by setting the validation control's [ControlToValidate property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.controltovalidate(VS.80).aspx) to the `ID` of the appropriate Web control.</span></span> <span data-ttu-id="f1d6c-190">La casella di testo è attualmente il piuttosto nondescript `ID` di `TextBox1`, ma di seguito in un nome più appropriato.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-190">The TextBox currently has the rather nondescript `ID` of `TextBox1`, but let's change it to something more appropriate.</span></span> <span data-ttu-id="f1d6c-191">Fare clic sulla casella di testo nel modello e dalla finestra delle proprietà, modificare quindi il `ID` da `TextBox1` a `EditProductName`.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-191">Click on the TextBox in the template and then, from the Properties window, change the `ID` from `TextBox1` to `EditProductName`.</span></span>


<span data-ttu-id="f1d6c-192">[![Modificare ID la casella di testo in EditProductName](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image17.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="f1d6c-192">[![Change the TextBox's ID to EditProductName](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image17.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image16.png)</span></span>

<span data-ttu-id="f1d6c-193">**Figura 6**: modificare la casella di testo `ID` alla `EditProductName` ([fare clic per visualizzare l'immagine ingrandita](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="f1d6c-193">**Figure 6**: Change the TextBox's `ID` to `EditProductName` ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image18.png))</span></span>


<span data-ttu-id="f1d6c-194">Successivamente, impostare il controllo RequiredFieldValidator `ControlToValidate` proprietà `EditProductName`.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-194">Next, set the RequiredFieldValidator's `ControlToValidate` property to `EditProductName`.</span></span> <span data-ttu-id="f1d6c-195">Infine, impostare il [proprietà ErrorMessage](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.errormessage(VS.80).aspx) "È necessario fornire il nome del prodotto" e [proprietà Text](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.text(VS.80).aspx) per "\*".</span><span class="sxs-lookup"><span data-stu-id="f1d6c-195">Finally, set the [ErrorMessage property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.errormessage(VS.80).aspx) to "You must provide the product's name" and the [Text property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.text(VS.80).aspx) to "\*".</span></span> <span data-ttu-id="f1d6c-196">Il `Text` valore della proprietà, se fornito, è il testo visualizzato dal controllo di convalida se la convalida non riesce.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-196">The `Text` property value, if provided, is the text that is displayed by the validation control if the validation fails.</span></span> <span data-ttu-id="f1d6c-197">Il `ErrorMessage` valore della proprietà, è necessario, viene utilizzato il controllo ValidationSummary; se il `Text` valore della proprietà viene omessa, il `ErrorMessage` valore della proprietà è anche il testo visualizzato dal controllo di convalida un input non valido.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-197">The `ErrorMessage` property value, which is required, is used by the ValidationSummary control; if the `Text` property value is omitted, the `ErrorMessage` property value is also the text displayed by the validation control on invalid input.</span></span>

<span data-ttu-id="f1d6c-198">Dopo l'impostazione di queste tre proprietà di RequiredFieldValidator la schermata dovrebbe essere simile alla figura 7.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-198">After setting these three properties of the RequiredFieldValidator, your screen should look similar to Figure 7.</span></span>


<span data-ttu-id="f1d6c-199">[![Impostare il RequiredFieldValidator ControlToValidate ErrorMessage e proprietà di testo](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image20.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="f1d6c-199">[![Set the RequiredFieldValidator's ControlToValidate, ErrorMessage, and Text Properties](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image20.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image19.png)</span></span>

<span data-ttu-id="f1d6c-200">**Figura 7**: impostare il RequiredFieldValidator `ControlToValidate`, `ErrorMessage`, e `Text` delle proprietà ([fare clic per visualizzare l'immagine ingrandita](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="f1d6c-200">**Figure 7**: Set the RequiredFieldValidator's `ControlToValidate`, `ErrorMessage`, and `Text` Properties ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image21.png))</span></span>


<span data-ttu-id="f1d6c-201">Con RequiredFieldValidator aggiunti il `ProductName` `EditItemTemplate`, che rimane consiste nell'aggiungere la convalida necessaria per tutti i `UnitPrice` `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-201">With the RequiredFieldValidator added to the `ProductName` `EditItemTemplate`, all that remains is to add the necessary validation to the `UnitPrice` `EditItemTemplate`.</span></span> <span data-ttu-id="f1d6c-202">Poiché per questa pagina, abbiamo deciso che, di `UnitPrice` è facoltativo quando modifica un record, non è necessario aggiungere un controllo RequiredFieldValidator.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-202">Since we've decided that, for this page, the `UnitPrice` is optional when editing a record, we don't need to add a RequiredFieldValidator.</span></span> <span data-ttu-id="f1d6c-203">Tuttavia, è necessario aggiungere un controllo CompareValidator per assicurarsi che il `UnitPrice`, se fornito, viene correttamente formattati come valuta ed è maggiore o uguale a 0.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-203">We do, however, need to add a CompareValidator to ensure that the `UnitPrice`, if supplied, is properly formatted as a currency and is greater than or equal to 0.</span></span>

<span data-ttu-id="f1d6c-204">Prima di aggiungere il controllo CompareValidator per il `UnitPrice` `EditItemTemplate`, è necessario innanzitutto modificare ID del controllo TextBox Web da `TextBox2` a `EditUnitPrice`.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-204">Before we add the CompareValidator to the `UnitPrice` `EditItemTemplate`, let's first change the TextBox Web control's ID from `TextBox2` to `EditUnitPrice`.</span></span> <span data-ttu-id="f1d6c-205">Dopo aver apportato questa modifica, aggiungere il controllo CompareValidator, l'impostazione relativa `ControlToValidate` proprietà `EditUnitPrice`, le `ErrorMessage` proprietà su "il prezzo deve essere maggiore o uguale a zero e non può includere il simbolo di valuta," e il relativo `Text` proprietà "\*".</span><span class="sxs-lookup"><span data-stu-id="f1d6c-205">After making this change, add the CompareValidator, setting its `ControlToValidate` property to `EditUnitPrice`, its `ErrorMessage` property to "The price must be greater than or equal to zero and cannot include the currency symbol", and its `Text` property to "\*".</span></span>

<span data-ttu-id="f1d6c-206">Per indicare che il `UnitPrice` valore deve essere maggiore o uguale a 0, impostare il controllo CompareValidator [proprietà Operator](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.operator(VS.80).aspx) a `GreaterThanEqual`, l'oggetto [proprietà ValueToCompare](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.valuetocompare(VS.80).aspx) "0" e il relativo [ Proprietà tipo](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basecomparevalidator.type.aspx) a `Currency`.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-206">To indicate that the `UnitPrice` value must be greater than or equal to 0, set the CompareValidator's [Operator property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.operator(VS.80).aspx) to `GreaterThanEqual`, its [ValueToCompare property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.valuetocompare(VS.80).aspx) to "0", and its [Type property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basecomparevalidator.type.aspx) to `Currency`.</span></span> <span data-ttu-id="f1d6c-207">Il seguente viene illustrata la sintassi dichiarativa di `UnitPrice` del TemplateField `EditItemTemplate` dopo avere apportate queste modifiche:</span><span class="sxs-lookup"><span data-stu-id="f1d6c-207">The following declarative syntax shows the `UnitPrice` TemplateField's `EditItemTemplate` after these changes have been made:</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample3.aspx)]

<span data-ttu-id="f1d6c-208">Dopo aver apportato queste modifiche, aprire la pagina in un browser.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-208">After making these changes, open the page in a browser.</span></span> <span data-ttu-id="f1d6c-209">Se si tenta di omettere il nome o immettere un valore del prezzo non valido durante la modifica di un prodotto, viene visualizzato un asterisco accanto la casella di testo.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-209">If you attempt to omit the name or enter an invalid price value when editing a product, an asterisk appears next to the textbox.</span></span> <span data-ttu-id="f1d6c-210">Come illustrato nella figura 8, che include il simbolo di valuta, ad esempio $19,95 un valore del prezzo è considerato non valido.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-210">As Figure 8 shows, a price value that includes the currency symbol such as $19.95 is considered invalid.</span></span> <span data-ttu-id="f1d6c-211">Il controllo CompareValidator `Currency` `Type` consente di separatori di cifre (ad esempio virgole o punti, a seconda delle impostazioni cultura) e un segno iniziale o meno, ma *non* consentire un simbolo di valuta.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-211">The CompareValidator's `Currency` `Type` allows for digit separators (such as commas or periods, depending on the culture settings) and a leading plus or minus sign, but does *not* permit a currency symbol.</span></span> <span data-ttu-id="f1d6c-212">Questo comportamento potrebbe perplex gli utenti quando esegue il rendering attualmente l'interfaccia per la modifica di `UnitPrice` utilizzando il formato di valuta.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-212">This behavior may perplex users as the editing interface currently renders the `UnitPrice` using the currency format.</span></span>

> [!NOTE]
> <span data-ttu-id="f1d6c-213">Tenere presente che nel *gli eventi associati ad inserimento, aggiornamento ed eliminazione* esercitazione viene impostato il BoundField `DataFormatString` proprietà `{0:c}` per formattarlo come valuta.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-213">Recall that in the *Events Associated with Inserting, Updating, and Deleting* tutorial we set the BoundField's `DataFormatString` property to `{0:c}` in order to format it as a currency.</span></span> <span data-ttu-id="f1d6c-214">Inoltre, viene impostato il `ApplyFormatInEditMode` proprietà su true, causando GridView di modifica della interfaccia per formattare il `UnitPrice` come valuta.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-214">Furthermore, we set the `ApplyFormatInEditMode` property to true, causing the GridView's editing interface to format the `UnitPrice` as a currency.</span></span> <span data-ttu-id="f1d6c-215">Quando si convertono i BoundField in un TemplateField, Visual Studio annotato queste impostazioni e la casella di testo formattato `Text` proprietà come valuta utilizzando la sintassi di associazione dati `<%# Bind("UnitPrice", "{0:c}") %>`.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-215">When converting the BoundField into a TemplateField, Visual Studio noted these settings and formatted the TextBox's `Text` property as a currency using the databinding syntax `<%# Bind("UnitPrice", "{0:c}") %>`.</span></span>


<span data-ttu-id="f1d6c-216">[![Viene visualizzato un asterisco accanto alle caselle di testo con Input non valido](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image23.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="f1d6c-216">[![An Asterisk Appears Next to the Textboxes with Invalid Input](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image23.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image22.png)</span></span>

<span data-ttu-id="f1d6c-217">**Figura 8**: un asterisco viene visualizzato Avanti per caselle di testo con Input non valido ([fare clic per visualizzare l'immagine ingrandita](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="f1d6c-217">**Figure 8**: An Asterisk Appears Next to the Textboxes with Invalid Input ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image24.png))</span></span>


<span data-ttu-id="f1d6c-218">Durante la convalida funziona come-è, l'utente deve rimuovere manualmente il simbolo di valuta, quando si modifica un record, che non è accettabile.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-218">While the validation works as-is, the user has to manually remove the currency symbol when editing a record, which is not acceptable.</span></span> <span data-ttu-id="f1d6c-219">Per risolvere questo problema, sono disponibili tre opzioni:</span><span class="sxs-lookup"><span data-stu-id="f1d6c-219">To remedy this, we have three options:</span></span>

1. <span data-ttu-id="f1d6c-220">Configurare il `EditItemTemplate` in modo che il `UnitPrice` valore non è formattato come valuta.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-220">Configure the `EditItemTemplate` so that the `UnitPrice` value is not formatted as a currency.</span></span>
2. <span data-ttu-id="f1d6c-221">Consente all'utente di immettere un simbolo di valuta rimuovendo il CompareValidator e sostituirlo con un RegularExpressionValidator che controlla in modo corretto per un valore di valuta formattato correttamente.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-221">Allow the user to enter a currency symbol by removing the CompareValidator and replacing it with a RegularExpressionValidator that properly checks for a properly formatted currency value.</span></span> <span data-ttu-id="f1d6c-222">In questo caso il problema è che l'espressione regolare per convalidare un valore di valuta non è vera e propria e richiede la scrittura di codice se si desidera incorporare impostazioni cultura.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-222">The problem here is that the regular expression to validate a currency value is not pretty and would require writing code if we wanted to incorporate culture settings.</span></span>
3. <span data-ttu-id="f1d6c-223">Rimuovere completamente il controllo di convalida e si basano sulla logica di convalida sul lato server in GridView `RowUpdating` gestore dell'evento.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-223">Remove the validation control altogether and rely on server-side validation logic in the GridView's `RowUpdating` event handler.</span></span>

<span data-ttu-id="f1d6c-224">Proviamo l'opzione #1 per questo esercizio.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-224">Let's go with option #1 for this exercise.</span></span> <span data-ttu-id="f1d6c-225">Attualmente il `UnitPrice` sia formattata come una valuta l'espressione di associazione dati per la casella di testo in a causa del `EditItemTemplate`: `<%# Bind("UnitPrice", "{0:c}") %>`.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-225">Currently the `UnitPrice` is formatted as a currency due to the databinding expression for the TextBox in the `EditItemTemplate`: `<%# Bind("UnitPrice", "{0:c}") %>`.</span></span> <span data-ttu-id="f1d6c-226">Modificare l'istruzione di operazione di binding in `Bind("UnitPrice", "{0:n2}")`, che formatta il risultato sotto forma di numero con due cifre di precisione.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-226">Change the Bind statement to `Bind("UnitPrice", "{0:n2}")`, which formats the result as a number with two digits of precision.</span></span> <span data-ttu-id="f1d6c-227">Può eseguire questa operazione direttamente tramite la sintassi dichiarativa oppure facendo clic sul collegamento Modifica DataBindings dal `EditUnitPrice` nella casella di testo il `UnitPrice` del TemplateField `EditItemTemplate` (vedere figure 9 e 10).</span><span class="sxs-lookup"><span data-stu-id="f1d6c-227">This can be done directly through the declarative syntax or by clicking on the Edit DataBindings link from the `EditUnitPrice` TextBox in the `UnitPrice` TemplateField's `EditItemTemplate` (see Figures 9 and 10).</span></span>


<span data-ttu-id="f1d6c-228">[![Fare clic sul collegamento Modifica DataBindings del controllo TextBox](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image26.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="f1d6c-228">[![Click on the TextBox's Edit DataBindings link](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image26.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image25.png)</span></span>

<span data-ttu-id="f1d6c-229">**Figura 9**: fare clic sul collegamento Modifica DataBindings la casella di testo ([fare clic per visualizzare l'immagine ingrandita](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="f1d6c-229">**Figure 9**: Click on the TextBox's Edit DataBindings link ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image27.png))</span></span>


<span data-ttu-id="f1d6c-230">[![Specificare l'identificatore di formato nell'istruzione di binding](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image29.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="f1d6c-230">[![Specify the Format Specifier in the Bind Statement](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image29.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image28.png)</span></span>

<span data-ttu-id="f1d6c-231">**Figura 10**: specificare l'identificatore di formato nel `Bind` istruzione ([fare clic per visualizzare l'immagine ingrandita](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="f1d6c-231">**Figure 10**: Specify the Format Specifier in the `Bind` Statement ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image30.png))</span></span>


<span data-ttu-id="f1d6c-232">Con questa modifica, il prezzo formattato nell'interfaccia di modifica include una virgola come separatore di gruppo e un punto come separatore decimale, ma esclude il simbolo di valuta.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-232">With this change, the formatted price in the editing interface includes commas as the group separator and a period as the decimal separator, but leaves off the currency symbol.</span></span>

> [!NOTE]
> <span data-ttu-id="f1d6c-233">Il `UnitPrice` `EditItemTemplate` non include un quale consentendo il postback insorgere e la logica di aggiornamento per iniziare.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-233">The `UnitPrice` `EditItemTemplate` doesn't include a RequiredFieldValidator, allowing the postback to ensue and the updating logic to commence.</span></span> <span data-ttu-id="f1d6c-234">Tuttavia, il `RowUpdating` copiato dal gestore dell'evento di *esaminando gli eventi associati con l'inserimento, aggiornamento ed eliminazione* esercitazione comprende un controllo a livello di programmazione che assicura che il `UnitPrice` viene fornito.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-234">However, the `RowUpdating` event handler copied over from the *Examining the Events Associated with Inserting, Updating, and Deleting* tutorial includes a programmatic check that ensures that the `UnitPrice` is provided.</span></span> <span data-ttu-id="f1d6c-235">È possibile rimuovere questa logica, lasciare il campo in come-, o aggiungere un controllo RequiredFieldValidator per il `UnitPrice` `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-235">Feel free to remove this logic, leave it in as-is, or add a RequiredFieldValidator to the `UnitPrice` `EditItemTemplate`.</span></span>


## <a name="step-4-summarizing-data-entry-problems"></a><span data-ttu-id="f1d6c-236">Passaggio 4: Riepilogo dei problemi nell'immissione dati</span><span class="sxs-lookup"><span data-stu-id="f1d6c-236">Step 4: Summarizing Data Entry Problems</span></span>

<span data-ttu-id="f1d6c-237">Oltre ai controlli di convalida di cinque, ASP.NET include il [controllo ValidationSummary](https://msdn.microsoft.com/library/f9h59855(VS.80).aspx), che consente di visualizzare il `ErrorMessage` s tali controlli di convalida rilevati dati non validi.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-237">In addition to the five validation controls, ASP.NET includes the [ValidationSummary control](https://msdn.microsoft.com/library/f9h59855(VS.80).aspx), which displays the `ErrorMessage` s of those validation controls that detected invalid data.</span></span> <span data-ttu-id="f1d6c-238">Questo riepilogo dati possono essere visualizzati come testo nella pagina web o tramite una finestra di messaggio modale, sul lato client.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-238">This summary data can be displayed as text on the web page or through a modal, client-side messagebox.</span></span> <span data-ttu-id="f1d6c-239">Consente di migliorare questa esercitazione per includere un messagebox sul lato client, il riepilogo di eventuali problemi di convalida.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-239">Let's enhance this tutorial to include a client-side messagebox summarizing any validation problems.</span></span>

<span data-ttu-id="f1d6c-240">A tale scopo, trascinare un controllo ValidationSummary dalla casella degli strumenti nella finestra di progettazione.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-240">To accomplish this, drag a ValidationSummary control from the Toolbox onto the Designer.</span></span> <span data-ttu-id="f1d6c-241">Il percorso del controllo di convalida non è importante, poiché si intende configurare in modo da visualizzare solo il riepilogo come un messagebox.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-241">The location of the Validation control doesn't really matter, since we're going to configure it to only display the summary as a messagebox.</span></span> <span data-ttu-id="f1d6c-242">Dopo aver aggiunto il controllo, impostare il relativo [proprietà ShowSummary](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showsummary(VS.80).aspx) per `false` e il relativo [proprietà ShowMessageBox](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showmessagebox(VS.80).aspx) a `true`.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-242">After adding the control, set its [ShowSummary property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showsummary(VS.80).aspx) to `false` and its [ShowMessageBox property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showmessagebox(VS.80).aspx) to `true`.</span></span> <span data-ttu-id="f1d6c-243">Con l'aggiunta, eventuali errori di convalida sono riepilogati in una finestra di messaggio sul lato client.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-243">With this addition, any validation errors are summarized in a client-side messagebox.</span></span>


<span data-ttu-id="f1d6c-244">[![Gli errori di convalida sono riepilogati in Messagebox lato Client](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image32.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="f1d6c-244">[![The Validation Errors are Summarized in a Client-Side Messagebox](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image32.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image31.png)</span></span>

<span data-ttu-id="f1d6c-245">**Figura 11**: di errori di convalida sono riepilogati in Messagebox lato Client ([fare clic per visualizzare l'immagine ingrandita](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="f1d6c-245">**Figure 11**: The Validation Errors are Summarized in a Client-Side Messagebox ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image33.png))</span></span>


## <a name="step-5-adding-the-validation-controls-to-the-detailsviewsinsertitemtemplate"></a><span data-ttu-id="f1d6c-246">Passaggio 5: Aggiunta di controlli di convalida al controllo DetailsView.`InsertItemTemplate`</span><span class="sxs-lookup"><span data-stu-id="f1d6c-246">Step 5: Adding the Validation Controls to the DetailsView's`InsertItemTemplate`</span></span>

<span data-ttu-id="f1d6c-247">Per questa esercitazione è comunque per aggiungere i controlli di convalida all'interfaccia di inserimento di DetailsView.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-247">All that remains for this tutorial is to add the validation controls to the DetailsView's inserting interface.</span></span> <span data-ttu-id="f1d6c-248">Il processo di aggiunta di controlli di convalida per i modelli di DetailsView è identico a quello esaminato nel passaggio 3; Pertanto, si sarà anche per l'attività in questo passaggio.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-248">The process of adding validation controls to the DetailsView's templates is identical to that examined in Step 3; therefore, we'll breeze through the task in this step.</span></span> <span data-ttu-id="f1d6c-249">Come è stato fatto con il controllo GridView `EditItemTemplate` s, si consiglia di rinominare il `ID` s delle caselle di testo di nondescript `TextBox1` e `TextBox2` a `InsertProductName` e `InsertUnitPrice`.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-249">As we did with the GridView's `EditItemTemplate` s, I encourage you to rename the `ID` s of the TextBoxes from the nondescript `TextBox1` and `TextBox2` to `InsertProductName` and `InsertUnitPrice`.</span></span>

<span data-ttu-id="f1d6c-250">Aggiungere un controllo RequiredFieldValidator per il `ProductName` `InsertItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-250">Add a RequiredFieldValidator to the `ProductName` `InsertItemTemplate`.</span></span> <span data-ttu-id="f1d6c-251">Impostare il `ControlToValidate` per il `ID` della casella di testo nel modello, il `Text` proprietà "\*" e il relativo `ErrorMessage` proprietà su "È necessario fornire il nome del prodotto".</span><span class="sxs-lookup"><span data-stu-id="f1d6c-251">Set the `ControlToValidate` to the `ID` of the TextBox in the template, its `Text` property to "\*" and its `ErrorMessage` property to "You must provide the product's name".</span></span>

<span data-ttu-id="f1d6c-252">Poiché il `UnitPrice` è richiesto per questa pagina quando si aggiunge un nuovo record, aggiungere un controllo RequiredFieldValidator per il `UnitPrice` `InsertItemTemplate`, l'impostazione relativa `ControlToValidate`, `Text`, e `ErrorMessage` proprietà in modo appropriato.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-252">Since the `UnitPrice` is required for this page when adding a new record, add a RequiredFieldValidator to the `UnitPrice` `InsertItemTemplate`, setting its `ControlToValidate`, `Text`, and `ErrorMessage` properties appropriately.</span></span> <span data-ttu-id="f1d6c-253">Infine, aggiungere un controllo CompareValidator per il `UnitPrice` `InsertItemTemplate` , nonché la configurazione relativa `ControlToValidate`, `Text`, `ErrorMessage`, `Type`, `Operator`, e `ValueToCompare` proprietà esattamente come è stato eseguito con il `UnitPrice`del CompareValidator in GridView `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-253">Finally, add a CompareValidator to the `UnitPrice` `InsertItemTemplate` as well, configuring its `ControlToValidate`, `Text`, `ErrorMessage`, `Type`, `Operator`, and `ValueToCompare` properties just like we did with the `UnitPrice`'s CompareValidator in the GridView's `EditItemTemplate`.</span></span>

<span data-ttu-id="f1d6c-254">Dopo l'aggiunta di questi controlli di convalida, un nuovo prodotto non può essere aggiunti al sistema se non viene specificato il nome o se il prezzo è un numero negativo o formattato in modo non valido.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-254">After adding these validation controls, a new product cannot be added to the system if its name is not supplied or if its price is a negative number or illegally formatted.</span></span>


<span data-ttu-id="f1d6c-255">[![La logica di convalida è stato aggiunto all'interfaccia di inserimento del controllo DetailsView.](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image35.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="f1d6c-255">[![Validation Logic has been Added to the DetailsView's Inserting Interface](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image35.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image34.png)</span></span>

<span data-ttu-id="f1d6c-256">**Figura 12**: è stata aggiunta logica di convalida all'interfaccia del controllo DetailsView inserimento di ([fare clic per visualizzare l'immagine ingrandita](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image36.png))</span><span class="sxs-lookup"><span data-stu-id="f1d6c-256">**Figure 12**: Validation Logic has been Added to the DetailsView's Inserting Interface ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image36.png))</span></span>


## <a name="step-6-partitioning-the-validation-controls-into-validation-groups"></a><span data-ttu-id="f1d6c-257">Passaggio 6: Partizionamento dei controlli di convalida in gruppi di convalida</span><span class="sxs-lookup"><span data-stu-id="f1d6c-257">Step 6: Partitioning the Validation Controls Into Validation Groups</span></span>

<span data-ttu-id="f1d6c-258">La pagina è costituita da due set logicamente diversi controlli di convalida: quelli che corrispondono a GridView della modifica dell'interfaccia e quelli che corrispondono al controllo DetailsView dell'inserimento dell'interfaccia.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-258">Our page consists of two logically disparate sets of validation controls: those that correspond to the GridView's editing interface and those that correspond to the DetailsView's inserting interface.</span></span> <span data-ttu-id="f1d6c-259">Per impostazione predefinita, quando si verifica un postback *tutti* vengono controllati i controlli di convalida della pagina.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-259">By default, when a postback occurs *all* validation controls on the page are checked.</span></span> <span data-ttu-id="f1d6c-260">Tuttavia, quando si modifica un record non vogliamo controlli di convalida dell'interfaccia inserimento del controllo DetailsView da convalidare.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-260">However, when editing a record we don't want the DetailsView's inserting interface's validation controls to validate.</span></span> <span data-ttu-id="f1d6c-261">Figura 13 illustra il problema corrente quando un utente sta modificando un prodotto con i valori validi perfettamente, facendo clic su Update provoca un errore di convalida perché i valori di nome e il prezzo nell'interfaccia di inserimento sono vuoti.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-261">Figure 13 illustrates our current dilemma when a user is editing a product with perfectly legal values, clicking Update causes a validation error because the name and price values in the inserting interface are blank.</span></span>


<span data-ttu-id="f1d6c-262">[![L'aggiornamento di un prodotto fa sì che i controlli di convalida dell'interfaccia inserimento a fuoco](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image38.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="f1d6c-262">[![Updating a Product Causes the Inserting Interface's Validation Controls to Fire](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image38.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image37.png)</span></span>

<span data-ttu-id="f1d6c-263">**Figura 13**: l'aggiornamento di un prodotto comporta il controlli dell'interfaccia inserimento di convalida vengono attivati ([fare clic per visualizzare l'immagine ingrandita](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image39.png))</span><span class="sxs-lookup"><span data-stu-id="f1d6c-263">**Figure 13**: Updating a Product Causes the Inserting Interface's Validation Controls to Fire ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image39.png))</span></span>


<span data-ttu-id="f1d6c-264">I controlli di convalida in ASP.NET 2.0 possono essere partizionati in gruppi di convalida tramite i relativi `ValidationGroup` proprietà.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-264">The validation controls in ASP.NET 2.0 can be partitioned into validation groups through their `ValidationGroup` property.</span></span> <span data-ttu-id="f1d6c-265">Per associare un set di controlli di convalida in un gruppo, è sufficiente impostare i relativi `ValidationGroup` proprietà sullo stesso valore.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-265">To associate a set of validation controls in a group, simply set their `ValidationGroup` property to the same value.</span></span> <span data-ttu-id="f1d6c-266">Per questa esercitazione, impostare il `ValidationGroup` le proprietà dei controlli di convalida in GridView TemplateFields a `EditValidationControls` e `ValidationGroup` proprietà TemplateFields del controllo DetailsView per `InsertValidationControls`.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-266">For our tutorial, set the `ValidationGroup` properties of the validation controls in the GridView's TemplateFields to `EditValidationControls` and the `ValidationGroup` properties of the DetailsView's TemplateFields to `InsertValidationControls`.</span></span> <span data-ttu-id="f1d6c-267">Queste modifiche possono essere eseguite direttamente nel markup dichiarativo o tramite la finestra Proprietà quando si utilizza la finestra di progettazione modificare l'interfaccia di modello.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-267">These changes can be done directly in the declarative markup or through the Properties window when using the Designer's edit template interface.</span></span>

<span data-ttu-id="f1d6c-268">Oltre alla convalida controlli, il pulsante e correlati a pulsanti in ASP.NET 2.0 inoltre includere un `ValidationGroup` proprietà.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-268">In addition to the validation controls, the Button and Button-related controls in ASP.NET 2.0 also include a `ValidationGroup` property.</span></span> <span data-ttu-id="f1d6c-269">Validator del gruppo di convalida viene verificato la validità solo quando un postback è causato da un pulsante che ha lo stesso `ValidationGroup` l'impostazione della proprietà.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-269">A validation group's validators are checked for validity only when a postback is induced by a Button that has the same `ValidationGroup` property setting.</span></span> <span data-ttu-id="f1d6c-270">Ad esempio, in ordine per il pulsante Inserisci di DetailsView attivare il `InsertValidationControls` gruppo di convalida, è necessario impostare il CommandField `ValidationGroup` proprietà `InsertValidationControls` (vedere Figura 14).</span><span class="sxs-lookup"><span data-stu-id="f1d6c-270">For example, in order for the DetailsView's Insert button to trigger the `InsertValidationControls` validation group we need to set the CommandField's `ValidationGroup` property to `InsertValidationControls` (see Figure 14).</span></span> <span data-ttu-id="f1d6c-271">Inoltre, impostare il controllo GridView del CommandField `ValidationGroup` proprietà `EditValidationControls`.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-271">Additionally, set the GridView's CommandField's `ValidationGroup` property to `EditValidationControls`.</span></span>


<span data-ttu-id="f1d6c-272">[![Set di DetailsView di proprietà del CommandField ValidationGroup InsertValidationControls](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image41.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image40.png)</span><span class="sxs-lookup"><span data-stu-id="f1d6c-272">[![Set the DetailsView's CommandField's ValidationGroup property to InsertValidationControls](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image41.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image40.png)</span></span>

<span data-ttu-id="f1d6c-273">**Figura 14**: impostare il controllo DetailsView del CommandField `ValidationGroup` proprietà `InsertValidationControls` ([fare clic per visualizzare l'immagine ingrandita](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image42.png))</span><span class="sxs-lookup"><span data-stu-id="f1d6c-273">**Figure 14**: Set the DetailsView's CommandField's `ValidationGroup` property to `InsertValidationControls` ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image42.png))</span></span>


<span data-ttu-id="f1d6c-274">Dopo aver apportato queste modifiche, il controllo DetailsView GridView TemplateFields e CommandFields dovrebbe essere simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="f1d6c-274">After these changes, the DetailsView and GridView's TemplateFields and CommandFields should look similar to the following:</span></span>

<span data-ttu-id="f1d6c-275">TemplateFields e CommandField del controllo DetailsView.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-275">The DetailsView's TemplateFields and CommandField</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample4.aspx)]

<span data-ttu-id="f1d6c-276">Il GridView CommandField e TemplateFields</span><span class="sxs-lookup"><span data-stu-id="f1d6c-276">The GridView's CommandField and TemplateFields</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample5.aspx)]

<span data-ttu-id="f1d6c-277">A questo punto i controlli di convalida specifica della modifica attivano solo quando viene selezionato il pulsante di aggiornamento del controllo GridView e spegnimento incendi di controlli di convalida specifica insert solo quando si fa clic sul pulsante Inserisci di DetailsView, risolto il problema evidenziato da figura 13.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-277">At this point the edit-specific validation controls fire only when the GridView's Update button is clicked and the insert-specific validation controls fire only when the DetailsView's Insert button is clicked, resolving the problem highlighted by Figure 13.</span></span> <span data-ttu-id="f1d6c-278">Tuttavia, con questa modifica del controllo ValidationSummary non viene più visualizzato quando si immettono dati non validi.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-278">However, with this change our ValidationSummary control no longer displays when entering invalid data.</span></span> <span data-ttu-id="f1d6c-279">Il controllo ValidationSummary contiene anche un `ValidationGroup` solo Mostra informazioni di riepilogo per i controlli di convalida nel relativo gruppo di convalida e di proprietà.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-279">The ValidationSummary control also contains a `ValidationGroup` property and only shows summary information for those validation controls in its validation group.</span></span> <span data-ttu-id="f1d6c-280">Pertanto, è necessario disporre di due controlli di convalida in questa pagina, uno per il `InsertValidationControls` gruppo di convalida e uno per `EditValidationControls`.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-280">Therefore, we need to have two validation controls in this page, one for the `InsertValidationControls` validation group and one for `EditValidationControls`.</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample6.aspx)]

<span data-ttu-id="f1d6c-281">Con l'aggiunta è stata completata l'esercitazione.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-281">With this addition our tutorial is complete!</span></span>

## <a name="summary"></a><span data-ttu-id="f1d6c-282">Riepilogo</span><span class="sxs-lookup"><span data-stu-id="f1d6c-282">Summary</span></span>

<span data-ttu-id="f1d6c-283">Mentre BoundField può fornire sia un'interfaccia di inserimento e modifica, l'interfaccia non è personalizzabile.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-283">While BoundFields can provide both an inserting and editing interface, the interface is not customizable.</span></span> <span data-ttu-id="f1d6c-284">In genere, si desidera aggiungere i controlli di convalida per la modifica e l'inserimento di interfaccia per assicurarsi che l'utente immette input obbligatori in un formato valido.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-284">Commonly, we want to add validation controls to the editing and inserting interface to ensure that the user enters required inputs in a legal format.</span></span> <span data-ttu-id="f1d6c-285">A tale scopo è necessario convertire il BoundField TemplateFields e aggiungere i controlli di convalida per i modelli appropriati.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-285">To accomplish this we must convert the BoundFields into TemplateFields and add the validation controls to the appropriate template(s).</span></span> <span data-ttu-id="f1d6c-286">In questa esercitazione è stato esteso l'esempio dal *esaminando gli eventi associati con l'inserimento, aggiornamento ed eliminazione* dell'esercitazione, aggiunta di controlli di convalida al controllo DetailsView inserimento di interfaccia e il controllo GridView interfaccia di modifica.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-286">In this tutorial we extended the example from the *Examining the Events Associated with Inserting, Updating, and Deleting* tutorial, adding validation controls to both the DetailsView's inserting interface and the GridView's editing interface.</span></span> <span data-ttu-id="f1d6c-287">Inoltre, è stato illustrato come visualizzare le informazioni di riepilogo di convalida mediante il controllo ValidationSummary e su come partizionare i controlli di convalida della pagina in gruppi distinti di convalida.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-287">Moreover, we saw how to display summary validation information using the ValidationSummary control and how to partition the validation controls on the page into distinct validation groups.</span></span>

<span data-ttu-id="f1d6c-288">Come abbiamo visto in questa esercitazione, TemplateFields consente le interfacce di modificare e l'inserimento di essere ampliate per includere i controlli di convalida.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-288">As we saw in this tutorial, TemplateFields allow the editing and inserting interfaces to be augmented to include validation controls.</span></span> <span data-ttu-id="f1d6c-289">TemplateFields inoltre può essere esteso per includere i controlli Web di input aggiuntivi, abilitare la casella di testo da sostituire con un controllo Web più adatto.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-289">TemplateFields can also be extended to include additional input Web controls, enabling the TextBox to be replaced by a more suitable Web control.</span></span> <span data-ttu-id="f1d6c-290">Nell'esercitazione successiva vedremo come sostituire il controllo TextBox con controllo DropDownList associato a dati, che è ideale per la modifica di una chiave esterna (ad esempio `CategoryID` o `SupplierID` nel `Products` tabella).</span><span class="sxs-lookup"><span data-stu-id="f1d6c-290">In our next tutorial we'll see how to replace the TextBox control with a data-bound DropDownList control, which is ideal when editing a foreign key (such as `CategoryID` or `SupplierID` in the `Products` table).</span></span>

<span data-ttu-id="f1d6c-291">Buona programmazione!</span><span class="sxs-lookup"><span data-stu-id="f1d6c-291">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="f1d6c-292">Informazioni sull'autore</span><span class="sxs-lookup"><span data-stu-id="f1d6c-292">About the Author</span></span>

<span data-ttu-id="f1d6c-293">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), l'autore di sette libri e fondatore di [4GuysFromRolla](http://www.4guysfromrolla.com), ha lavorato con tecnologie Web di Microsoft dal 1998.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-293">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="f1d6c-294">Scott funziona come un consulente trainer e writer.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-294">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="f1d6c-295">Il suo ultimo libro è [ *SAM insegna manualmente ASP.NET 2.0 nelle 24 ore*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="f1d6c-295">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="f1d6c-296">Egli può essere raggiunto al [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) o sul suo blog, cui è reperibile in [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="f1d6c-296">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="f1d6c-297">Ringraziamenti speciali</span><span class="sxs-lookup"><span data-stu-id="f1d6c-297">Special Thanks To</span></span>

<span data-ttu-id="f1d6c-298">Questa serie di esercitazioni è stata esaminata da diversi validi revisori.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-298">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="f1d6c-299">Lead revisori per questa esercitazione sono stati Liz Shulok e Zack Jones.</span><span class="sxs-lookup"><span data-stu-id="f1d6c-299">Lead reviewers for this tutorial were Liz Shulok and Zack Jones.</span></span> <span data-ttu-id="f1d6c-300">Se si è interessati my prossimi articoli MSDN?</span><span class="sxs-lookup"><span data-stu-id="f1d6c-300">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="f1d6c-301">In caso affermativo, Inviami una riga alla [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="f1d6c-301">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="f1d6c-302">[Precedente](handling-bll-and-dal-level-exceptions-in-an-asp-net-page-cs.md)
> [Successivo](customizing-the-data-modification-interface-cs.md)</span><span class="sxs-lookup"><span data-stu-id="f1d6c-302">[Previous](handling-bll-and-dal-level-exceptions-in-an-asp-net-page-cs.md)
[Next](customizing-the-data-modification-interface-cs.md)</span></span>
