---
uid: web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-2
title: Guida introduttiva a Database di Entity Framework 4.0 prima di tutto e ASP.NET 4 di Web Form - parte 2 | Documenti Microsoft
author: tdykstra
description: L'applicazione web di Contoso University esempio viene illustrato come creare applicazioni Web Form ASP.NET tramite Entity Framework. È l'applicazione di esempio...
ms.author: aspnetcontent
manager: wpickett
ms.date: 12/03/2010
ms.topic: article
ms.assetid: fb63a326-a4ae-4b0c-a4f5-412327197216
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-2
msc.type: authoredcontent
ms.openlocfilehash: a6c95a92aa77e2bb73aa513a207e0469d1aedbd2
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/06/2018
---
<a name="getting-started-with-entity-framework-40-database-first-and-aspnet-4-web-forms---part-2"></a><span data-ttu-id="cc1e0-104">Guida introduttiva a Database di Entity Framework 4.0 prima di tutto e form ASP.NET Web 4 - parte 2</span><span class="sxs-lookup"><span data-stu-id="cc1e0-104">Getting Started with Entity Framework 4.0 Database First and ASP.NET 4 Web Forms - Part 2</span></span>
====================
<span data-ttu-id="cc1e0-105">da [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="cc1e0-105">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

> <span data-ttu-id="cc1e0-106">L'applicazione web di Contoso University esempio viene illustrato come creare applicazioni Web Form ASP.NET utilizzando il Entity Framework 4.0 e Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-106">The Contoso University sample web application demonstrates how to create ASP.NET Web Forms applications using the Entity Framework 4.0 and Visual Studio 2010.</span></span> <span data-ttu-id="cc1e0-107">Per informazioni sulle serie di esercitazioni, vedere [la prima esercitazione di serie](the-entity-framework-and-aspnet-getting-started-part-1.md)</span><span class="sxs-lookup"><span data-stu-id="cc1e0-107">For information about the tutorial series, see [the first tutorial in the series](the-entity-framework-and-aspnet-getting-started-part-1.md)</span></span>


## <a name="the-entitydatasource-control"></a><span data-ttu-id="cc1e0-108">Il controllo EntityDataSource</span><span class="sxs-lookup"><span data-stu-id="cc1e0-108">The EntityDataSource Control</span></span>

<span data-ttu-id="cc1e0-109">Nell'esercitazione precedente è stato creato un sito web, un database e un modello di dati.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-109">In the previous tutorial you created a web site, a database, and a data model.</span></span> <span data-ttu-id="cc1e0-110">In questa esercitazione è possibile utilizzare con il `EntityDataSource` controllo fornita da ASP.NET per rendere più facile da utilizzare con un modello di dati di Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-110">In this tutorial you work with the `EntityDataSource` control that ASP.NET provides in order to make it easy to work with an Entity Framework data model.</span></span> <span data-ttu-id="cc1e0-111">Si creerà un `GridView` controllo per visualizzare e modificare i dati degli studenti, un `DetailsView` controllo per l'aggiunta di nuovi studenti e un `DropDownList` controllo per la selezione di un reparto (che verranno usati in un secondo momento per la visualizzazione dei corsi associati).</span><span class="sxs-lookup"><span data-stu-id="cc1e0-111">You'll create a `GridView` control for displaying and editing student data, a `DetailsView` control for adding new students, and a `DropDownList` control for selecting a department (which you'll use later for displaying associated courses).</span></span>

<span data-ttu-id="cc1e0-112">[![Image20](the-entity-framework-and-aspnet-getting-started-part-2/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="cc1e0-112">[![Image20](the-entity-framework-and-aspnet-getting-started-part-2/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image1.png)</span></span>

<span data-ttu-id="cc1e0-113">[![Image09](the-entity-framework-and-aspnet-getting-started-part-2/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="cc1e0-113">[![Image09](the-entity-framework-and-aspnet-getting-started-part-2/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image3.png)</span></span>

<span data-ttu-id="cc1e0-114">[![image18](the-entity-framework-and-aspnet-getting-started-part-2/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="cc1e0-114">[![Image18](the-entity-framework-and-aspnet-getting-started-part-2/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image5.png)</span></span>

<span data-ttu-id="cc1e0-115">Si noti che in questa applicazione è non verrà aggiunta la convalida dell'input alle pagine in cui aggiornano il database e tra la gestione degli errori non sarà così solido come potrebbe essere necessario eseguire in un'applicazione di produzione.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-115">Note that in this application you won't be adding input validation to pages that update the database, and some of the error handling will not be as robust as would be required in a production application.</span></span> <span data-ttu-id="cc1e0-116">Che mantiene l'esercitazione con stato attivo su Entity Framework e ne troppo lunga.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-116">That keeps the tutorial focused on the Entity Framework and keeps it from getting too long.</span></span> <span data-ttu-id="cc1e0-117">Per informazioni dettagliate su come aggiungere queste funzionalità a un'applicazione, vedere [convalida dell'Input utente in ASP.NET Web Pages](https://msdn.microsoft.com/library/7kh55542.aspx) e [gestione degli errori nelle pagine ASP.NET e applicazioni](https://msdn.microsoft.com/library/w16865z6.aspx).</span><span class="sxs-lookup"><span data-stu-id="cc1e0-117">For details about how to add these features to your application, see [Validating User Input in ASP.NET Web Pages](https://msdn.microsoft.com/library/7kh55542.aspx) and [Error Handling in ASP.NET Pages and Applications](https://msdn.microsoft.com/library/w16865z6.aspx).</span></span>

## <a name="adding-and-configuring-the-entitydatasource-control"></a><span data-ttu-id="cc1e0-118">Aggiunta e configurazione del controllo EntityDataSource</span><span class="sxs-lookup"><span data-stu-id="cc1e0-118">Adding and Configuring the EntityDataSource Control</span></span>

<span data-ttu-id="cc1e0-119">Iniziare configurando un `EntityDataSource` controllo leggere `Person` entità dal `People` set di entità.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-119">You'll begin by configuring an `EntityDataSource` control to read `Person` entities from the `People` entity set.</span></span>

<span data-ttu-id="cc1e0-120">Assicurarsi che Visual Studio aprire e che sta utilizzando il progetto è creata nella parte 1.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-120">Make sure you have Visual Studio open and that you're working with the project you created in part 1.</span></span> <span data-ttu-id="cc1e0-121">Se ancora stato compilato il progetto dopo la creazione del modello di dati o dopo l'ultima modifica apportata, compilare il progetto ora.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-121">If you haven't built the project since you created the data model or since the last change you made to it, build the project now.</span></span> <span data-ttu-id="cc1e0-122">Modifiche al modello di dati non sono disponibili nella finestra di progettazione fino a quando non viene compilato il progetto.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-122">Changes to the data model are not made available to the designer until the project is built.</span></span>

<span data-ttu-id="cc1e0-123">Creare una nuova pagina web utilizzando il **Web Form mediante pagina Master** , modello e denominarlo *Students.aspx*.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-123">Create a new web page using the **Web Form using Master Page** template, and name it *Students.aspx*.</span></span>

<span data-ttu-id="cc1e0-124">[![Image23](the-entity-framework-and-aspnet-getting-started-part-2/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="cc1e0-124">[![Image23](the-entity-framework-and-aspnet-getting-started-part-2/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image7.png)</span></span>

<span data-ttu-id="cc1e0-125">Specificare *Site. master* come pagina master.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-125">Specify *Site.Master* as the master page.</span></span> <span data-ttu-id="cc1e0-126">Tutte le pagine create per queste esercitazioni verranno utilizzare questa pagina master.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-126">All of the pages you create for these tutorials will use this master page.</span></span>

<span data-ttu-id="cc1e0-127">[![Image24](the-entity-framework-and-aspnet-getting-started-part-2/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="cc1e0-127">[![Image24](the-entity-framework-and-aspnet-getting-started-part-2/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image9.png)</span></span>

<span data-ttu-id="cc1e0-128">In **origine** visualizzare, aggiungere un `h2` intestazione per il `Content` controllo denominato `Content2`, come illustrato nell'esempio seguente:</span><span class="sxs-lookup"><span data-stu-id="cc1e0-128">In **Source** view, add an `h2` heading to the `Content` control named `Content2`, as shown in the following example:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample1.aspx)]

<span data-ttu-id="cc1e0-129">Dal **dati** scheda della finestra il **della casella degli strumenti**, trascinare un `EntityDataSource` alla pagina, rilasciarla sotto l'intestazione e modificare l'ID `StudentsEntityDataSource`:</span><span class="sxs-lookup"><span data-stu-id="cc1e0-129">From the **Data** tab of the **Toolbox**, drag an `EntityDataSource` control to the page, drop it below the heading, and change the ID to `StudentsEntityDataSource`:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample2.aspx)]

<span data-ttu-id="cc1e0-130">Passare a **progettazione** consente di visualizzare, fare clic smart tag del controllo origine dati e quindi fare clic su **Configura origine dati** per avviare il **Configura origine dati** procedura guidata.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-130">Switch to **Design** view, click the data source control's smart tag, and then click **Configure Data Source** to launch the **Configure Data Source** wizard.</span></span>

<span data-ttu-id="cc1e0-131">[![Image01](the-entity-framework-and-aspnet-getting-started-part-2/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="cc1e0-131">[![Image01](the-entity-framework-and-aspnet-getting-started-part-2/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image11.png)</span></span>

<span data-ttu-id="cc1e0-132">Nel **configurare ObjectContext** passaggio della procedura guidata, seleziona **SchoolEntities** come valore per **connessione denominata**e selezionare **SchoolEntities**come il **DefaultContainerName** valore.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-132">In the **Configure ObjectContext** wizard step, select **SchoolEntities** as the value for **Named Connection**, and select **SchoolEntities** as the **DefaultContainerName** value.</span></span> <span data-ttu-id="cc1e0-133">Scegliere quindi **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-133">Then click **Next**.</span></span>

<span data-ttu-id="cc1e0-134">[![Image02](the-entity-framework-and-aspnet-getting-started-part-2/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="cc1e0-134">[![Image02](the-entity-framework-and-aspnet-getting-started-part-2/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image13.png)</span></span>

<span data-ttu-id="cc1e0-135">Nota: Se viene visualizzato nella finestra di dialogo seguente a questo punto, è necessario compilare il progetto prima di procedere.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-135">Note: If you get the following dialog box at this point, you have to build the project before proceeding.</span></span>

<span data-ttu-id="cc1e0-136">[![Image25](the-entity-framework-and-aspnet-getting-started-part-2/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="cc1e0-136">[![Image25](the-entity-framework-and-aspnet-getting-started-part-2/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image15.png)</span></span>

<span data-ttu-id="cc1e0-137">Nel **Configura selezione dati** passaggio seleziona **persone** come valore per **EntitySetName**.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-137">In the **Configure Data Selection** step, select **People** as the value for **EntitySetName**.</span></span> <span data-ttu-id="cc1e0-138">In **selezionare**, assicurarsi che il **seleziona** ll casella di controllo è selezionata.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-138">Under **Select**, make sure the **Select A** ll check box is selected.</span></span> <span data-ttu-id="cc1e0-139">Selezionare quindi le opzioni per abilitare l'aggiornamento ed eliminazione.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-139">Then select the options to enable update and delete.</span></span> <span data-ttu-id="cc1e0-140">Al termine, fare clic su **fine**.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-140">When you're done, click **Finish**.</span></span>

<span data-ttu-id="cc1e0-141">[![Image03](the-entity-framework-and-aspnet-getting-started-part-2/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="cc1e0-141">[![Image03](the-entity-framework-and-aspnet-getting-started-part-2/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image17.png)</span></span>

## <a name="configuring-database-rules-to-allow-deletion"></a><span data-ttu-id="cc1e0-142">Configurazione delle regole di Database per consentire l'eliminazione</span><span class="sxs-lookup"><span data-stu-id="cc1e0-142">Configuring Database Rules to Allow Deletion</span></span>

<span data-ttu-id="cc1e0-143">Verrà creata una pagina che consente agli utenti di eliminare studenti di `Person` tabella che dispone di tre relazioni con altre tabelle (`Course`, `StudentGrade`, e `OfficeAssignment`).</span><span class="sxs-lookup"><span data-stu-id="cc1e0-143">You'll be creating a page that lets users delete students from the `Person` table, which has three relationships with other tables (`Course`, `StudentGrade`, and `OfficeAssignment`).</span></span> <span data-ttu-id="cc1e0-144">Per impostazione predefinita, il database verrà impedire l'eliminazione di una riga in `Person` se esistono righe correlate in una delle altre tabelle.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-144">By default, the database will prevent you from deleting a row in `Person` if there are related rows in one of the other tables.</span></span> <span data-ttu-id="cc1e0-145">È possibile eliminare manualmente le righe correlate prima di tutto, oppure è possibile configurare il database per eliminarli automaticamente quando si elimina un `Person` riga.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-145">You can manually delete the related rows first, or you can configure the database to delete them automatically when you delete a `Person` row.</span></span> <span data-ttu-id="cc1e0-146">Per i record dello studente in questa esercitazione, si configurerà il database per eliminare automaticamente i dati correlati.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-146">For student records in this tutorial, you'll configure the database to delete the related data automatically.</span></span> <span data-ttu-id="cc1e0-147">Poiché gli studenti possono avere le righe correlate solo nel `StudentGrade` tabella, è necessario configurare solo una delle tre relazioni.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-147">Because students can have related rows only in the `StudentGrade` table, you need to configure only one of the three relationships.</span></span>

<span data-ttu-id="cc1e0-148">Se si usa il *School. mdf* file sia stato scaricato dal progetto che va inserito in questa esercitazione, è possibile ignorare questa sezione perché queste modifiche alla configurazione già eseguiti.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-148">If you're using the *School.mdf* file that you downloaded from the project that goes with this tutorial, you can skip this section because these configuration changes have already been done.</span></span> <span data-ttu-id="cc1e0-149">Se è stato creato il database eseguendo uno script, è possibile configurare il database eseguendo le procedure seguenti.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-149">If you created the database by running a script, configure the database by performing the following procedures.</span></span>

<span data-ttu-id="cc1e0-150">In **Esplora Server**, aprire il diagramma di database creato nella parte 1.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-150">In **Server Explorer**, open the database diagram that you created in part 1.</span></span> <span data-ttu-id="cc1e0-151">Fare clic sulla relazione tra `Person` e `StudentGrade` (la riga tra le tabelle), quindi selezionare **proprietà**.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-151">Right-click the relationship between `Person` and `StudentGrade` (the line between tables), and then select **Properties**.</span></span>

<span data-ttu-id="cc1e0-152">[![Image04](the-entity-framework-and-aspnet-getting-started-part-2/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="cc1e0-152">[![Image04](the-entity-framework-and-aspnet-getting-started-part-2/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image19.png)</span></span>

<span data-ttu-id="cc1e0-153">Nel **proprietà** finestra, espandere **specifica INSERT e UPDATE** e impostare il **DeleteRule** proprietà **Cascade**.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-153">In the **Properties** window, expand **INSERT and UPDATE Specification** and set the **DeleteRule** property to **Cascade**.</span></span>

<span data-ttu-id="cc1e0-154">[![Image05](the-entity-framework-and-aspnet-getting-started-part-2/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="cc1e0-154">[![Image05](the-entity-framework-and-aspnet-getting-started-part-2/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image21.png)</span></span>

<span data-ttu-id="cc1e0-155">Salvare e chiudere il diagramma.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-155">Save and close the diagram.</span></span> <span data-ttu-id="cc1e0-156">Se viene chiesto se si desidera aggiornare il database, fare clic su **Sì**.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-156">If you're asked whether you want to update the database, click **Yes**.</span></span>

<span data-ttu-id="cc1e0-157">Per assicurarsi che il modello consente di mantenere le entità che sono in memoria in sincronia con operazioni di database, è necessario impostare regole corrispondenti nel modello di dati.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-157">To make sure that the model keeps entities that are in memory in sync with what the database is doing, you must set corresponding rules in the data model.</span></span> <span data-ttu-id="cc1e0-158">Aprire *SchoolModel*, fare doppio clic su questa linea di associazione tra `Person` e `StudentGrade`, quindi selezionare **proprietà**.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-158">Open *SchoolModel.edmx*, right-click the association line between `Person` and `StudentGrade`, and then select **Properties**.</span></span>

<span data-ttu-id="cc1e0-159">[![Image21](the-entity-framework-and-aspnet-getting-started-part-2/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="cc1e0-159">[![Image21](the-entity-framework-and-aspnet-getting-started-part-2/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image23.png)</span></span>

<span data-ttu-id="cc1e0-160">Nel **proprietà** finestra impostare **End1 OnDelete** a **Cascade**.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-160">In the **Properties** window, set **End1 OnDelete** to **Cascade**.</span></span>

<span data-ttu-id="cc1e0-161">[![Image22](the-entity-framework-and-aspnet-getting-started-part-2/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="cc1e0-161">[![Image22](the-entity-framework-and-aspnet-getting-started-part-2/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image25.png)</span></span>

<span data-ttu-id="cc1e0-162">Salvare e chiudere il *SchoolModel* file e quindi ricompilare il progetto.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-162">Save and close the *SchoolModel.edmx* file, and then rebuild the project.</span></span>

<span data-ttu-id="cc1e0-163">In generale, quando viene modificato il database, sono disponibili diverse opzioni per la sincronizzazione con il modello:</span><span class="sxs-lookup"><span data-stu-id="cc1e0-163">In general, when the database changes, you have several choices for how to sync up the model:</span></span>

- <span data-ttu-id="cc1e0-164">Per alcuni tipi di modifiche (ad esempio aggiunta o aggiornamento di tabelle, viste o stored procedure), fare doppio clic su nella finestra di progettazione e selezionare **il modello di aggiornamento dal Database** disporre automaticamente le modifiche di creazione della finestra di progettazione.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-164">For certain kinds of changes (such as adding or refreshing tables, views, or stored procedures), right-click in the designer and select **Update Model from Database** to have the designer make the changes automatically.</span></span>
- <span data-ttu-id="cc1e0-165">Rigenerare il modello di dati.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-165">Regenerate the data model.</span></span>
- <span data-ttu-id="cc1e0-166">Effettuare aggiornamenti manuali simile alla seguente.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-166">Make manual updates like this one.</span></span>

<span data-ttu-id="cc1e0-167">In questo caso, si potrebbe avere rigenerato il modello o aggiornare le tabelle interessate dalla modifica relazione, ma quindi è necessario apportare la modifica del nome di campo nuovo (da `FirstName` a `FirstMidName`).</span><span class="sxs-lookup"><span data-stu-id="cc1e0-167">In this case, you could have regenerated the model or refreshed the tables affected by the relationship change, but then you'd have to make the field-name change again (from `FirstName` to `FirstMidName`).</span></span>

## <a name="using-a-gridview-control-to-read-and-update-entities"></a><span data-ttu-id="cc1e0-168">Utilizzo di un controllo GridView per leggere e aggiornare le entità</span><span class="sxs-lookup"><span data-stu-id="cc1e0-168">Using a GridView Control to Read and Update Entities</span></span>

<span data-ttu-id="cc1e0-169">In questa sezione si userà un `GridView` controllo per visualizzare, aggiornare o eliminare gli studenti.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-169">In this section you'll use a `GridView` control to display, update, or delete students.</span></span>

<span data-ttu-id="cc1e0-170">Aprire o passare a *Students.aspx* e passare a **progettazione** visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-170">Open or switch to *Students.aspx* and switch to **Design** view.</span></span> <span data-ttu-id="cc1e0-171">Dal **dati** scheda della finestra il **della casella degli strumenti**, trascinare un `GridView` controllo a destra del `EntityDataSource` di controllo, il nome `StudentsGridView`, fare clic sullo smart tag e quindi selezionare  **StudentsEntityDataSource** come origine dati.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-171">From the **Data** tab of the **Toolbox**, drag a `GridView` control to the right of the `EntityDataSource` control, name it `StudentsGridView`, click the smart tag, and then select **StudentsEntityDataSource** as the data source.</span></span>

<span data-ttu-id="cc1e0-172">[![Image06](the-entity-framework-and-aspnet-getting-started-part-2/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="cc1e0-172">[![Image06](the-entity-framework-and-aspnet-getting-started-part-2/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image27.png)</span></span>

<span data-ttu-id="cc1e0-173">Fare clic su **Aggiorna Schema** (fare clic su **Sì** se viene chiesto di confermare), quindi fare clic su **Abilita Paging**, **Abilita ordinamento**, **Abilita modifica**, e **consente di eliminare**.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-173">Click **Refresh Schema** (click **Yes** if you're prompted to confirm), then click **Enable Paging**, **Enable Sorting**, **Enable Editing**, and **Enable Deleting**.</span></span>

<span data-ttu-id="cc1e0-174">Fare clic su **modificare colonne**.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-174">Click **Edit Columns**.</span></span>

<span data-ttu-id="cc1e0-175">[![Image10](the-entity-framework-and-aspnet-getting-started-part-2/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="cc1e0-175">[![Image10](the-entity-framework-and-aspnet-getting-started-part-2/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image29.png)</span></span>

<span data-ttu-id="cc1e0-176">Nel **campi selezionati** eliminare **PersonID**, **LastName**, e **HireDate**.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-176">In the **Selected fields** box, delete **PersonID**, **LastName**, and **HireDate**.</span></span> <span data-ttu-id="cc1e0-177">In genere non viene visualizzata una chiave di record per gli utenti, la data di assunzione non è pertinente per studenti e verrà inserita entrambe le parti del nome in un campo, pertanto è necessario solo uno dei campi del nome.)</span><span class="sxs-lookup"><span data-stu-id="cc1e0-177">You typically don't display a record key to users, hire date is not relevant to students, and you'll put both parts of the name in one field, so you only need one of the name fields.)</span></span>

<span data-ttu-id="cc1e0-178">[![image11](the-entity-framework-and-aspnet-getting-started-part-2/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="cc1e0-178">[![Image11](the-entity-framework-and-aspnet-getting-started-part-2/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image31.png)</span></span>

<span data-ttu-id="cc1e0-179">Selezionare il **FirstMidName** campo e quindi fare clic su **Converti il campo in un TemplateField**.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-179">Select the **FirstMidName** field and then click **Convert this field into a TemplateField**.</span></span>

<span data-ttu-id="cc1e0-180">Eseguire la stessa operazione **EnrollmentDate**.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-180">Do the same for **EnrollmentDate**.</span></span>

<span data-ttu-id="cc1e0-181">[![Image13](the-entity-framework-and-aspnet-getting-started-part-2/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="cc1e0-181">[![Image13](the-entity-framework-and-aspnet-getting-started-part-2/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image33.png)</span></span>

<span data-ttu-id="cc1e0-182">Fare clic su **OK** e quindi passare a **origine** visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-182">Click **OK** and then switch to **Source** view.</span></span> <span data-ttu-id="cc1e0-183">Le modifiche rimanenti alle risulterà più semplice eseguire direttamente nel markup.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-183">The remaining changes will be easier to do directly in markup.</span></span> <span data-ttu-id="cc1e0-184">Il `GridView` controllare markup avrà l'aspetto illustrato nell'esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-184">The `GridView` control markup now looks like the following example.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample3.aspx)]

<span data-ttu-id="cc1e0-185">Dopo il comando campo è un modello che attualmente la prima colonna Visualizza il nome.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-185">The first column after the command field is a template field that currently displays the first name.</span></span> <span data-ttu-id="cc1e0-186">Modificare il markup per il campo del modello come illustrato nell'esempio seguente:</span><span class="sxs-lookup"><span data-stu-id="cc1e0-186">Change the markup for this template field to look like the following example:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample4.aspx)]

<span data-ttu-id="cc1e0-187">In modalità di visualizzazione, due `Label` controlli visualizzano il nome e cognome.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-187">In display mode, two `Label` controls display the first and last name.</span></span> <span data-ttu-id="cc1e0-188">In modalità di modifica vengono fornite due caselle di testo, pertanto è possibile modificare il nome e cognome.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-188">In edit mode, two text boxes are provided so you can change the first and last name.</span></span> <span data-ttu-id="cc1e0-189">Come con la `Label` controlli in modalità di visualizzazione, utilizzare `Bind` e `Eval` espressioni esattamente come si farebbe con controlli di origine dati ASP.NET che si connettono direttamente al database.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-189">As with the `Label` controls in display mode, you use `Bind` and `Eval` expressions exactly as you would with ASP.NET data source controls that connect directly to databases.</span></span> <span data-ttu-id="cc1e0-190">L'unica differenza è che si sta specificando le proprietà delle entità anziché colonne di database.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-190">The only difference is that you're specifying entity properties instead of database columns.</span></span>

<span data-ttu-id="cc1e0-191">L'ultima colonna è un campo di modello che visualizza la data di registrazione.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-191">The last column is a template field that displays the enrollment date.</span></span> <span data-ttu-id="cc1e0-192">Modificare il markup per questo campo, come illustrato nell'esempio seguente:</span><span class="sxs-lookup"><span data-stu-id="cc1e0-192">Change the markup for this field to look like the following example:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample5.aspx)]

<span data-ttu-id="cc1e0-193">In entrambi visualizzare e modificare la modalità, la stringa di formato "{0, d}", la data da visualizzare nel formato "Data breve".</span><span class="sxs-lookup"><span data-stu-id="cc1e0-193">In both display and edit mode, the format string "{0,d}" causes the date to be displayed in the "short date" format.</span></span> <span data-ttu-id="cc1e0-194">(Il computer potrebbe essere configurato per visualizzare il formato specificato in modo diverso dalle immagini schermata illustrata in questa esercitazione).</span><span class="sxs-lookup"><span data-stu-id="cc1e0-194">(Your computer might be configured to display this format differently from the screen images shown in this tutorial.)</span></span>

<span data-ttu-id="cc1e0-195">Si noti che in ognuno di questi campi del modello, la finestra di progettazione utilizzata una `Bind` espressione per impostazione predefinita, ma è stato modificato da un `Eval` espressione il `ItemTemplate` elementi.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-195">Notice that in each of these template fields, the designer used a `Bind` expression by default, but you've changed that to an `Eval` expression in the `ItemTemplate` elements.</span></span> <span data-ttu-id="cc1e0-196">Il `Bind` espressione rende i dati disponibili in `GridView` le proprietà del controllo nel caso in cui è necessario accedere ai dati nel codice.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-196">The `Bind` expression makes the data available in `GridView` control properties in case you need to access the data in code.</span></span> <span data-ttu-id="cc1e0-197">In questa pagina non è necessario accedere a tali dati nel codice, pertanto è possibile utilizzare `Eval`, che risulta più efficiente.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-197">In this page you don't need to access this data in code, so you can use `Eval`, which is more efficient.</span></span> <span data-ttu-id="cc1e0-198">Per ulteriori informazioni, vedere [ottenere i dati dai controlli dati](https://weblogs.asp.net/davidfowler/archive/2008/12/12/getting-your-data-out-of-the-data-controls.aspx).</span><span class="sxs-lookup"><span data-stu-id="cc1e0-198">For more information, see [Getting your data out of the data controls](https://weblogs.asp.net/davidfowler/archive/2008/12/12/getting-your-data-out-of-the-data-controls.aspx).</span></span>

## <a name="revising-entitydatasource-control-markup-to-improve-performance"></a><span data-ttu-id="cc1e0-199">Revisione dei Markup del controllo EntityDataSource per migliorare le prestazioni</span><span class="sxs-lookup"><span data-stu-id="cc1e0-199">Revising EntityDataSource Control Markup to Improve Performance</span></span>

<span data-ttu-id="cc1e0-200">Nel markup di `EntityDataSource` di controllo, rimuovere il `ConnectionString` e `DefaultContainerName` gli attributi e sostituirle con una `ContextTypeName="ContosoUniversity.DAL.SchoolEntities"` attributo.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-200">In the markup for the `EntityDataSource` control, remove the `ConnectionString` and `DefaultContainerName` attributes and replace them with a `ContextTypeName="ContosoUniversity.DAL.SchoolEntities"` attribute.</span></span> <span data-ttu-id="cc1e0-201">Si tratta di una modifica apportata ogni volta che si crea un `EntityDataSource` controllare, a meno che non è necessario utilizzare una connessione diversa da quella a livello di codice nella classe del contesto di oggetto.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-201">This is a change you should make every time you create an `EntityDataSource` control, unless you need to use a connection that is different from the one that's hard-coded in the object context class.</span></span> <span data-ttu-id="cc1e0-202">Utilizzo di `ContextTypeName` attributo offre i vantaggi seguenti:</span><span class="sxs-lookup"><span data-stu-id="cc1e0-202">Using the `ContextTypeName` attribute provides the following benefits:</span></span>

- <span data-ttu-id="cc1e0-203">Prestazioni migliori.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-203">Better performance.</span></span> <span data-ttu-id="cc1e0-204">Quando il `EntityDataSource` controllo Inizializza il modello di dati tramite il `ConnectionString` e `DefaultContainerName` gli attributi, esegue ulteriori operazioni per caricare i metadati per ogni richiesta.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-204">When the `EntityDataSource` control initializes the data model using the `ConnectionString` and `DefaultContainerName` attributes, it performs additional work to load metadata on every request.</span></span> <span data-ttu-id="cc1e0-205">Questo non è necessario se si specificano le `ContextTypeName` attributo.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-205">This isn't necessary if you specify the `ContextTypeName` attribute.</span></span>
- <span data-ttu-id="cc1e0-206">Caricamento lazy è attivato per impostazione predefinita nelle classi di oggetti generati contesto (ad esempio `SchoolEntities` in questa esercitazione) in Entity Framework 4.0.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-206">Lazy loading is turned on by default in generated object context classes (such as `SchoolEntities` in this tutorial) in Entity Framework 4.0.</span></span> <span data-ttu-id="cc1e0-207">Ciò significa che le proprietà di navigazione vengono caricate con i dati correlati automaticamente destra quando è necessario.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-207">This means that navigation properties are loaded with related data automatically right when you need it.</span></span> <span data-ttu-id="cc1e0-208">Caricamento lazy è illustrato più dettagliatamente più avanti in questa esercitazione.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-208">Lazy loading is explained in more detail later in this tutorial.</span></span>
- <span data-ttu-id="cc1e0-209">Tutte le personalizzazioni applicate alla classe contesto di oggetto (in questo caso, il `SchoolEntities` classe) sarà disponibile per i controlli che utilizzano il `EntityDataSource` controllo.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-209">Any customizations that you've applied to the object context class (in this case, the `SchoolEntities` class) will be available to controls that use the `EntityDataSource` control.</span></span> <span data-ttu-id="cc1e0-210">Personalizzazione della classe di contesto di oggetto è un argomento avanzato che non viene descritta in questa serie di esercitazioni.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-210">Customizing the object context class is an advanced topic that is not covered in this tutorial series.</span></span> <span data-ttu-id="cc1e0-211">Per ulteriori informazioni, vedere [tipi generati di estensione Entity Framework](https://msdn.microsoft.com/library/dd456844.aspx).</span><span class="sxs-lookup"><span data-stu-id="cc1e0-211">For more information, see [Extending Entity Framework Generated Types](https://msdn.microsoft.com/library/dd456844.aspx).</span></span>

<span data-ttu-id="cc1e0-212">Il markup sarà ora simile nell'esempio seguente (l'ordine delle proprietà potrà essere diverso):</span><span class="sxs-lookup"><span data-stu-id="cc1e0-212">The markup will now resemble the following example (the order of the properties might be different):</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample6.aspx)]

<span data-ttu-id="cc1e0-213">Il `EnableFlattening` attributo fa riferimento a una funzionalità che è stata necessaria nelle versioni precedenti di Entity Framework, in quanto le colonne chiave esterna non sono stati esposti come proprietà dell'entità.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-213">The `EnableFlattening` attribute refers to a feature that was needed in earlier versions of the Entity Framework because foreign key columns were not exposed as entity properties.</span></span> <span data-ttu-id="cc1e0-214">La versione corrente consente di utilizzare *associazioni di chiavi esterne*, ovvero una proprietà di chiave esterna vengono esposte per le associazioni di tutto tranne molti-a-molti.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-214">The current version makes it possible to use *foreign key associations*, which means foreign key properties are exposed for all but many-to-many associations.</span></span> <span data-ttu-id="cc1e0-215">Se l'entità dispone di proprietà di chiave esterna e nessun [tipi complessi](https://msdn.microsoft.com/library/bb738472.aspx), è possibile lasciare questo attributo è impostato su `False`.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-215">If your entities have foreign key properties and no [complex types](https://msdn.microsoft.com/library/bb738472.aspx), you can leave this attribute set to `False`.</span></span> <span data-ttu-id="cc1e0-216">Non rimuovere l'attributo dal markup, poiché il valore predefinito è `True`.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-216">Don't remove the attribute from the markup, because the default value is `True`.</span></span> <span data-ttu-id="cc1e0-217">Per ulteriori informazioni, vedere [bidimensionalità degli oggetti (EntityDataSource)](https://msdn.microsoft.com/library/ee404746.aspx).</span><span class="sxs-lookup"><span data-stu-id="cc1e0-217">For more information, see [Flattening Objects (EntityDataSource)](https://msdn.microsoft.com/library/ee404746.aspx).</span></span>

<span data-ttu-id="cc1e0-218">Eseguire la pagina e viene visualizzato un elenco di studenti e dipendenti (si filtreranno per studenti soli nella prossima esercitazione).</span><span class="sxs-lookup"><span data-stu-id="cc1e0-218">Run the page and you see a list of students and employees (you'll filter for just students in the next tutorial).</span></span> <span data-ttu-id="cc1e0-219">Vengono visualizzati insieme al nome e cognome.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-219">The first name and last name are displayed together.</span></span>

<span data-ttu-id="cc1e0-220">[![Image07](the-entity-framework-and-aspnet-getting-started-part-2/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="cc1e0-220">[![Image07](the-entity-framework-and-aspnet-getting-started-part-2/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image35.png)</span></span>

<span data-ttu-id="cc1e0-221">Per ordinare la visualizzazione, fare clic su un nome di colonna.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-221">To sort the display, click a column name.</span></span>

<span data-ttu-id="cc1e0-222">Fare clic su **modificare** in qualsiasi riga.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-222">Click **Edit** in any row.</span></span> <span data-ttu-id="cc1e0-223">Vengono visualizzate le caselle di testo in cui è possibile modificare il nome e cognome.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-223">Text boxes are displayed where you can change the first and last name.</span></span>

<span data-ttu-id="cc1e0-224">[![Image08](the-entity-framework-and-aspnet-getting-started-part-2/_static/image38.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="cc1e0-224">[![Image08](the-entity-framework-and-aspnet-getting-started-part-2/_static/image38.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image37.png)</span></span>

<span data-ttu-id="cc1e0-225">Il **eliminare** pulsante anche works.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-225">The **Delete** button also works.</span></span> <span data-ttu-id="cc1e0-226">Per una riga che ha una data di registrazione e la riga non viene più visualizzata, fare clic su Elimina.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-226">Click delete for a row that has an enrollment date and the row disappears.</span></span> <span data-ttu-id="cc1e0-227">(Righe senza una data di registrazione rappresentano i docenti e potrebbe verificarsi un errore di integrità referenziale.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-227">(Rows without an enrollment date represent instructors and you may get a referential integrity error.</span></span> <span data-ttu-id="cc1e0-228">Nella prossima esercitazione si filtrerà questo elenco per includere solo gli studenti.)</span><span class="sxs-lookup"><span data-stu-id="cc1e0-228">In the next tutorial you'll filter this list to include just students.)</span></span>

## <a name="displaying-data-from-a-navigation-property"></a><span data-ttu-id="cc1e0-229">Visualizzazione dei dati da una proprietà di navigazione</span><span class="sxs-lookup"><span data-stu-id="cc1e0-229">Displaying Data from a Navigation Property</span></span>

<span data-ttu-id="cc1e0-230">Ora si supponga di voler conoscere quanti corsi ogni studente è iscritto.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-230">Now suppose you want to know how many courses each student is enrolled in.</span></span> <span data-ttu-id="cc1e0-231">Entity Framework fornisce le informazioni nel `StudentGrades` proprietà di navigazione del `Person` entità.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-231">The Entity Framework provides that information in the `StudentGrades` navigation property of the `Person` entity.</span></span> <span data-ttu-id="cc1e0-232">Poiché la progettazione del database non consenta uno studente di iscriversi a un corso senza la necessità di un voto assegnato, per questa esercitazione si può presupporre che la presenza di una riga nel `StudentGrade` riga della tabella è associata a un corso equivale la registrazione in corso.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-232">Because the database design does not allow a student to be enrolled in a course without having a grade assigned, for this tutorial you can assume that having a row in the `StudentGrade` table row that is associated with a course is the same as being enrolled in the course.</span></span> <span data-ttu-id="cc1e0-233">(Il `Courses` proprietà di navigazione è solo per i docenti.)</span><span class="sxs-lookup"><span data-stu-id="cc1e0-233">(The `Courses` navigation property is only for instructors.)</span></span>

<span data-ttu-id="cc1e0-234">Quando si utilizza il `ContextTypeName` attributo del `EntityDataSource` (controllo), Entity Framework recupera automaticamente le informazioni per una proprietà di navigazione quando si accede a tale proprietà.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-234">When you use the `ContextTypeName` attribute of the `EntityDataSource` control, the Entity Framework automatically retrieves information for a navigation property when you access that property.</span></span> <span data-ttu-id="cc1e0-235">Si tratta di *caricamento lazy*.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-235">This is called *lazy loading*.</span></span> <span data-ttu-id="cc1e0-236">Tuttavia, ciò può risultare inefficiente, perché comporta una chiamata distinta per il database che sono necessaria ogni ulteriori informazioni sul tempo.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-236">However, this can be inefficient, because it results in a separate call to the database each time additional information is needed.</span></span> <span data-ttu-id="cc1e0-237">Se sono necessari i dati dalla proprietà di navigazione per ogni entità restituita dal `EntityDataSource` (controllo), risulta più efficiente per recuperare i dati correlati con l'entità in una singola chiamata al database.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-237">If you need data from the navigation property for every entity returned by the `EntityDataSource` control, it's more efficient to retrieve the related data along with the entity itself in a single call to the database.</span></span> <span data-ttu-id="cc1e0-238">Si tratta di *caricamento eager*, e si specifica un caricamento eager per una proprietà di navigazione impostando il `Include` proprietà del `EntityDataSource` controllo.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-238">This is called *eager loading*, and you specify eager loading for a navigation property by setting the `Include` property of the `EntityDataSource` control.</span></span>

<span data-ttu-id="cc1e0-239">In *Students.aspx*, che si desidera visualizzare il numero di corsi per tutti gli studenti, caricamento eager così è la scelta migliore.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-239">In *Students.aspx*, you want to show the number of courses for every student, so eager loading is the best choice.</span></span> <span data-ttu-id="cc1e0-240">Se la visualizzazione di tutti gli studenti ma che mostra il numero di corsi solo per alcuni di essi (che richiedono la scrittura di codice oltre il markup), il caricamento lazy potrebbe essere una scelta migliore.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-240">If you were displaying all students but showing the number of courses only for a few of them (which would require writing some code in addition to the markup), lazy loading might be a better choice.</span></span>

<span data-ttu-id="cc1e0-241">Apre o passa al *Students.aspx*, passare alla **progettazione** visualizzazione, selezionare `StudentsEntityDataSource`e il **proprietà** finestra set il **Include**proprietà **StudentGrades**.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-241">Open or switch to *Students.aspx*, switch to **Design** view, select `StudentsEntityDataSource`, and in the **Properties** window set the **Include** property to **StudentGrades**.</span></span> <span data-ttu-id="cc1e0-242">(Se si desidera ottenere più proprietà di navigazione, è possibile specificare i nomi separati da virgole, ad esempio, **StudentGrades, corsi**.)</span><span class="sxs-lookup"><span data-stu-id="cc1e0-242">(If you wanted to get multiple navigation properties, you could specify their names separated by commas — for example, **StudentGrades, Courses**.)</span></span>

<span data-ttu-id="cc1e0-243">[![image19](the-entity-framework-and-aspnet-getting-started-part-2/_static/image40.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image39.png)</span><span class="sxs-lookup"><span data-stu-id="cc1e0-243">[![Image19](the-entity-framework-and-aspnet-getting-started-part-2/_static/image40.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image39.png)</span></span>

<span data-ttu-id="cc1e0-244">Passare a **origine** visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-244">Switch to **Source** view.</span></span> <span data-ttu-id="cc1e0-245">Nel `StudentsGridView` controllo, dopo l'ultimo `asp:TemplateField` elemento, aggiungere il nuovo campo di modello seguenti:</span><span class="sxs-lookup"><span data-stu-id="cc1e0-245">In the `StudentsGridView` control, after the last `asp:TemplateField` element, add the following new template field:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample7.aspx)]

<span data-ttu-id="cc1e0-246">Nel `Eval` espressione, è possibile fare riferimento la proprietà di navigazione `StudentGrades`.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-246">In the `Eval` expression, you can reference the navigation property `StudentGrades`.</span></span> <span data-ttu-id="cc1e0-247">Poiché questa proprietà contiene una raccolta, dispone di un `Count` proprietà che è possibile utilizzare per visualizzare il numero dei corsi in cui viene registrato lo studente.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-247">Because this property contains a collection, it has a `Count` property that you can use to display the number of courses in which the student is enrolled.</span></span> <span data-ttu-id="cc1e0-248">In un'esercitazione successiva si noterà come visualizzare i dati di proprietà di navigazione che contengono una singola entità anziché le raccolte.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-248">In a later tutorial you'll see how to display data from navigation properties that contain single entities instead of collections.</span></span> <span data-ttu-id="cc1e0-249">(Si noti che non è possibile utilizzare `BoundField` elementi per visualizzare i dati dalle proprietà di navigazione.)</span><span class="sxs-lookup"><span data-stu-id="cc1e0-249">(Note that you cannot use `BoundField` elements to display data from navigation properties.)</span></span>

<span data-ttu-id="cc1e0-250">Eseguire la pagina e verranno visualizzati come molti corsi ogni studente è registrato in.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-250">Run the page and you now see how many courses each student is enrolled in.</span></span>

<span data-ttu-id="cc1e0-251">[![Image20](the-entity-framework-and-aspnet-getting-started-part-2/_static/image42.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image41.png)</span><span class="sxs-lookup"><span data-stu-id="cc1e0-251">[![Image20](the-entity-framework-and-aspnet-getting-started-part-2/_static/image42.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image41.png)</span></span>

## <a name="using-a-detailsview-control-to-insert-entities"></a><span data-ttu-id="cc1e0-252">Utilizzo di un controllo DetailsView per inserire entità</span><span class="sxs-lookup"><span data-stu-id="cc1e0-252">Using a DetailsView Control to Insert Entities</span></span>

<span data-ttu-id="cc1e0-253">Il passaggio successivo consiste nel creare una pagina con un `DetailsView` controllo che consente di aggiungere nuovi studenti.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-253">The next step is to create a page that has a `DetailsView` control that will let you add new students.</span></span> <span data-ttu-id="cc1e0-254">Chiudere il browser e quindi creare una nuova pagina web utilizzando il *Site. master* pagina master.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-254">Close the browser and then create a new web page using the *Site.Master* master page.</span></span> <span data-ttu-id="cc1e0-255">Denominare la pagina *StudentsAdd.aspx*, quindi passare alla **origine** visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-255">Name the page *StudentsAdd.aspx*, and then switch to **Source** view.</span></span>

<span data-ttu-id="cc1e0-256">Aggiungere il markup seguente per sostituire il codice esistente per il `Content` controllo denominato `Content2`:</span><span class="sxs-lookup"><span data-stu-id="cc1e0-256">Add the following markup to replace the existing markup for the `Content` control named `Content2`:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample8.aspx)]

<span data-ttu-id="cc1e0-257">Questo codice crea un `EntityDataSource` controllo che è simile a quello creato in *Students.aspx*, ad eccezione del fatto che consente l'inserimento.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-257">This markup creates an `EntityDataSource` control that is similar to the one you created in *Students.aspx*, except it enables insertion.</span></span> <span data-ttu-id="cc1e0-258">Come con la `GridView` controllare, i campi associati del `DetailsView` controllo sono codificate esattamente come avviene per un controllo dati che si connette direttamente a un database, ad eccezione del fatto che fanno riferimento a proprietà dell'entità.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-258">As with the `GridView` control, the bound fields of the `DetailsView` control are coded exactly as they would be for a data control that connects directly to a database, except that they reference entity properties.</span></span> <span data-ttu-id="cc1e0-259">In questo caso, il `DetailsView` controllo viene utilizzato solo per l'inserimento di righe, in modo da impostare la modalità predefinita `Insert`.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-259">In this case, the `DetailsView` control is used only for inserting rows, so you have set the default mode to `Insert`.</span></span>

<span data-ttu-id="cc1e0-260">Eseguire la pagina e aggiungere un nuovo studente.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-260">Run the page and add a new student.</span></span>

<span data-ttu-id="cc1e0-261">[![Image09](the-entity-framework-and-aspnet-getting-started-part-2/_static/image44.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image43.png)</span><span class="sxs-lookup"><span data-stu-id="cc1e0-261">[![Image09](the-entity-framework-and-aspnet-getting-started-part-2/_static/image44.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image43.png)</span></span>

<span data-ttu-id="cc1e0-262">Non si verifica dopo aver inserito un nuovo studente, ma se si esegue ora *Students.aspx*, si noterà che le informazioni sul nuovo studente.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-262">Nothing will happen after you insert a new student, but if you now run *Students.aspx*, you'll see the new student information.</span></span>

## <a name="displaying-data-in-a-drop-down-list"></a><span data-ttu-id="cc1e0-263">La visualizzazione dei dati in un elenco a discesa</span><span class="sxs-lookup"><span data-stu-id="cc1e0-263">Displaying Data in a Drop-Down List</span></span>

<span data-ttu-id="cc1e0-264">Nei passaggi seguenti, sarà necessario databind un `DropDownList` controllo a un'entità impostata utilizzando un `EntityDataSource` controllo.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-264">In the following steps you'll databind a `DropDownList` control to an entity set using an `EntityDataSource` control.</span></span> <span data-ttu-id="cc1e0-265">In questa parte dell'esercitazione, non sarà sufficiente gran parte a questo elenco.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-265">In this part of the tutorial, you won't do much with this list.</span></span> <span data-ttu-id="cc1e0-266">Nelle parti successive, tuttavia, si userà l'elenco per consentire agli utenti di selezionare un reparto per visualizzare i corsi associati al reparto.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-266">In subsequent parts, though, you'll use the list to let users select a department to display courses associated with the department.</span></span>

<span data-ttu-id="cc1e0-267">Creare una nuova pagina web denominata *Courses.aspx*.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-267">Create a new web page named *Courses.aspx*.</span></span> <span data-ttu-id="cc1e0-268">In **origine** visualizzare, aggiungere un'intestazione per il `Content` controllo denominato `Content2`:</span><span class="sxs-lookup"><span data-stu-id="cc1e0-268">In **Source** view, add a heading to the `Content` control that's named `Content2`:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample9.aspx)]

<span data-ttu-id="cc1e0-269">In **progettazione** visualizzare, aggiungere un `EntityDataSource` controllo alla pagina come descritto in precedenza, ma questa volta il nome `DepartmentsEntityDataSource`.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-269">In **Design** view, add an `EntityDataSource` control to the page as you did before, except this time name it `DepartmentsEntityDataSource`.</span></span> <span data-ttu-id="cc1e0-270">Selezionare **reparti** come il **EntitySetName** valore e selezionare solo la **DepartmentID** e **nome** proprietà.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-270">Select **Departments** as the **EntitySetName** value, and select only the **DepartmentID** and **Name** properties.</span></span>

<span data-ttu-id="cc1e0-271">[![Image15](the-entity-framework-and-aspnet-getting-started-part-2/_static/image46.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image45.png)</span><span class="sxs-lookup"><span data-stu-id="cc1e0-271">[![Image15](the-entity-framework-and-aspnet-getting-started-part-2/_static/image46.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image45.png)</span></span>

<span data-ttu-id="cc1e0-272">Dal **Standard** scheda della finestra il **della casella degli strumenti**, trascinare un `DropDownList` alla pagina di controllo, il nome `DepartmentsDropDownList`, fare clic sullo smart tag e selezionare **Scegli origine dati** per avviare il **configurazione guidata origine dati**.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-272">From the **Standard** tab of the **Toolbox**, drag a `DropDownList` control to the page, name it `DepartmentsDropDownList`, click the smart tag, and select **Choose Data Source** to start the **DataSource Configuration Wizard**.</span></span>

<span data-ttu-id="cc1e0-273">[![image16](the-entity-framework-and-aspnet-getting-started-part-2/_static/image48.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image47.png)</span><span class="sxs-lookup"><span data-stu-id="cc1e0-273">[![Image16](the-entity-framework-and-aspnet-getting-started-part-2/_static/image48.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image47.png)</span></span>

<span data-ttu-id="cc1e0-274">Nel **scegliere un'origine dati** passaggio seleziona **DepartmentsEntityDataSource** come origine dati, fare clic su **Aggiorna Schema**, quindi selezionare **nome** come il campo dei dati per visualizzare e **DepartmentID** del campo dati valore.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-274">In the **Choose a Data Source** step, select **DepartmentsEntityDataSource** as the data source, click **Refresh Schema**, and then select **Name** as the data field to display and **DepartmentID** as the value data field.</span></span> <span data-ttu-id="cc1e0-275">Fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-275">Click **OK**.</span></span>

<span data-ttu-id="cc1e0-276">[![image17](the-entity-framework-and-aspnet-getting-started-part-2/_static/image50.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image49.png)</span><span class="sxs-lookup"><span data-stu-id="cc1e0-276">[![Image17](the-entity-framework-and-aspnet-getting-started-part-2/_static/image50.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image49.png)</span></span>

<span data-ttu-id="cc1e0-277">Il metodo da utilizzare come associare il controllo tramite Entity Framework è la stessa, come con altri dati ASP.NET specifica i controlli di origine, ad eccezione di entità e proprietà dell'entità.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-277">The method you use to databind the control using the Entity Framework is the same as with other ASP.NET data source controls except you're specifying entities and entity properties.</span></span>

<span data-ttu-id="cc1e0-278">Passare a **origine** consente di visualizzare e aggiungere "selezionare un reparto:" immediatamente prima di `DropDownList` controllo.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-278">Switch to **Source** view and add "Select a department:" immediately before the `DropDownList` control.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample10.aspx)]

<span data-ttu-id="cc1e0-279">Come promemoria, modificare il markup per il `EntityDataSource` controllo a questo punto, sostituendo il `ConnectionString` e `DefaultContainerName` gli attributi con un `ContextTypeName="ContosoUniversity.DAL.SchoolEntities"` attributo.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-279">As a reminder, change the markup for the `EntityDataSource` control at this point by replacing the `ConnectionString` and `DefaultContainerName` attributes with a `ContextTypeName="ContosoUniversity.DAL.SchoolEntities"` attribute.</span></span> <span data-ttu-id="cc1e0-280">È spesso consigliabile attendere fino a dopo aver creato il controllo con associazione a dati che è collegato al controllo origine dati prima di modificare il `EntityDataSource` controllare markup, poiché dopo aver apportato la modifica, la finestra di progettazione non fornirà con un **Aggiorna Schema** opzione nel controllo con associazione a dati.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-280">It's often best to wait until after you've created the data-bound control that is linked to the data source control before you change the `EntityDataSource` control markup, because after you make the change, the designer will not provide you with a **Refresh Schema** option in the data-bound control.</span></span>

<span data-ttu-id="cc1e0-281">Eseguire la pagina ed è possibile selezionare un reparto dall'elenco a discesa.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-281">Run the page and you can select a department from the drop-down list.</span></span>

<span data-ttu-id="cc1e0-282">[![image18](the-entity-framework-and-aspnet-getting-started-part-2/_static/image52.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image51.png)</span><span class="sxs-lookup"><span data-stu-id="cc1e0-282">[![Image18](the-entity-framework-and-aspnet-getting-started-part-2/_static/image52.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image51.png)</span></span>

<span data-ttu-id="cc1e0-283">Introduzione all'uso è stata completata la `EntityDataSource` controllo.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-283">This completes the introduction to using the `EntityDataSource` control.</span></span> <span data-ttu-id="cc1e0-284">Utilizzo di questo controllo è in genere non è diverso dall'utilizzo di altri dati ASP.NET controlli origine, ad eccezione del fatto che si fa riferimento a entità e proprietà invece di tabelle e colonne.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-284">Working with this control is generally no different from working with other ASP.NET data source controls, except that you reference entities and properties instead of tables and columns.</span></span> <span data-ttu-id="cc1e0-285">L'unica eccezione è quando si desidera accedere alle proprietà di navigazione.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-285">The only exception is when you want to access navigation properties.</span></span> <span data-ttu-id="cc1e0-286">Nella prossima esercitazione si noterà che la sintassi è utilizzare con `EntityDataSource` controllo potrebbero essere diversi anche da altri controlli origine dati quando il filtro, raggruppamento e ordinamento dei dati.</span><span class="sxs-lookup"><span data-stu-id="cc1e0-286">In the next tutorial you'll see that the syntax you use with `EntityDataSource` control might also differ from other data source controls when you filter, group, and order data.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="cc1e0-287">[Precedente](the-entity-framework-and-aspnet-getting-started-part-1.md)
> [Successivo](the-entity-framework-and-aspnet-getting-started-part-3.md)</span><span class="sxs-lookup"><span data-stu-id="cc1e0-287">[Previous](the-entity-framework-and-aspnet-getting-started-part-1.md)
[Next](the-entity-framework-and-aspnet-getting-started-part-3.md)</span></span>
