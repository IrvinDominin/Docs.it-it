---
uid: web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-6
title: Guida introduttiva a Database di Entity Framework 4.0 prima di tutto e ASP.NET 4 di Web Form - parte 6 | Documenti Microsoft
author: tdykstra
description: L'applicazione web di Contoso University esempio viene illustrato come creare applicazioni Web Form ASP.NET tramite Entity Framework. È l'applicazione di esempio...
ms.author: aspnetcontent
manager: wpickett
ms.date: 12/03/2010
ms.topic: article
ms.assetid: 994a5496-c648-4830-b03c-55bb43f325d2
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-6
msc.type: authoredcontent
ms.openlocfilehash: b76be25501275ba676c9a9acca8e73333439ee70
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/06/2018
ms.locfileid: "30888799"
---
<a name="getting-started-with-entity-framework-40-database-first-and-aspnet-4-web-forms---part-6"></a><span data-ttu-id="1d73e-104">Guida introduttiva a Database di Entity Framework 4.0 prima di tutto e form ASP.NET Web 4 - parte 6</span><span class="sxs-lookup"><span data-stu-id="1d73e-104">Getting Started with Entity Framework 4.0 Database First and ASP.NET 4 Web Forms - Part 6</span></span>
====================
<span data-ttu-id="1d73e-105">da [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="1d73e-105">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

> <span data-ttu-id="1d73e-106">L'applicazione web di Contoso University esempio viene illustrato come creare applicazioni Web Form ASP.NET utilizzando il Entity Framework 4.0 e Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="1d73e-106">The Contoso University sample web application demonstrates how to create ASP.NET Web Forms applications using the Entity Framework 4.0 and Visual Studio 2010.</span></span> <span data-ttu-id="1d73e-107">Per informazioni sulle serie di esercitazioni, vedere [la prima esercitazione di serie](the-entity-framework-and-aspnet-getting-started-part-1.md)</span><span class="sxs-lookup"><span data-stu-id="1d73e-107">For information about the tutorial series, see [the first tutorial in the series](the-entity-framework-and-aspnet-getting-started-part-1.md)</span></span>


## <a name="implementing-table-per-hierarchy-inheritance"></a><span data-ttu-id="1d73e-108">Implementazione dell'ereditarietà tabella per gerarchia</span><span class="sxs-lookup"><span data-stu-id="1d73e-108">Implementing Table-per-Hierarchy Inheritance</span></span>

<span data-ttu-id="1d73e-109">Nell'esercitazione precedente si è lavorato con i dati correlati aggiunta ed eliminazione di relazioni e aggiungendo una nuova entità che ha una relazione a un'entità esistente.</span><span class="sxs-lookup"><span data-stu-id="1d73e-109">In the previous tutorial you worked with related data by adding and deleting relationships and by adding a new entity that had a relationship to an existing entity.</span></span> <span data-ttu-id="1d73e-110">In questa esercitazione viene illustrato come implementare l'ereditarietà nel modello di dati.</span><span class="sxs-lookup"><span data-stu-id="1d73e-110">This tutorial will show you how to implement inheritance in the data model.</span></span>

<span data-ttu-id="1d73e-111">Nella programmazione orientata agli oggetti, è possibile utilizzare l'ereditarietà per renderlo più facile lavorare con le classi correlate.</span><span class="sxs-lookup"><span data-stu-id="1d73e-111">In object-oriented programming, you can use inheritance to make it easier to work with related classes.</span></span> <span data-ttu-id="1d73e-112">Ad esempio, è possibile creare `Instructor` e `Student` classi che derivano da un `Person` classe di base.</span><span class="sxs-lookup"><span data-stu-id="1d73e-112">For example, you could create `Instructor` and `Student` classes that derive from a `Person` base class.</span></span> <span data-ttu-id="1d73e-113">È possibile creare gli stessi tipi di strutture di ereditarietà tra le entità in Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="1d73e-113">You can create the same kinds of inheritance structures among entities in the Entity Framework.</span></span>

<span data-ttu-id="1d73e-114">In questa parte dell'esercitazione, non verranno create nuove pagine web.</span><span class="sxs-lookup"><span data-stu-id="1d73e-114">In this part of the tutorial, you won't create any new web pages.</span></span> <span data-ttu-id="1d73e-115">In alternativa, aggiungerai derivato entità nel modello di dati e modificare le pagine esistenti per utilizzare le nuove entità.</span><span class="sxs-lookup"><span data-stu-id="1d73e-115">Instead, you'll add derived entities to the data model and modify existing pages to use the new entities.</span></span>

## <a name="table-per-hierarchy-versus-table-per-type-inheritance"></a><span data-ttu-id="1d73e-116">Tabella per gerarchia rispetto a ereditarietà tabella per tipo</span><span class="sxs-lookup"><span data-stu-id="1d73e-116">Table-per-Hierarchy versus Table-per-Type Inheritance</span></span>

<span data-ttu-id="1d73e-117">Un database può archiviare informazioni sugli oggetti correlati in una tabella o in più tabelle.</span><span class="sxs-lookup"><span data-stu-id="1d73e-117">A database can store information about related objects in one table or in multiple tables.</span></span> <span data-ttu-id="1d73e-118">Ad esempio, nel `School` database, il `Person` tabella include informazioni su studenti e insegnanti in un'unica tabella.</span><span class="sxs-lookup"><span data-stu-id="1d73e-118">For example, in the `School` database, the `Person` table includes information about both students and instructors in a single table.</span></span> <span data-ttu-id="1d73e-119">Alcune delle colonne si applicano solo per i docenti (`HireDate`), alcuni solo per gli studenti (`EnrollmentDate`) e alcuni a entrambi (`LastName`, `FirstName`).</span><span class="sxs-lookup"><span data-stu-id="1d73e-119">Some of the columns apply only to instructors (`HireDate`), some only to students (`EnrollmentDate`), and some to both (`LastName`, `FirstName`).</span></span>

<span data-ttu-id="1d73e-120">[![image11](the-entity-framework-and-aspnet-getting-started-part-6/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="1d73e-120">[![image11](the-entity-framework-and-aspnet-getting-started-part-6/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image1.png)</span></span>

<span data-ttu-id="1d73e-121">È possibile configurare Entity Framework per creare `Instructor` e `Student` le entità che ereditano dal `Person` entità.</span><span class="sxs-lookup"><span data-stu-id="1d73e-121">You can configure the Entity Framework to create `Instructor` and `Student` entities that inherit from the `Person` entity.</span></span> <span data-ttu-id="1d73e-122">Questo modello di generazione di una struttura di ereditarietà di entità da una singola tabella di database è denominato *della tabella per gerarchia* ereditarietà della.</span><span class="sxs-lookup"><span data-stu-id="1d73e-122">This pattern of generating an entity inheritance structure from a single database table is called *table-per-hierarchy* (TPH) inheritance.</span></span>

<span data-ttu-id="1d73e-123">Per i corsi, il `School` database utilizza un modello diverso.</span><span class="sxs-lookup"><span data-stu-id="1d73e-123">For courses, the `School` database uses a different pattern.</span></span> <span data-ttu-id="1d73e-124">Corsi online e in loco corsi vengono archiviati in tabelle separate, ognuna delle quali dispone di una chiave esterna che punta al `Course` tabella.</span><span class="sxs-lookup"><span data-stu-id="1d73e-124">Online courses and onsite courses are stored in separate tables, each of which has a foreign key that points to the `Course` table.</span></span> <span data-ttu-id="1d73e-125">Informazioni comuni a entrambi i tipi di corso vengono archiviate solo nel `Course` tabella.</span><span class="sxs-lookup"><span data-stu-id="1d73e-125">Information common to both course types is stored only in the `Course` table.</span></span>

<span data-ttu-id="1d73e-126">[![Image12](the-entity-framework-and-aspnet-getting-started-part-6/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="1d73e-126">[![image12](the-entity-framework-and-aspnet-getting-started-part-6/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image3.png)</span></span>

<span data-ttu-id="1d73e-127">È possibile configurare il modello di dati di Entity Framework in modo che `OnlineCourse` e `OnsiteCourse` entità ereditano il `Course` entità.</span><span class="sxs-lookup"><span data-stu-id="1d73e-127">You can configure the Entity Framework data model so that `OnlineCourse` and `OnsiteCourse` entities inherit from the `Course` entity.</span></span> <span data-ttu-id="1d73e-128">Questo modello di generazione di una struttura di ereditarietà di entità da tabelle separate per ogni tipo, con ogni tabella separata di una tabella che archivia i dati comuni a tutti i tipi, viene denominato *tabella per tipo* ereditarietà (tabella per tipo).</span><span class="sxs-lookup"><span data-stu-id="1d73e-128">This pattern of generating an entity inheritance structure from separate tables for each type, with each separate table referring back to a table that stores data common to all types, is called *table per type* (TPT) inheritance.</span></span>

<span data-ttu-id="1d73e-129">Criteri di ereditarietà della tabella per gerarchia offrono in genere prestazioni migliori in Entity Framework di criteri di ereditarietà tabella per tipo, in quanto possono generare modelli di tabella per tipo query join complessi.</span><span class="sxs-lookup"><span data-stu-id="1d73e-129">TPH inheritance patterns generally deliver better performance in the Entity Framework than TPT inheritance patterns, because TPT patterns can result in complex join queries.</span></span> <span data-ttu-id="1d73e-130">Questa procedura dettagliata viene illustrato come implementare Implementerà l'ereditarietà.</span><span class="sxs-lookup"><span data-stu-id="1d73e-130">This walkthrough demonstrates how to implement TPH inheritance.</span></span> <span data-ttu-id="1d73e-131">Che verranno eseguite eseguendo i passaggi seguenti:</span><span class="sxs-lookup"><span data-stu-id="1d73e-131">You'll do that by performing the following steps:</span></span>

- <span data-ttu-id="1d73e-132">Creare `Instructor` e `Student` tipi di entità che derivano da `Person`.</span><span class="sxs-lookup"><span data-stu-id="1d73e-132">Create `Instructor` and `Student` entity types that derive from `Person`.</span></span>
- <span data-ttu-id="1d73e-133">Sposta le proprietà relative alle entità derivata dal `Person` entità alle entità derivata.</span><span class="sxs-lookup"><span data-stu-id="1d73e-133">Move properties that pertain to the derived entities from the `Person` entity to the derived entities.</span></span>
- <span data-ttu-id="1d73e-134">Impostare i vincoli su proprietà in tipi derivati.</span><span class="sxs-lookup"><span data-stu-id="1d73e-134">Set constraints on properties in the derived types.</span></span>
- <span data-ttu-id="1d73e-135">Rendere il `Person` entità un'entità astratta.</span><span class="sxs-lookup"><span data-stu-id="1d73e-135">Make the `Person` entity an abstract entity.</span></span>
- <span data-ttu-id="1d73e-136">Ogni mappa derivato entità per il `Person` tabella con una condizione che specifica la modalità determinare se un `Person` riga rappresenta che tipo derivato.</span><span class="sxs-lookup"><span data-stu-id="1d73e-136">Map each derived entity to the `Person` table with a condition that specifies how to determine whether a `Person` row represents that derived type.</span></span>

## <a name="adding-instructor-and-student-entities"></a><span data-ttu-id="1d73e-137">Aggiunta di entità Instructor e Student</span><span class="sxs-lookup"><span data-stu-id="1d73e-137">Adding Instructor and Student Entities</span></span>

<span data-ttu-id="1d73e-138">Aprire la <em>SchoolModel</em> del file, fare doppio clic su un'area non occupata nella finestra di progettazione, seleziona <strong>Add</strong>, quindi selezionare <strong>entità</strong><em>.</em></span><span class="sxs-lookup"><span data-stu-id="1d73e-138">Open the <em>SchoolModel.edmx</em> file, right-click an unoccupied area in the designer, select <strong>Add</strong>, then select <strong>Entity</strong><em>.</em></span></span>

<span data-ttu-id="1d73e-139">[![Image01](the-entity-framework-and-aspnet-getting-started-part-6/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="1d73e-139">[![image01](the-entity-framework-and-aspnet-getting-started-part-6/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image5.png)</span></span>

<span data-ttu-id="1d73e-140">Nel **Aggiungi entità** nome dell'entità nella finestra di dialogo `Instructor` e impostare il relativo **tipo di Base** opzione `Person`.</span><span class="sxs-lookup"><span data-stu-id="1d73e-140">In the **Add Entity** dialog box, name the entity `Instructor` and set its **Base type** option to `Person`.</span></span>

<span data-ttu-id="1d73e-141">[![image02](the-entity-framework-and-aspnet-getting-started-part-6/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="1d73e-141">[![image02](the-entity-framework-and-aspnet-getting-started-part-6/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image7.png)</span></span>

<span data-ttu-id="1d73e-142">Fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="1d73e-142">Click **OK**.</span></span> <span data-ttu-id="1d73e-143">La finestra di progettazione crea un `Instructor` entità da cui deriva il `Person` entità.</span><span class="sxs-lookup"><span data-stu-id="1d73e-143">The designer creates an `Instructor` entity that derives from the `Person` entity.</span></span> <span data-ttu-id="1d73e-144">La nuova entità non dispone ancora di qualsiasi proprietà.</span><span class="sxs-lookup"><span data-stu-id="1d73e-144">The new entity does not yet have any properties.</span></span>

<span data-ttu-id="1d73e-145">[![image03](the-entity-framework-and-aspnet-getting-started-part-6/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="1d73e-145">[![image03](the-entity-framework-and-aspnet-getting-started-part-6/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image9.png)</span></span>

<span data-ttu-id="1d73e-146">Ripetere la procedura per creare un `Student` entità derivata da `Person`.</span><span class="sxs-lookup"><span data-stu-id="1d73e-146">Repeat the procedure to create a `Student` entity that also derives from `Person`.</span></span>

<span data-ttu-id="1d73e-147">Solo i docenti avere date di assunzione, pertanto è necessario spostare la proprietà dal `Person` entità per il `Instructor` entità.</span><span class="sxs-lookup"><span data-stu-id="1d73e-147">Only instructors have hire dates, so you need to move that property from the `Person` entity to the `Instructor` entity.</span></span> <span data-ttu-id="1d73e-148">Nel `Person` entità, fare doppio clic su di `HireDate` proprietà e fare clic su **Taglia**.</span><span class="sxs-lookup"><span data-stu-id="1d73e-148">In the `Person` entity, right-click the `HireDate` property and click **Cut**.</span></span> <span data-ttu-id="1d73e-149">Quindi fare doppio clic su **proprietà** nel `Instructor` entità e fare clic su **Incolla**.</span><span class="sxs-lookup"><span data-stu-id="1d73e-149">Then right-click **Properties** in the `Instructor` entity and click **Paste**.</span></span>

<span data-ttu-id="1d73e-150">[![image04](the-entity-framework-and-aspnet-getting-started-part-6/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="1d73e-150">[![image04](the-entity-framework-and-aspnet-getting-started-part-6/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image11.png)</span></span>

<span data-ttu-id="1d73e-151">La data di assunzione di un `Instructor` entità non può essere null.</span><span class="sxs-lookup"><span data-stu-id="1d73e-151">The hire date of an `Instructor` entity cannot be null.</span></span> <span data-ttu-id="1d73e-152">Fare doppio clic su di `HireDate` proprietà, fare clic su **proprietà**e quindi il **proprietà** Modifica finestra `Nullable` per `False`.</span><span class="sxs-lookup"><span data-stu-id="1d73e-152">Right-click the `HireDate` property, click **Properties**, and then in the **Properties** window change `Nullable` to `False`.</span></span>

<span data-ttu-id="1d73e-153">[![image05](the-entity-framework-and-aspnet-getting-started-part-6/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="1d73e-153">[![image05](the-entity-framework-and-aspnet-getting-started-part-6/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image13.png)</span></span>

<span data-ttu-id="1d73e-154">Ripetere la procedura per spostare il `EnrollmentDate` proprietà il `Person` entità per il `Student` entità.</span><span class="sxs-lookup"><span data-stu-id="1d73e-154">Repeat the procedure to move the `EnrollmentDate` property from the `Person` entity to the `Student` entity.</span></span> <span data-ttu-id="1d73e-155">Assicurarsi inoltre impostare `Nullable` a `False` per il `EnrollmentDate` proprietà.</span><span class="sxs-lookup"><span data-stu-id="1d73e-155">Make sure that you also set `Nullable` to `False` for the `EnrollmentDate` property.</span></span>

<span data-ttu-id="1d73e-156">Ora che un `Person` entità include solo le proprietà comuni a `Instructor` e `Student` entità (ad eccezione delle proprietà di navigazione, che non si spostano), l'entità può essere utilizzato solo come un'entità di base nella struttura di ereditarietà.</span><span class="sxs-lookup"><span data-stu-id="1d73e-156">Now that a `Person` entity has only the properties that are common to `Instructor` and `Student` entities (aside from navigation properties, which you're not moving), the entity can only be used as a base entity in the inheritance structure.</span></span> <span data-ttu-id="1d73e-157">Pertanto, è necessario assicurare che non sia mai considerata come entità indipendenti.</span><span class="sxs-lookup"><span data-stu-id="1d73e-157">Therefore, you need to ensure that it's never treated as an independent entity.</span></span> <span data-ttu-id="1d73e-158">Fare doppio clic sul `Person` entità, selezionare **proprietà**e quindi il **proprietà** finestra modificare il valore della **astratta** proprietà  **True**.</span><span class="sxs-lookup"><span data-stu-id="1d73e-158">Right-click the `Person` entity, select **Properties**, and then in the **Properties** window change the value of the **Abstract** property to **True**.</span></span>

<span data-ttu-id="1d73e-159">[![Image06](the-entity-framework-and-aspnet-getting-started-part-6/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="1d73e-159">[![image06](the-entity-framework-and-aspnet-getting-started-part-6/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image15.png)</span></span>

## <a name="mapping-instructor-and-student-entities-to-the-person-table"></a><span data-ttu-id="1d73e-160">Mapping di entità Instructor e Student alla tabella Person</span><span class="sxs-lookup"><span data-stu-id="1d73e-160">Mapping Instructor and Student Entities to the Person Table</span></span>

<span data-ttu-id="1d73e-161">È ora necessario indicare a Entity Framework come distinguere `Instructor` e `Student` entità nel database.</span><span class="sxs-lookup"><span data-stu-id="1d73e-161">Now you need to tell the Entity Framework how to differentiate between `Instructor` and `Student` entities in the database.</span></span>

<span data-ttu-id="1d73e-162">Fare doppio clic su di `Instructor` entità e selezionare **tabella Mapping**.</span><span class="sxs-lookup"><span data-stu-id="1d73e-162">Right-click the `Instructor` entity and select **Table Mapping**.</span></span> <span data-ttu-id="1d73e-163">Nel **Dettagli Mapping** finestra, fare clic su **aggiungere una tabella o vista** e selezionare **persona**.</span><span class="sxs-lookup"><span data-stu-id="1d73e-163">In the **Mapping Details** window, click **Add a Table or View** and select **Person**.</span></span>

<span data-ttu-id="1d73e-164">[![image07](the-entity-framework-and-aspnet-getting-started-part-6/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="1d73e-164">[![image07](the-entity-framework-and-aspnet-getting-started-part-6/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image17.png)</span></span>

<span data-ttu-id="1d73e-165">Fare clic su **aggiungere una condizione**, quindi selezionare **HireDate**.</span><span class="sxs-lookup"><span data-stu-id="1d73e-165">Click **Add a Condition**, and then select **HireDate**.</span></span>

<span data-ttu-id="1d73e-166">[![Image09](the-entity-framework-and-aspnet-getting-started-part-6/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="1d73e-166">[![image09](the-entity-framework-and-aspnet-getting-started-part-6/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image19.png)</span></span>

<span data-ttu-id="1d73e-167">Modifica **operatore** a **è** e **valore / proprietà** a **non Null**.</span><span class="sxs-lookup"><span data-stu-id="1d73e-167">Change **Operator** to **Is** and **Value / Property** to **Not Null**.</span></span>

<span data-ttu-id="1d73e-168">[![image10](the-entity-framework-and-aspnet-getting-started-part-6/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="1d73e-168">[![image10](the-entity-framework-and-aspnet-getting-started-part-6/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image21.png)</span></span>

<span data-ttu-id="1d73e-169">Ripetere la procedura per la `Students` entità, che specifica l'entità che esegue il mapping al `Person` tabella quando la `EnrollmentDate` colonna non è null.</span><span class="sxs-lookup"><span data-stu-id="1d73e-169">Repeat the procedure for the `Students` entity, specifying that this entity maps to the `Person` table when the `EnrollmentDate` column is not null.</span></span> <span data-ttu-id="1d73e-170">Successivamente, salvare e chiudere il modello di dati.</span><span class="sxs-lookup"><span data-stu-id="1d73e-170">Then save and close the data model.</span></span>

<span data-ttu-id="1d73e-171">Compilare il progetto per creare nuove entità come classi e renderli disponibili nella finestra di progettazione.</span><span class="sxs-lookup"><span data-stu-id="1d73e-171">Build the project in order to create the new entities as classes and make them available in the designer.</span></span>

## <a name="using-the-instructor-and-student-entities"></a><span data-ttu-id="1d73e-172">Utilizzando l'entità Instructor e Student</span><span class="sxs-lookup"><span data-stu-id="1d73e-172">Using the Instructor and Student Entities</span></span>

<span data-ttu-id="1d73e-173">Al momento della creazione le pagine web che utilizzano dati student e instructor, è associato a dati per il `Person` è filtrata in base a e set di entità di `HireDate` o `EnrollmentDate` proprietà per limitare i dati restituiti a studenti o i docenti.</span><span class="sxs-lookup"><span data-stu-id="1d73e-173">When you created the web pages that work with student and instructor data, you databound them to the `Person` entity set, and you filtered on the `HireDate` or `EnrollmentDate` property to restrict the returned data to students or instructors.</span></span> <span data-ttu-id="1d73e-174">Tuttavia, a questo punto quando si associa ogni controllo origine dati per il `Person` del set di entità, è possibile specificare che solo `Student` o `Instructor` tipi di entità devono essere selezionati.</span><span class="sxs-lookup"><span data-stu-id="1d73e-174">However, now when you bind each data source control to the `Person` entity set, you can specify that only `Student` or `Instructor` entity types should be selected.</span></span> <span data-ttu-id="1d73e-175">Poiché Entity Framework grado di distinguere gli studenti e insegnanti nel `Person` set di entità, è possibile rimuovere il `Where` le impostazioni di proprietà immesso manualmente a tale scopo.</span><span class="sxs-lookup"><span data-stu-id="1d73e-175">Because the Entity Framework knows how to differentiate students and instructors in the `Person` entity set, you can remove the `Where` property settings you entered manually to do that.</span></span>

<span data-ttu-id="1d73e-176">Nella finestra di progettazione Visual Studio, è possibile specificare tipo di entità che un `EntityDataSource` controllo è necessario selezionare nel **EntityTypeFilter** casella di riepilogo a discesa del `Configure Data Source` procedura guidata, come illustrato nell'esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="1d73e-176">In the Visual Studio Designer, you can specify the entity type that an `EntityDataSource` control should select in the **EntityTypeFilter** drop-down box of the `Configure Data Source` wizard, as shown in the following example.</span></span>

<span data-ttu-id="1d73e-177">[![Image13](the-entity-framework-and-aspnet-getting-started-part-6/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="1d73e-177">[![image13](the-entity-framework-and-aspnet-getting-started-part-6/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image23.png)</span></span>

<span data-ttu-id="1d73e-178">E il **proprietà** finestra è possibile rimuovere `Where` valori della clausola che non sono più necessari, come illustrato nell'esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="1d73e-178">And in the **Properties** window you can remove `Where` clause values that are no longer needed, as shown in the following example.</span></span>

<span data-ttu-id="1d73e-179">[![image14](the-entity-framework-and-aspnet-getting-started-part-6/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="1d73e-179">[![image14](the-entity-framework-and-aspnet-getting-started-part-6/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image25.png)</span></span>

<span data-ttu-id="1d73e-180">Tuttavia, poiché è stato modificato il markup per `EntityDataSource` controlli da usare il `ContextTypeName` attributo, non è possibile eseguire il **Configura origine dati** procedura guidata in `EntityDataSource` i controlli che è già stato creato.</span><span class="sxs-lookup"><span data-stu-id="1d73e-180">However, because you've changed the markup for `EntityDataSource` controls to use the `ContextTypeName` attribute, you cannot run the **Configure Data Source** wizard on `EntityDataSource` controls that you've already created.</span></span> <span data-ttu-id="1d73e-181">Pertanto, si apporteranno le modifiche necessarie modificando invece markup.</span><span class="sxs-lookup"><span data-stu-id="1d73e-181">Therefore, you'll make the required changes by changing markup instead.</span></span>

<span data-ttu-id="1d73e-182">Aprire il *Students.aspx* pagina.</span><span class="sxs-lookup"><span data-stu-id="1d73e-182">Open the *Students.aspx* page.</span></span> <span data-ttu-id="1d73e-183">Nel `StudentsEntityDataSource` di controllo, rimuovere il `Where` attributo e aggiungere un `EntityTypeFilter="Student"` attributo.</span><span class="sxs-lookup"><span data-stu-id="1d73e-183">In the `StudentsEntityDataSource` control, remove the `Where` attribute and add an `EntityTypeFilter="Student"` attribute.</span></span> <span data-ttu-id="1d73e-184">Il markup sarà ora simile all'esempio seguente:</span><span class="sxs-lookup"><span data-stu-id="1d73e-184">The markup will now resemble the following example:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample1.aspx)]

<span data-ttu-id="1d73e-185">L'impostazione di `EntityTypeFilter` attributo assicura che il `EntityDataSource` controllo selezionerà solo il tipo di entità specificato.</span><span class="sxs-lookup"><span data-stu-id="1d73e-185">Setting the `EntityTypeFilter` attribute ensures that the `EntityDataSource` control will select only the specified entity type.</span></span> <span data-ttu-id="1d73e-186">Se si desidera recuperare gli `Student` e `Instructor` tipi di entità, non si imposta questo attributo.</span><span class="sxs-lookup"><span data-stu-id="1d73e-186">If you wanted to retrieve both `Student` and `Instructor` entity types, you would not set this attribute.</span></span> <span data-ttu-id="1d73e-187">(È possibile scegliere di recupero di più tipi di entità con una `EntityDataSource` controllo solo se si utilizza il controllo di accesso ai dati di sola lettura.</span><span class="sxs-lookup"><span data-stu-id="1d73e-187">(You have the option of retrieving multiple entity types with one `EntityDataSource` control only if you're using the control for read-only data access.</span></span> <span data-ttu-id="1d73e-188">Se si utilizza un `EntityDataSource` di controllo per inserire, aggiornare o eliminare entità e se il set di entità è associato a può contenere più tipi, è possibile utilizzare solo con un tipo di entità e che è necessario impostare questo attributo.)</span><span class="sxs-lookup"><span data-stu-id="1d73e-188">If you're using an `EntityDataSource` control to insert, update, or delete entities, and if the entity set it's bound to can contain multiple types, you can only work with one entity type, and you have to set this attribute.)</span></span>

<span data-ttu-id="1d73e-189">Ripetere la procedura per il `SearchEntityDataSource` controllare, ad eccezione del fatto solo la parte di rimuovere il `Where` attributo che consente di selezionare `Student` entità invece di rimuovere completamente la proprietà.</span><span class="sxs-lookup"><span data-stu-id="1d73e-189">Repeat the procedure for the `SearchEntityDataSource` control, except remove only the part of the `Where` attribute that selects `Student` entities instead of removing the property altogether.</span></span> <span data-ttu-id="1d73e-190">Il tag di apertura del controllo sarà ora simile all'esempio seguente:</span><span class="sxs-lookup"><span data-stu-id="1d73e-190">The opening tag of the control will now resemble the following example:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample2.aspx)]

<span data-ttu-id="1d73e-191">Eseguire la pagina per verificare che funzioni come in precedenza.</span><span class="sxs-lookup"><span data-stu-id="1d73e-191">Run the page to verify that it still works as it did before.</span></span>

<span data-ttu-id="1d73e-192">[![image15](the-entity-framework-and-aspnet-getting-started-part-6/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="1d73e-192">[![image15](the-entity-framework-and-aspnet-getting-started-part-6/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image27.png)</span></span>

<span data-ttu-id="1d73e-193">Aggiornare le pagine seguenti creati nelle esercitazioni precedenti in modo che utilizzino il nuovo `Student` e `Instructor` entità anziché `Person` entità, quindi eseguirli per verificare che funzionino come in precedenza:</span><span class="sxs-lookup"><span data-stu-id="1d73e-193">Update the following pages that you created in earlier tutorials so that they use the new `Student` and `Instructor` entities instead of `Person` entities, then run them to verify that they work as they did before:</span></span>

- <span data-ttu-id="1d73e-194">In *StudentsAdd.aspx*, aggiungere `EntityTypeFilter="Student"` per il `StudentsEntityDataSource` controllo.</span><span class="sxs-lookup"><span data-stu-id="1d73e-194">In *StudentsAdd.aspx*, add `EntityTypeFilter="Student"` to the `StudentsEntityDataSource` control.</span></span> <span data-ttu-id="1d73e-195">Il markup sarà ora simile all'esempio seguente:</span><span class="sxs-lookup"><span data-stu-id="1d73e-195">The markup will now resemble the following example:</span></span> 

    [!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample3.aspx)]

    <span data-ttu-id="1d73e-196">[![image16](the-entity-framework-and-aspnet-getting-started-part-6/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="1d73e-196">[![image16](the-entity-framework-and-aspnet-getting-started-part-6/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image29.png)</span></span>
- <span data-ttu-id="1d73e-197">In *About*, aggiungere `EntityTypeFilter="Student"` per il `StudentStatisticsEntityDataSource` e rimuovere controllo `Where="it.EnrollmentDate is not null"`.</span><span class="sxs-lookup"><span data-stu-id="1d73e-197">In *About.aspx*, add `EntityTypeFilter="Student"` to the `StudentStatisticsEntityDataSource` control and remove `Where="it.EnrollmentDate is not null"`.</span></span> <span data-ttu-id="1d73e-198">Il markup sarà ora simile all'esempio seguente:</span><span class="sxs-lookup"><span data-stu-id="1d73e-198">The markup will now resemble the following example:</span></span> 

    [!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample4.aspx)]

    <span data-ttu-id="1d73e-199">[![image17](the-entity-framework-and-aspnet-getting-started-part-6/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="1d73e-199">[![image17](the-entity-framework-and-aspnet-getting-started-part-6/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image31.png)</span></span>
- <span data-ttu-id="1d73e-200">In *Instructors.aspx* e *InstructorsCourses.aspx*, aggiungere `EntityTypeFilter="Instructor"` per il `InstructorsEntityDataSource` e rimuovere controllo `Where="it.HireDate is not null"`.</span><span class="sxs-lookup"><span data-stu-id="1d73e-200">In *Instructors.aspx* and *InstructorsCourses.aspx*, add `EntityTypeFilter="Instructor"` to the `InstructorsEntityDataSource` control and remove `Where="it.HireDate is not null"`.</span></span> <span data-ttu-id="1d73e-201">Il markup in *Instructors.aspx* ora simile all'esempio seguente:</span><span class="sxs-lookup"><span data-stu-id="1d73e-201">The markup in *Instructors.aspx* now resembles the following example:</span></span> 

    [!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample5.aspx)]

    <span data-ttu-id="1d73e-202">[![image18](the-entity-framework-and-aspnet-getting-started-part-6/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="1d73e-202">[![image18](the-entity-framework-and-aspnet-getting-started-part-6/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image33.png)</span></span>

    <span data-ttu-id="1d73e-203">Il markup in *InstructorsCourses.aspx* sarà ora simile all'esempio seguente:</span><span class="sxs-lookup"><span data-stu-id="1d73e-203">The markup in *InstructorsCourses.aspx* will now resemble the following example:</span></span>

    [!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample6.aspx)]

    <span data-ttu-id="1d73e-204">[![image19](the-entity-framework-and-aspnet-getting-started-part-6/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="1d73e-204">[![image19](the-entity-framework-and-aspnet-getting-started-part-6/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image35.png)</span></span>

<span data-ttu-id="1d73e-205">In seguito a queste modifiche, è stato migliorato manutenibilità dell'applicazione Contoso University in diversi modi.</span><span class="sxs-lookup"><span data-stu-id="1d73e-205">As a result of these changes, you've improved the Contoso University application's maintainability in several ways.</span></span> <span data-ttu-id="1d73e-206">Sono state spostate della logica di selezione e convalida il livello di interfaccia utente (*aspx* markup) e renderlo parte integrante del livello di accesso ai dati.</span><span class="sxs-lookup"><span data-stu-id="1d73e-206">You've moved selection and validation logic out of the UI layer (*.aspx* markup) and made it an integral part of the data access layer.</span></span> <span data-ttu-id="1d73e-207">Questo aiuta a isolare il codice dell'applicazione di modifiche che è possibile apportare in futuro per lo schema del database o il modello di dati.</span><span class="sxs-lookup"><span data-stu-id="1d73e-207">This helps to isolate your application code from changes that you might make in the future to the database schema or the data model.</span></span> <span data-ttu-id="1d73e-208">Ad esempio, è possibile decidere che gli studenti potrebbero essere assunzione come ausilio docenti e pertanto ottengono una data di assunzione.</span><span class="sxs-lookup"><span data-stu-id="1d73e-208">For example, you could decide that students might be hired as teachers' aids and therefore would get a hire date.</span></span> <span data-ttu-id="1d73e-209">È quindi possibile aggiungere una nuova proprietà per differenziare gli studenti da istruttori e aggiornare il modello di dati.</span><span class="sxs-lookup"><span data-stu-id="1d73e-209">You could then add a new property to differentiate students from instructors and update the data model.</span></span> <span data-ttu-id="1d73e-210">Nessun codice nell'applicazione web dovrà essere modificato, ad eccezione di in cui si desidera visualizzare una data di assunzione per studenti.</span><span class="sxs-lookup"><span data-stu-id="1d73e-210">No code in the web application would need to change except where you wanted to show a hire date for students.</span></span> <span data-ttu-id="1d73e-211">Un altro vantaggio dell'aggiunta di `Instructor` e `Student` entità è che il codice è più facilmente comprensibile, rispetto a quando definito `Person` gli oggetti che sono stati effettivamente studenti o i docenti.</span><span class="sxs-lookup"><span data-stu-id="1d73e-211">Another benefit of adding `Instructor` and `Student` entities is that your code is more readily understandable than when it referred to `Person` objects that were actually students or instructors.</span></span>

<span data-ttu-id="1d73e-212">Abbiamo visto come implementare un modello di ereditarietà in Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="1d73e-212">You've now seen one way to implement an inheritance pattern in the Entity Framework.</span></span> <span data-ttu-id="1d73e-213">Nell'esercitazione seguente, si apprenderà come usare stored procedure per avere maggiore controllo sulla modalità di Entity Framework accede al database.</span><span class="sxs-lookup"><span data-stu-id="1d73e-213">In the following tutorial, you'll learn how to use stored procedures in order to have more control over how the Entity Framework accesses the database.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="1d73e-214">[Precedente](the-entity-framework-and-aspnet-getting-started-part-5.md)
> [Successivo](the-entity-framework-and-aspnet-getting-started-part-7.md)</span><span class="sxs-lookup"><span data-stu-id="1d73e-214">[Previous](the-entity-framework-and-aspnet-getting-started-part-5.md)
[Next](the-entity-framework-and-aspnet-getting-started-part-7.md)</span></span>
