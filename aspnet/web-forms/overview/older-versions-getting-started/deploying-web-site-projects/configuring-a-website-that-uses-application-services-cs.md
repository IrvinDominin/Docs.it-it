---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/configuring-a-website-that-uses-application-services-cs
title: Configurazione di un sito Web che utilizza i servizi delle applicazioni (c#) | Documenti Microsoft
author: rick-anderson
description: ASP.NET versione 2.0 è stato introdotto una serie di servizi delle applicazioni, che fanno parte di .NET Framework e vengono usati come blocco predefinito di un gruppo di servizi,...
ms.author: aspnetcontent
manager: wpickett
ms.date: 04/23/2009
ms.topic: article
ms.assetid: 1e33d1c6-3f9f-4c26-81e2-2a8f8907bb05
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/configuring-a-website-that-uses-application-services-cs
msc.type: authoredcontent
ms.openlocfilehash: da4ef328e3461e96fbb0cdca156ce1b9a076748f
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/06/2018
ms.locfileid: "30890655"
---
<a name="configuring-a-website-that-uses-application-services-c"></a><span data-ttu-id="38231-103">Configurazione di un sito Web che utilizza i servizi delle applicazioni (c#)</span><span class="sxs-lookup"><span data-stu-id="38231-103">Configuring a Website that Uses Application Services (C#)</span></span>
====================
<span data-ttu-id="38231-104">da [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="38231-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="38231-105">[Scaricare codice](http://download.microsoft.com/download/E/6/F/E6FE3A1F-EE3A-4119-989A-33D1A9F6F6DD/ASPNET_Hosting_Tutorial_09_CS.zip) o [Scarica il PDF](http://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial09_AppServicesConfig_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="38231-105">[Download Code](http://download.microsoft.com/download/E/6/F/E6FE3A1F-EE3A-4119-989A-33D1A9F6F6DD/ASPNET_Hosting_Tutorial_09_CS.zip) or [Download PDF](http://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial09_AppServicesConfig_cs.pdf)</span></span>

> <span data-ttu-id="38231-106">ASP.NET versione 2.0 è stato introdotto una serie di servizi delle applicazioni, che fanno parte di .NET Framework e vengono usati come un gruppo di servizi di blocchi predefiniti che è possibile utilizzare per aggiungere funzionalità avanzate per l'applicazione web.</span><span class="sxs-lookup"><span data-stu-id="38231-106">ASP.NET version 2.0 introduced a series of application services, which are part of the .NET Framework and serve as a suite of building block services that you can use to add rich functionality to your web application.</span></span> <span data-ttu-id="38231-107">In questa esercitazione viene illustrato come configurare un sito Web nell'ambiente di produzione, utilizzare i servizi delle applicazioni e i problemi comuni con la gestione degli account utente e ruoli nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="38231-107">This tutorial explores how to configure a website in the production environment to use application services and addresses common issues with managing user accounts and roles on the production environment.</span></span>


## <a name="introduction"></a><span data-ttu-id="38231-108">Introduzione</span><span class="sxs-lookup"><span data-stu-id="38231-108">Introduction</span></span>

<span data-ttu-id="38231-109">ASP.NET versione 2.0 è stata introdotta una serie di *servizi delle applicazioni*, che fanno parte di .NET Framework e fungono da un gruppo di blocchi predefiniti di servizi che si possa usare per aggiungere funzionalità avanzate per l'applicazione web.</span><span class="sxs-lookup"><span data-stu-id="38231-109">ASP.NET version 2.0 introduced a series of *application services*, which are part of the .NET Framework and serve as a suite of building block services that you can use to add rich functionality to your web application.</span></span> <span data-ttu-id="38231-110">I servizi delle applicazioni includono:</span><span class="sxs-lookup"><span data-stu-id="38231-110">The application services include:</span></span>

- <span data-ttu-id="38231-111">**L'appartenenza** : un'API per la creazione e gestione degli account utente.</span><span class="sxs-lookup"><span data-stu-id="38231-111">**Membership** - an API for creating and managing user accounts.</span></span>
- <span data-ttu-id="38231-112">**Ruoli** : un'API per la classificazione degli utenti in gruppi.</span><span class="sxs-lookup"><span data-stu-id="38231-112">**Roles** - an API for categorizing users into groups.</span></span>
- <span data-ttu-id="38231-113">**Profilo** : un'API per l'archiviazione dei contenuti personalizzato, specifico dell'utente.</span><span class="sxs-lookup"><span data-stu-id="38231-113">**Profile** - an API for storing custom, user-specific content.</span></span>
- <span data-ttu-id="38231-114">**Mappa del sito** : un'API per la definizione di una struttura logica del sito s sotto forma di una gerarchia, che può quindi essere visualizzata tramite i controlli di navigazione, ad esempio menu e percorsi di navigazione.</span><span class="sxs-lookup"><span data-stu-id="38231-114">**Site Map** - an API for defining a site s logical structure in the form of a hierarchy, which can then be displayed via navigation controls, such as menus and breadcrumbs.</span></span>
- <span data-ttu-id="38231-115">**Personalizzazione** : un'API per la gestione delle preferenze di personalizzazione, generalmente utilizzate con [ *WebParts*](https://msdn.microsoft.com/library/e0s9t4ck.aspx).</span><span class="sxs-lookup"><span data-stu-id="38231-115">**Personalization** - an API for maintaining customization preferences, most often used with [*WebParts*](https://msdn.microsoft.com/library/e0s9t4ck.aspx).</span></span>
- <span data-ttu-id="38231-116">**Monitoraggio integrità** : un'API per il monitoraggio delle prestazioni, sicurezza, gli errori e altre metriche di integrità di sistema per un'applicazione web in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="38231-116">**Health Monitoring** - an API for monitoring performance, security, errors, and other system health metrics for a running web application.</span></span>
  

<span data-ttu-id="38231-117">I servizi delle applicazioni API non vengono associati a un'implementazione specifica.</span><span class="sxs-lookup"><span data-stu-id="38231-117">The application services APIs are not tied to a specific implementation.</span></span> <span data-ttu-id="38231-118">In alternativa, è indicare i servizi delle applicazioni di utilizzare un particolare *provider*, e tale provider implementa il servizio utilizzando una particolare tecnologia.</span><span class="sxs-lookup"><span data-stu-id="38231-118">Instead, you instruct the application services to use a particular *provider*, and that provider implements the service using a particular technology.</span></span> <span data-ttu-id="38231-119">Il provider più comunemente usate per le applicazioni web basati su Internet ospitate in una società di hosting web sono i provider che usano un'implementazione di database di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="38231-119">The most commonly used providers for Internet-based web applications hosted at a web hosting company are those providers that use a SQL Server database implementation.</span></span> <span data-ttu-id="38231-120">Ad esempio, il `SqlMembershipProvider` è un provider per l'API di appartenenze che archivia informazioni sull'account utente in un database di Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="38231-120">For example, the `SqlMembershipProvider` is a provider for the Membership API that stores user account information in a Microsoft SQL Server database.</span></span>

<span data-ttu-id="38231-121">Utilizzando i servizi delle applicazioni e i provider SQL Server consente di aggiungere alcuni problemi quando si distribuisce l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="38231-121">Using the application services and SQL Server providers adds some challenges when deploying the application.</span></span> <span data-ttu-id="38231-122">Per iniziare, gli oggetti di database di servizi di applicazione devono essere creati in modo corretto nel database di sviluppo e produzione e inizializzati in modo appropriato.</span><span class="sxs-lookup"><span data-stu-id="38231-122">For starters, the application services database objects must be properly created on both the development and production databases and appropriately initialized.</span></span> <span data-ttu-id="38231-123">Sono anche importanti impostazioni di configurazione che devono essere apportate.</span><span class="sxs-lookup"><span data-stu-id="38231-123">There are also important configuration settings that need to be made.</span></span>

> [!NOTE]
> <span data-ttu-id="38231-124">I servizi delle applicazioni API sono state progettate con la [ *modello provider*](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx), un modello di progettazione che consente un'API s dettagli di implementazione deve essere fornito in fase di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="38231-124">The application services APIs were designed using the [*provider model*](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx), a design pattern that allows for an API s implementation details to be provided at runtime.</span></span> <span data-ttu-id="38231-125">.NET Framework viene fornito con un numero di provider di servizi di applicazione che può essere utilizzato, ad esempio il `SqlMembershipProvider` e `SqlRoleProvider`, quali sono i provider per l'appartenenza e ruoli API che utilizzano un Server SQL database implementazione.</span><span class="sxs-lookup"><span data-stu-id="38231-125">The .NET Framework ships with a number of application service providers that can be used, such as the `SqlMembershipProvider` and `SqlRoleProvider`, which are providers for the Membership and Roles APIs that use a SQL Server database implementation.</span></span> <span data-ttu-id="38231-126">È inoltre possibile creare e plug-in un provider personalizzato.</span><span class="sxs-lookup"><span data-stu-id="38231-126">You can also create and plug-in a custom provider.</span></span> <span data-ttu-id="38231-127">In realtà, l'applicazione web di recensioni già contiene un provider personalizzato per l'API di mappa del sito (`ReviewSiteMapProvider`), che costruisce la mappa del sito dai dati di `Genres` e `Books` nelle tabelle del database.</span><span class="sxs-lookup"><span data-stu-id="38231-127">In fact, the Book Reviews web application already contains a custom provider for the Site Map API (`ReviewSiteMapProvider`), which constructs the site map from the data in the `Genres` and `Books` tables in the database.</span></span>


<span data-ttu-id="38231-128">In questa esercitazione inizia con un'occhiata a come estesa l'applicazione web recensioni per utilizzare l'appartenenza e l'API di ruoli.</span><span class="sxs-lookup"><span data-stu-id="38231-128">This tutorial starts with a look at how I extended the Book Reviews web application to use the Membership and Roles APIs.</span></span> <span data-ttu-id="38231-129">Quindi illustra in dettaglio la distribuzione di un'applicazione web che utilizza i servizi delle applicazioni con un'implementazione di un database di SQL Server e si conclude con la risoluzione di problemi comuni di gestione di account utente e ruoli nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="38231-129">It then walks through deploying a web application that uses application services with a SQL Server database implementation, and concludes by addressing common issues with managing user accounts and roles on the production environment.</span></span>

## <a name="updates-to-the-book-reviews-application"></a><span data-ttu-id="38231-130">Aggiornamenti all'applicazione revisioni Rubrica</span><span class="sxs-lookup"><span data-stu-id="38231-130">Updates to the Book Reviews Application</span></span>

<span data-ttu-id="38231-131">Negli ultimi due esercitazioni che l'applicazione web revisioni del libro è stato aggiornato da un sito Web statico a un'applicazione web dinamica, basati sui dati completo di un set di pagine di amministrazione per la gestione di generi e commenti.</span><span class="sxs-lookup"><span data-stu-id="38231-131">Over the past couple tutorials the Book Reviews web application was updated from a static website to a dynamic, data-driven web application complete with a set of administration pages for managing genres and reviews.</span></span> <span data-ttu-id="38231-132">Tuttavia, in questa sezione di amministrazione non è protetto, qualsiasi utente che conosce l'URL della pagina Amministrazione (o tentativi) può walzer e creare, modificare o eliminare le revisioni sono disponibili sul sito.</span><span class="sxs-lookup"><span data-stu-id="38231-132">However, this administration section is currently not protected - any user who knows (or guesses) the administration page URL can waltz in and create, edit, or delete reviews on our site.</span></span> <span data-ttu-id="38231-133">Un modo comune per proteggere determinate parti di un sito Web consiste nell'implementare gli account utente e quindi usare le regole di autorizzazione URL per limitare l'accesso a determinati utenti o ruoli.</span><span class="sxs-lookup"><span data-stu-id="38231-133">A common way to protect certain portions of a website is to implement user accounts and then use URL authorization rules to restrict access to certain users or roles.</span></span> <span data-ttu-id="38231-134">L'applicazione web recensioni disponibile per il download in questa esercitazione supporta i ruoli e account utente.</span><span class="sxs-lookup"><span data-stu-id="38231-134">The Book Reviews web application available for download with this tutorial supports user accounts and roles.</span></span> <span data-ttu-id="38231-135">Dispone di un singolo ruolo definito denominato amministratore e solo gli utenti in questo ruolo possono accedere alle pagine di amministrazione.</span><span class="sxs-lookup"><span data-stu-id="38231-135">It has a single role defined named Admin and only users in this role can access the administration pages.</span></span>

> [!NOTE]
> <span data-ttu-id="38231-136">I tre account utente creato nell'applicazione web recensioni: Scott Jisun e Alice.</span><span class="sxs-lookup"><span data-stu-id="38231-136">I ve created three user accounts in the Book Reviews web application: Scott, Jisun, and Alice.</span></span> <span data-ttu-id="38231-137">Tutti e tre gli utenti hanno la stessa password: **password!**</span><span class="sxs-lookup"><span data-stu-id="38231-137">All three users have the same password: **password!**</span></span> <span data-ttu-id="38231-138">Scott e Jisun assegnato il ruolo di amministratore, Alice non lo è.</span><span class="sxs-lookup"><span data-stu-id="38231-138">Scott and Jisun are in the Admin role, Alice is not.</span></span> <span data-ttu-id="38231-139">Le pagine di amministrazione non s del sito sono ancora accessibili agli utenti anonimi.</span><span class="sxs-lookup"><span data-stu-id="38231-139">The site s non-administration pages are still accessible to anonymous users.</span></span> <span data-ttu-id="38231-140">Ovvero, non è necessaria accedere a visitare il sito, a meno che non si desidera amministrare, nel qual caso è necessario accedere come utente nel ruolo di amministratore.</span><span class="sxs-lookup"><span data-stu-id="38231-140">That is, you do not need to sign in to visit the site, unless you want to administer it, in which case you must sign in as a user in the Admin role.</span></span>


<span data-ttu-id="38231-141">Pagina master recensioni applicazione s è stata aggiornata per includere un'interfaccia utente differente per gli utenti anonimi e autenticati.</span><span class="sxs-lookup"><span data-stu-id="38231-141">The Book Reviews application s master page has been updated to include a different user interface for authenticated and anonymous users.</span></span> <span data-ttu-id="38231-142">Se un utente anonimo visita il sito vede un collegamento di accesso nell'angolo superiore destro.</span><span class="sxs-lookup"><span data-stu-id="38231-142">If an anonymous user visits the site she sees a Login link in the upper right corner.</span></span> <span data-ttu-id="38231-143">Un utente autenticato vede il messaggio "Bentornato, *username*!"</span><span class="sxs-lookup"><span data-stu-id="38231-143">An authenticated user sees the message, "Welcome back, *username*!"</span></span> <span data-ttu-id="38231-144">e un collegamento per la disconnessione. Esiste anche una pagina di accesso s (`~/Login.aspx`), che contiene un controllo di accesso Web che fornisce l'interfaccia utente e la logica per l'autenticazione di un visitatore.</span><span class="sxs-lookup"><span data-stu-id="38231-144">and a link to log out. There s also a login page (`~/Login.aspx`), which contains a Login Web control that provides the user interface and logic for authenticating a visitor.</span></span> <span data-ttu-id="38231-145">Solo gli amministratori possono creare nuovi account.</span><span class="sxs-lookup"><span data-stu-id="38231-145">Only administrators can create new accounts.</span></span> <span data-ttu-id="38231-146">(Sono presenti pagine per la creazione e la gestione di account utente di `~/Admin` cartella.)</span><span class="sxs-lookup"><span data-stu-id="38231-146">(There are pages for creating and managing user accounts in the `~/Admin` folder.)</span></span>

### <a name="configuring-the-membership-and-roles-apis"></a><span data-ttu-id="38231-147">La configurazione di appartenenze e ruoli API</span><span class="sxs-lookup"><span data-stu-id="38231-147">Configuring the Membership and Roles APIs</span></span>

<span data-ttu-id="38231-148">L'applicazione web recensioni utilizza l'appartenenza e l'API di ruoli per supportare gli account utente e gruppo di utenti in ruoli (vale a dire, il ruolo di amministratore).</span><span class="sxs-lookup"><span data-stu-id="38231-148">The Book Reviews web application uses the Membership and Roles APIs to support user accounts and to group those users into roles (namely, the Admin role).</span></span> <span data-ttu-id="38231-149">Il `SqlMembershipProvider` e `SqlRoleProvider` vengono utilizzate le classi provider perché si desidera archiviare informazioni sui ruoli e account in un database di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="38231-149">The `SqlMembershipProvider` and `SqlRoleProvider` provider classes are used because we want to store account and role information in a SQL Server database.</span></span>

> [!NOTE]
> <span data-ttu-id="38231-150">In questa esercitazione non deve essere un esame dettagliato la configurazione di un'applicazione web per supportare l'appartenenza e l'API di ruoli.</span><span class="sxs-lookup"><span data-stu-id="38231-150">This tutorial is not intended to be a detailed examination at configuring a web application to support the Membership and Roles APIs.</span></span> <span data-ttu-id="38231-151">Per dare un'occhiata approfondita queste API e i passaggi da eseguire per configurare un sito Web a questo scopo, leggere la [ *esercitazioni di sicurezza del sito Web*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span><span class="sxs-lookup"><span data-stu-id="38231-151">For a thorough look at these APIs and the steps you need to take to configure a website to use them, please read my [*Website Security Tutorials*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span></span>


<span data-ttu-id="38231-152">Per utilizzare i servizi delle applicazioni con un database di SQL Server, che è innanzitutto necessario aggiungere le informazioni sui ruoli memorizzati gli oggetti di database utilizzati da questi provider per il database in cui si vuole che l'account utente.</span><span class="sxs-lookup"><span data-stu-id="38231-152">To use the application services with a SQL Server database you must first add the database objects used by these providers to the database where you want the user account and role information stored.</span></span> <span data-ttu-id="38231-153">Questi oggetti di database richiesti includono un'ampia gamma di tabelle, viste e stored procedure.</span><span class="sxs-lookup"><span data-stu-id="38231-153">These requisite database objects include a variety of tables, views, and stored procedures.</span></span> <span data-ttu-id="38231-154">Se non specificato diversamente, il `SqlMembershipProvider` e `SqlRoleProvider` classi di provider di utilizzano un database di SQL Server Express Edition denominato `ASPNETDB` si trova in s applicazione `App_Data` cartella; se tale database non esiste, viene creato automaticamente con gli oggetti di database necessari da questi provider in fase di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="38231-154">Unless specified otherwise, the `SqlMembershipProvider` and `SqlRoleProvider` provider classes use a SQL Server Express Edition database named `ASPNETDB` located in the application s `App_Data` folder; if such a database does not exist, it is automatically created with the necessary database objects by these providers at runtime.</span></span>

<span data-ttu-id="38231-155">È possibile, e in genere ideale per creare l'applicazione Servizi nello stesso database in cui il sito Web s specifici dell'applicazione vengono archiviati gli oggetti di database.</span><span class="sxs-lookup"><span data-stu-id="38231-155">It is possible, and usually ideal, to create the application services database objects in the same database where the website s application-specific data is stored.</span></span> <span data-ttu-id="38231-156">.NET Framework viene fornito con uno strumento denominato `aspnet_regsql.exe` che installa gli oggetti di database in un database specificato.</span><span class="sxs-lookup"><span data-stu-id="38231-156">The .NET Framework ships with a tool named `aspnet_regsql.exe` that installs the database objects on a specified database.</span></span> <span data-ttu-id="38231-157">Dichiaro di aver effettuato-ahead e utilizzato questo strumento per aggiungere questi oggetti per il `Reviews.mdf` database il `App_Data` cartella (database di sviluppo).</span><span class="sxs-lookup"><span data-stu-id="38231-157">I have gone ahead and used this tool to add these objects to the `Reviews.mdf` database in the `App_Data` folder (the development database).</span></span> <span data-ttu-id="38231-158">Vedremo come utilizzare questo strumento più avanti in questa esercitazione, quando si aggiungono questi oggetti nel database di produzione.</span><span class="sxs-lookup"><span data-stu-id="38231-158">We'll see how to use this tool later in this tutorial when we add these objects to the production database.</span></span>

<span data-ttu-id="38231-159">Se si aggiunge l'applicazione Servizi gli oggetti di database a un database diverso da `ASPNETDB` sarà necessario personalizzare il `SqlMembershipProvider` e `SqlRoleProvider` provider classi configurazioni in modo che utilizzino il database appropriato.</span><span class="sxs-lookup"><span data-stu-id="38231-159">If you add the application services database objects to a database other than `ASPNETDB` you will need to customize the `SqlMembershipProvider` and `SqlRoleProvider` provider classes configurations so that they use the appropriate database.</span></span> <span data-ttu-id="38231-160">Per personalizzare il provider di appartenenze aggiungere un [  *&lt;appartenenza&gt; elemento* ](https://msdn.microsoft.com/library/1b9hw62f.aspx) all'interno di `<system.web>` sezione `Web.config`; utilizzare il [  *&lt;roleManager&gt; elemento* ](https://msdn.microsoft.com/library/ms164660.aspx) per configurare il provider di ruoli.</span><span class="sxs-lookup"><span data-stu-id="38231-160">To customize the Membership provider add a [*&lt;membership&gt; element*](https://msdn.microsoft.com/library/1b9hw62f.aspx) within the `<system.web>` section in `Web.config`; use the [*&lt;roleManager&gt; element*](https://msdn.microsoft.com/library/ms164660.aspx) to configure the Roles provider.</span></span> <span data-ttu-id="38231-161">Nel frammento seguente è tratto dall'applicazione s recensioni `Web.config` e Mostra le impostazioni di configurazione per l'appartenenza e l'API di ruoli.</span><span class="sxs-lookup"><span data-stu-id="38231-161">The following snippet is taken from the Book Reviews application s `Web.config` and shows the configure settings for the Membership and Roles APIs.</span></span> <span data-ttu-id="38231-162">Si noti che sia registrato un nuovo provider - `ReviewMembership` e `ReviewRole` -che utilizzano il `SqlMembershipProvider` e `SqlRoleProvider` provider, rispettivamente.</span><span class="sxs-lookup"><span data-stu-id="38231-162">Note that both register a new provider - `ReviewMembership` and `ReviewRole` - that use the `SqlMembershipProvider` and `SqlRoleProvider` providers, respectively.</span></span>

[!code-xml[Main](configuring-a-website-that-uses-application-services-cs/samples/sample1.xml)]

<span data-ttu-id="38231-163">Il `Web.config` file s `<authentication>` anche l'elemento è stato configurato per supportare l'autenticazione basata su form.</span><span class="sxs-lookup"><span data-stu-id="38231-163">The `Web.config` file s `<authentication>` element has also been configured to support forms-based authentication.</span></span>
  

[!code-xml[Main](configuring-a-website-that-uses-application-services-cs/samples/sample2.xml)]

### <a name="limiting-access-to-the-administration-pages"></a><span data-ttu-id="38231-164">Limitare l'accesso alle pagine di amministrazione</span><span class="sxs-lookup"><span data-stu-id="38231-164">Limiting Access to the Administration Pages</span></span>

<span data-ttu-id="38231-165">ASP.NET consente di concedere o negare l'accesso a un determinato file o una cartella dall'utente o ruolo tramite il relativo *autorizzazione URL* funzionalità.</span><span class="sxs-lookup"><span data-stu-id="38231-165">ASP.NET makes it easy to grant or deny access to a particular file or folder by user or by role via its *URL authorization* feature.</span></span> <span data-ttu-id="38231-166">(Illustrata brevemente l'autorizzazione URL nel *principali differenze tra IIS e il Server di sviluppo ASP.NET* esercitazione e la visualizzazione come IIS e il Server di sviluppo ASP.NET applicare le regole di autorizzazione URL diversi per statico rispetto al contenuto dinamico.) Poiché si desidera impedire l'accesso per il `~/Admin` cartella ad eccezione di tali utenti nel ruolo di amministratore, è necessario aggiungere regole di autorizzazione URL in questa cartella.</span><span class="sxs-lookup"><span data-stu-id="38231-166">(We briefly discussed URL authorization in the *Core Differences Between IIS and the ASP.NET Development Server* tutorial and showed how IIS and the ASP.NET Development Server apply URL authorization rules differently for static versus dynamic content.) Because we want to prohibit access to the `~/Admin` folder except for those users in the Admin role, we need to add URL authorization rules to this folder.</span></span> <span data-ttu-id="38231-167">In particolare, le regole di autorizzazione URL necessario consentire agli utenti nel ruolo di amministratore e tutti gli altri utenti di negazione.</span><span class="sxs-lookup"><span data-stu-id="38231-167">Specifically, the URL authorization rules need to allow users in the Admin role and deny all other users.</span></span> <span data-ttu-id="38231-168">Questa operazione viene eseguita aggiungendo un `Web.config` file per il `~/Admin` cartella con il seguente contenuto:</span><span class="sxs-lookup"><span data-stu-id="38231-168">This is accomplished by adding a `Web.config` file to the `~/Admin` folder with the following contents:</span></span>

[!code-xml[Main](configuring-a-website-that-uses-application-services-cs/samples/sample3.xml)]

<span data-ttu-id="38231-169">Per ulteriori informazioni sulle funzionalità di autorizzazione URL ASP.NET s e come usarlo per scrivere le regole di autorizzazione per gli utenti e per i ruoli, assicurarsi di leggere il [ *autorizzazione basata sull'utente* ](../../older-versions-security/membership/user-based-authorization-cs.md) e [ *Autorizzazione basata sui ruoli* ](../../older-versions-security/roles/role-based-authorization-cs.md) esercitazioni da my [ *esercitazioni di sicurezza del sito Web*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span><span class="sxs-lookup"><span data-stu-id="38231-169">For more information on ASP.NET s URL authorization feature and how to use it to spell out authorization rules for users and for roles, be sure to read the [*User-Based Authorization*](../../older-versions-security/membership/user-based-authorization-cs.md) and [*Role-Based Authorization*](../../older-versions-security/roles/role-based-authorization-cs.md) tutorials from my [*Website Security Tutorials*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span></span>

## <a name="deploying-a-web-application-that-uses-application-services"></a><span data-ttu-id="38231-170">Distribuzione di un'applicazione Web che utilizza i servizi delle applicazioni</span><span class="sxs-lookup"><span data-stu-id="38231-170">Deploying a Web Application That Uses Application Services</span></span>

<span data-ttu-id="38231-171">Quando si distribuisce un sito Web che utilizza i servizi delle applicazioni e un provider che archivia le informazioni sui servizi dell'applicazione in un database, è fondamentale che gli oggetti di database necessari per i servizi delle applicazioni creati nel database di produzione.</span><span class="sxs-lookup"><span data-stu-id="38231-171">When deploying a website that uses application services and a provider that stores the application services information in a database, it is imperative that the database objects needed by the application services be created on the production database.</span></span> <span data-ttu-id="38231-172">Inizialmente il database di produzione non contiene tali oggetti, questa operazione quando l'applicazione viene distribuita prima (o quando viene distribuito per la prima volta dopo aver aggiunto i servizi delle applicazioni), è necessario eseguire passaggi aggiuntivi per ottenere questi oggetti di database necessari sul database di produzione.</span><span class="sxs-lookup"><span data-stu-id="38231-172">Initially the production database does not contain these objects, so when the application is first deployed (or when it is deployed for the first time after application services have been added), you must take extra steps to get these requisite database objects on the production database.</span></span>

<span data-ttu-id="38231-173">Un altro problema può verificarsi quando si distribuisce un sito Web che utilizza i servizi delle applicazioni, se si intende replicare gli account utente creati nell'ambiente di sviluppo all'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="38231-173">Another challenge can arise when deploying a website that uses application services if you intend to replicate the user accounts created in the development environment to the production environment.</span></span> <span data-ttu-id="38231-174">A seconda della configurazione di appartenenze e ruoli, è possibile che anche se si copiano correttamente gli account utente creati in un ambiente di sviluppo di database di produzione, questi utenti non possono effettuare l'accesso all'applicazione web nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="38231-174">Depending on the Membership and Roles configuration, it is possible that even if you successfully copy the user accounts that were created in the development environment to the production database, these users cannot sign into the web application in production.</span></span> <span data-ttu-id="38231-175">Viene esaminata la causa del problema e viene illustrato come impedire che si verifichi.</span><span class="sxs-lookup"><span data-stu-id="38231-175">We'll look at the cause of this issue and discuss how to prevent it from happening.</span></span>

<span data-ttu-id="38231-176">ASP.NET viene fornito con un accessorio [ *strumento Amministrazione sito Web (WSAT)* ](https://msdn.microsoft.com/library/yy40ytx0.aspx) che può essere avviato da Visual Studio e consente all'utente di regole di autorizzazione, ruoli e account da gestire tramite basata sul web interfaccia.</span><span class="sxs-lookup"><span data-stu-id="38231-176">ASP.NET ships with a nice [*Web Site Administration Tool (WSAT)*](https://msdn.microsoft.com/library/yy40ytx0.aspx) that can be launched from Visual Studio and allows the user account, roles, and authorization rules to be managed through a web-based interface.</span></span> <span data-ttu-id="38231-177">Sfortunatamente, il WSAT funziona solo per i siti Web locale, vale a dire che non è possibile utilizzare per la gestione remota degli account utente, ruoli e le regole di autorizzazione per l'applicazione web nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="38231-177">Unfortunately, the WSAT only works for local websites, meaning that it cannot be used to remotely manage user accounts, roles, and authorization rules for the web application in the production environment.</span></span> <span data-ttu-id="38231-178">Esamineremo diversi modi per implementare un comportamento simile a WSAT dal sito Web di produzione.</span><span class="sxs-lookup"><span data-stu-id="38231-178">We'll look at different ways to implement WSAT-like behavior from your production website.</span></span>

### <a name="adding-the-database-objects-using-aspnetregsqlexe"></a><span data-ttu-id="38231-179">Aggiunta di oggetti di Database mediante aspnet\_regsql.exe</span><span class="sxs-lookup"><span data-stu-id="38231-179">Adding the Database Objects Using aspnet\_regsql.exe</span></span>

<span data-ttu-id="38231-180">Il *distribuzione di un Database* esercitazione viene illustrato come copiare le tabelle e i dati dal database di sviluppo nel database di produzione, e queste tecniche certamente possono essere utilizzate per copiare gli oggetti di database di servizi di applicazione per il database di produzione.</span><span class="sxs-lookup"><span data-stu-id="38231-180">The *Deploying a Database* tutorial showed how to copy the tables and data from the development database to the production database, and these techniques can certainly be used to copy the application services database objects to the production database.</span></span> <span data-ttu-id="38231-181">Un'altra opzione consiste di `aspnet_regsql.exe` uno strumento che aggiunge o rimuove gli oggetti di database di servizi di applicazione da un database.</span><span class="sxs-lookup"><span data-stu-id="38231-181">Another option is the `aspnet_regsql.exe` tool, which adds or removes the application services database objects from a database.</span></span>

> [!NOTE]
> <span data-ttu-id="38231-182">Il `aspnet_regsql.exe` strumento crea gli oggetti di database in un database specificato.</span><span class="sxs-lookup"><span data-stu-id="38231-182">The `aspnet_regsql.exe` tool creates the database objects on a specified database.</span></span> <span data-ttu-id="38231-183">Non non eseguirne la migrazione di dati in tali oggetti di database dal database di sviluppo nel database di produzione.</span><span class="sxs-lookup"><span data-stu-id="38231-183">It does not migrate data in those database objects from the development database to the production database.</span></span> <span data-ttu-id="38231-184">Se non si desidera copiare le informazioni di account e il ruolo utente nel database di sviluppo di database di produzione, utilizzare le tecniche illustrate nel *distribuzione di un Database* esercitazione.</span><span class="sxs-lookup"><span data-stu-id="38231-184">If you mean to copy the user account and role information in the development database to the production database use the techniques covered in the *Deploying a Database* tutorial.</span></span>


<span data-ttu-id="38231-185">Consente di esaminare come aggiungere gli oggetti di database per il database di produzione utilizzando s il `aspnet_regsql.exe` dello strumento.</span><span class="sxs-lookup"><span data-stu-id="38231-185">Let s look at how to add the database objects to the production database using the `aspnet_regsql.exe` tool.</span></span> <span data-ttu-id="38231-186">Per iniziare, aprire Esplora risorse e passare alla directory .NET Framework versione 2.0 nel computer in uso, %WINDIR%\ Microsoft.NET\Framework\v2.0.50727.</span><span class="sxs-lookup"><span data-stu-id="38231-186">Start by opening Windows Explorer and navigating to the .NET Framework version 2.0 directory on your computer, %WINDIR%\ Microsoft.NET\Framework\v2.0.50727.</span></span> <span data-ttu-id="38231-187">Si noteranno le `aspnet_regsql.exe` strumento.</span><span class="sxs-lookup"><span data-stu-id="38231-187">There you should find the `aspnet_regsql.exe` tool.</span></span> <span data-ttu-id="38231-188">Questo strumento può essere utilizzato dalla riga di comando, ma include anche un'interfaccia utente grafica. Fare doppio clic su di `aspnet_regsql.exe` file per avviare il componente con interfaccia grafica.</span><span class="sxs-lookup"><span data-stu-id="38231-188">This tool can be used from the command-line, but it also includes a graphical user interface; double-click the `aspnet_regsql.exe` file to launch its graphical component.</span></span>

<span data-ttu-id="38231-189">Lo strumento si avvia visualizzando una schermata che spiega lo scopo.</span><span class="sxs-lookup"><span data-stu-id="38231-189">The tool starts by displaying a splash screen explaining its purpose.</span></span> <span data-ttu-id="38231-190">Fare clic su Avanti per passare alla schermata "Selezionare un'opzione di installazione", come illustrato nella figura 1.</span><span class="sxs-lookup"><span data-stu-id="38231-190">Click Next to advance to the "Select a Setup Option" screen, which is shown in Figure 1.</span></span> <span data-ttu-id="38231-191">Da qui è possibile scegliere di aggiungere i servizi delle applicazioni, gli oggetti di database o rimuoverli da un database.</span><span class="sxs-lookup"><span data-stu-id="38231-191">From here you can choose to add the application services database objects or remove them from a database.</span></span> <span data-ttu-id="38231-192">Poiché si desidera aggiungere questi oggetti nel database di produzione, selezionare l'opzione "Configura SQL Server per i servizi applicativi" e fare clic su Avanti.</span><span class="sxs-lookup"><span data-stu-id="38231-192">Because we want to add these objects to the production database, select the "Configure SQL Server for application services" option and click Next.</span></span>


<span data-ttu-id="38231-193">[![Scegliere di configurare SQL Server per i servizi delle applicazioni](configuring-a-website-that-uses-application-services-cs/_static/image2.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image1.jpg)</span><span class="sxs-lookup"><span data-stu-id="38231-193">[![Choose to Configure SQL Server for Application Services](configuring-a-website-that-uses-application-services-cs/_static/image2.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image1.jpg)</span></span>

<span data-ttu-id="38231-194">**Figura 1**: scegliere di configurare SQL Server per i servizi applicativi ([fare clic per visualizzare l'immagine ingrandita](configuring-a-website-that-uses-application-services-cs/_static/image3.jpg))</span><span class="sxs-lookup"><span data-stu-id="38231-194">**Figure 1**: Choose to Configure SQL Server for Application Services ([Click to view full-size image](configuring-a-website-that-uses-application-services-cs/_static/image3.jpg))</span></span>


<span data-ttu-id="38231-195">In "Selezionare il Server e Database" schermata verranno richieste informazioni per la connessione al database.</span><span class="sxs-lookup"><span data-stu-id="38231-195">In "Select the Server and Database" screen prompts for information to connect to the database.</span></span> <span data-ttu-id="38231-196">Immettere il nome del database è fornito dalla società di hosting web, le credenziali di sicurezza e il server di database e fare clic su Avanti.</span><span class="sxs-lookup"><span data-stu-id="38231-196">Enter the database server, the security credentials, and the database name supplied to you by your web hosting company and click Next.</span></span>

> [!NOTE]
> <span data-ttu-id="38231-197">Dopo aver immesso le credenziali e il server di database si potrebbe verificarsi un errore quando si espande l'elenco di riepilogo a discesa del database.</span><span class="sxs-lookup"><span data-stu-id="38231-197">After entering your database server and credentials you may get an error when expanding the database drop-down list.</span></span> <span data-ttu-id="38231-198">Il `aspnet_regsql.exe` strumento query il `sysdatabases` tabella di sistema per recuperare un elenco di database nel server, ma alcune web che ospita i server di database di bloccare le società in modo che queste informazioni non sono disponibile pubblicamente.</span><span class="sxs-lookup"><span data-stu-id="38231-198">The `aspnet_regsql.exe` tool queries the `sysdatabases` system table to retrieve a list of databases on the server, but some web hosting companies lock down their database servers so that this information is not publicly available.</span></span> <span data-ttu-id="38231-199">Se si verifica questo errore è possibile digitare il nome del database direttamente nell'elenco a discesa.</span><span class="sxs-lookup"><span data-stu-id="38231-199">If you get this error you can type the database name directly into the drop-down list.</span></span>


<span data-ttu-id="38231-200">[![Fornire lo strumento con le informazioni di connessione del Database s](configuring-a-website-that-uses-application-services-cs/_static/image5.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image4.jpg)</span><span class="sxs-lookup"><span data-stu-id="38231-200">[![Supply the Tool With Your Database s Connection Information](configuring-a-website-that-uses-application-services-cs/_static/image5.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image4.jpg)</span></span>

<span data-ttu-id="38231-201">**Figura 2**: fornire informazioni di connessione s strumento con il Database ([fare clic per visualizzare l'immagine ingrandita](configuring-a-website-that-uses-application-services-cs/_static/image6.jpg))</span><span class="sxs-lookup"><span data-stu-id="38231-201">**Figure 2**: Supply the Tool With Your Database s Connection Information ([Click to view full-size image](configuring-a-website-that-uses-application-services-cs/_static/image6.jpg))</span></span>


<span data-ttu-id="38231-202">La schermata successiva sono riepilogate le azioni che verranno eseguite, vale a dire che gli oggetti di database di servizi applicazione sta per essere aggiunto al database specificato.</span><span class="sxs-lookup"><span data-stu-id="38231-202">The subsequent screen summarizes the actions that are about to take place, namely that the application services database objects are going to be added to the specified database.</span></span> <span data-ttu-id="38231-203">Fare clic su Avanti per completare questa azione.</span><span class="sxs-lookup"><span data-stu-id="38231-203">Click Next to complete this action.</span></span> <span data-ttu-id="38231-204">Dopo alcuni istanti, viene visualizzata la schermata finale, notare che sono stati aggiunti gli oggetti di database (vedere la figura 3).</span><span class="sxs-lookup"><span data-stu-id="38231-204">After a few moments, the final screen is displayed, noting that the database objects have been added (see Figure 3).</span></span>


<span data-ttu-id="38231-205">[![Operazione completata Gli oggetti di Database di servizi applicazione sono stati aggiunti al Database di produzione](configuring-a-website-that-uses-application-services-cs/_static/image8.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image7.jpg)</span><span class="sxs-lookup"><span data-stu-id="38231-205">[![Success! The Application Services Database Objects Were Added to the Production Database](configuring-a-website-that-uses-application-services-cs/_static/image8.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image7.jpg)</span></span>

<span data-ttu-id="38231-206">**Figura 3**: esito positivo.</span><span class="sxs-lookup"><span data-stu-id="38231-206">**Figure 3**: Success!</span></span> <span data-ttu-id="38231-207">L'applicazione Servizi di Database sono oggetti aggiunti al Database di produzione ([fare clic per visualizzare l'immagine ingrandita](configuring-a-website-that-uses-application-services-cs/_static/image9.jpg))</span><span class="sxs-lookup"><span data-stu-id="38231-207">The Application Services Database Objects Were Added to the Production Database ([Click to view full-size image](configuring-a-website-that-uses-application-services-cs/_static/image9.jpg))</span></span>


<span data-ttu-id="38231-208">Per verificare che gli oggetti di database di servizi applicazione sono stati aggiunti al database di produzione, aprire SQL Server Management Studio e connettersi al database di produzione.</span><span class="sxs-lookup"><span data-stu-id="38231-208">To verify that the application services database objects were successfully added to the production database, open SQL Server Management Studio and connect to your production database.</span></span> <span data-ttu-id="38231-209">Come illustrato nella figura 4, dovrebbe essere tabelle di database dell'applicazione servizi del database, `aspnet_Applications`, `aspnet_Membership`, `aspnet_Users`e così via.</span><span class="sxs-lookup"><span data-stu-id="38231-209">As Figure 4 shows, you should now see the application services database tables in your database, `aspnet_Applications`, `aspnet_Membership`, `aspnet_Users`, and so forth.</span></span>


<span data-ttu-id="38231-210">[![Verificare che gli oggetti di Database sono stati aggiunti al Database di produzione](configuring-a-website-that-uses-application-services-cs/_static/image11.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image10.jpg)</span><span class="sxs-lookup"><span data-stu-id="38231-210">[![Confirm That the Database Objects Were Added to the Production Database](configuring-a-website-that-uses-application-services-cs/_static/image11.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image10.jpg)</span></span>

<span data-ttu-id="38231-211">**Figura 4**: confermare che gli oggetti di Database sono stati aggiunti al Database di produzione ([fare clic per visualizzare l'immagine ingrandita](configuring-a-website-that-uses-application-services-cs/_static/image12.jpg))</span><span class="sxs-lookup"><span data-stu-id="38231-211">**Figure 4**: Confirm That the Database Objects Were Added to the Production Database ([Click to view full-size image](configuring-a-website-that-uses-application-services-cs/_static/image12.jpg))</span></span>


<span data-ttu-id="38231-212">È necessario utilizzare il `aspnet_regsql.exe` strumento quando si distribuisce l'applicazione web per la prima volta o per la prima volta, dopo avere avviato utilizzando i servizi delle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="38231-212">You will only need to use the `aspnet_regsql.exe` tool when deploying your web application for the first time or for the first time after you have started using the application services.</span></span> <span data-ttu-id="38231-213">Dopo aver installato questi oggetti di database nel database di produzione vengono acquisite t dovranno essere nuovamente aggiunto o modificato.</span><span class="sxs-lookup"><span data-stu-id="38231-213">Once these database objects are on the production database they won t need to be re-added or modified.</span></span>

### <a name="copying-user-accounts-from-development-to-production"></a><span data-ttu-id="38231-214">Copia gli account utente dallo sviluppo alla produzione</span><span class="sxs-lookup"><span data-stu-id="38231-214">Copying User Accounts from Development to Production</span></span>

<span data-ttu-id="38231-215">Quando si utilizza il `SqlMembershipProvider` e `SqlRoleProvider` classi provider per archiviare le informazioni sui servizi dell'applicazione in un database di SQL Server, le informazioni di account e il ruolo di utente vengono archiviate in un'ampia gamma di tabelle di database, tra cui `aspnet_Users`, `aspnet_Membership`, `aspnet_Roles`, e `aspnet_UsersInRoles`, tra gli altri.</span><span class="sxs-lookup"><span data-stu-id="38231-215">When using the `SqlMembershipProvider` and `SqlRoleProvider` provider classes to store the application services information in a SQL Server database, the user account and role information is stored in a variety of database tables, including `aspnet_Users`, `aspnet_Membership`, `aspnet_Roles`, and `aspnet_UsersInRoles`, among others.</span></span> <span data-ttu-id="38231-216">Se durante lo sviluppo si creano gli account utente nell'ambiente di sviluppo è possibile replicare gli account utente nell'ambiente di produzione copiando i record corrispondenti dalle tabelle di database applicabile.</span><span class="sxs-lookup"><span data-stu-id="38231-216">If during development you create user accounts in the development environment you can replicate those user accounts in production by copying the corresponding records from the applicable database tables.</span></span> <span data-ttu-id="38231-217">Se la pubblicazione guidata Database è stata utilizzata per distribuire gli oggetti di database di servizi di applicazione che si sia scelto anche per copiare i record, con la conseguenza di account utente creato in fase di sviluppo per essere in produzione.</span><span class="sxs-lookup"><span data-stu-id="38231-217">If you used the Database Publishing Wizard to deploy the application services database objects you may have also elected to copy the records, which would result in the user accounts created in development to also be on production.</span></span> <span data-ttu-id="38231-218">Tuttavia, a seconda delle impostazioni di configurazione, è possibile che gli utenti i cui account sono stati creati in fase di sviluppo e copiate nell'ambiente di produzione sono in grado di accedere dal sito Web di produzione.</span><span class="sxs-lookup"><span data-stu-id="38231-218">But, depending on your configuration settings, you may find that those users whose accounts were created in development and copied to production are unable to login from the production website.</span></span> <span data-ttu-id="38231-219">Cosa offre?</span><span class="sxs-lookup"><span data-stu-id="38231-219">What gives?</span></span>

<span data-ttu-id="38231-220">Il `SqlMembershipProvider` e `SqlRoleProvider` classi provider sono state progettate in modo che un singolo database può essere utilizzato come archivio utente, per dispongono di più applicazioni, in cui ogni applicazione può, in teoria, gli utenti con sovrapposizione dei nomi utente e i ruoli con lo stesso nome.</span><span class="sxs-lookup"><span data-stu-id="38231-220">The `SqlMembershipProvider` and `SqlRoleProvider` provider classes were designed such that a single database could serve as a user store for multiple applications, where each application could, in theory, have users with overlapping usernames and roles with the same name.</span></span> <span data-ttu-id="38231-221">Per consentire questa flessibilità, il database conserva un elenco di applicazioni nel `aspnet_Applications` tabella e ogni utente è associata a una di queste applicazioni.</span><span class="sxs-lookup"><span data-stu-id="38231-221">To allow for this flexibility, the database maintains a list of applications in the `aspnet_Applications` table, and each user is associated with one of these applications.</span></span> <span data-ttu-id="38231-222">In particolare, il `aspnet_Users` tabella include un `ApplicationId` colonna che collega ogni utente a un record di `aspnet_Applications` tabella.</span><span class="sxs-lookup"><span data-stu-id="38231-222">Specifically, the `aspnet_Users` table has an `ApplicationId` column that ties each user to a record in the `aspnet_Applications` table.</span></span>

<span data-ttu-id="38231-223">Oltre al `ApplicationId` colonna, il `aspnet_Applications` tabella include inoltre un `ApplicationName` colonna che fornisce un nome più adatto al personale per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="38231-223">In addition to the `ApplicationId` column, the `aspnet_Applications` table also includes an `ApplicationName` column, which provides a more human-friendly name for the application.</span></span> <span data-ttu-id="38231-224">Quando un sito Web tenta di utilizzare un account utente, ad esempio la convalida delle credenziali un utente s dalla pagina di accesso, è necessario indicare la `SqlMembershipProvider` classe applicazione da utilizzare.</span><span class="sxs-lookup"><span data-stu-id="38231-224">When a website attempts to work with a user account, such as validating a user s credentials from the login page, it must tell the `SqlMembershipProvider` class what application to work with.</span></span> <span data-ttu-id="38231-225">In genere avviene questo fornendo il nome dell'applicazione e il valore deriva dalla configurazione del provider s in `Web.config` , in particolare tramite il `applicationName` attributo.</span><span class="sxs-lookup"><span data-stu-id="38231-225">It usually does this by supplying the application name, and the this value comes from the provider s configuration in `Web.config` - specifically via the `applicationName` attribute.</span></span>

<span data-ttu-id="38231-226">Ma cosa accade se il `applicationName` attributo non viene specificato `Web.config`?</span><span class="sxs-lookup"><span data-stu-id="38231-226">But what happens if the `applicationName` attribute is not specified in `Web.config`?</span></span> <span data-ttu-id="38231-227">In questo caso l'appartenenza al sistema utilizza il percorso radice dell'applicazione come il `applicationName` valore.</span><span class="sxs-lookup"><span data-stu-id="38231-227">In such a case the Membership system uses the application root path as the `applicationName` value.</span></span> <span data-ttu-id="38231-228">Se il `applicationName` attributo non è impostato in modo esplicito `Web.config`, quindi, è possibile che l'ambiente di sviluppo e produzione usare una radice dell'applicazione diverso e pertanto verrà associate a una diversa applicazione nomi dei servizi dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="38231-228">If the `applicationName` attribute is not explicitly set in `Web.config`, then, there is the possibility that the development environment and production environment use a different application root and therefore will be associated with different application names in the application services.</span></span> <span data-ttu-id="38231-229">Se si verifica una mancata corrispondenza di tali utenti creati nell'ambiente di sviluppo avrà un `ApplicationId` valore che non corrisponde con il `ApplicationId` valore per l'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="38231-229">If such a mismatch occurs then those users created in the development environment will have an `ApplicationId` value that does not match with the `ApplicationId` value for the production environment.</span></span> <span data-ttu-id="38231-230">Il risultato è che gli utenti-acquisiti t potranno eseguire l'accesso.</span><span class="sxs-lookup"><span data-stu-id="38231-230">The net result is that those users won t be able to login.</span></span>

> [!NOTE]
> <span data-ttu-id="38231-231">Se è necessario in questo caso - con account utente copiato nell'ambiente di produzione con una mancata corrispondenza `ApplicationId` valore - è possibile scrivere una query per aggiornare questi corretto `ApplicationId` i valori per il `ApplicationId` utilizzata in produzione.</span><span class="sxs-lookup"><span data-stu-id="38231-231">If you find yourself in this situation - with user accounts copied to production with a mismatched `ApplicationId` value - you could write a query to update these incorrect `ApplicationId` values to the `ApplicationId` used on production.</span></span> <span data-ttu-id="38231-232">Una volta aggiornato, gli utenti il cui account sono stati creati nell'ambiente di sviluppo ora sarebbe in grado di accedere all'applicazione web in produzione.</span><span class="sxs-lookup"><span data-stu-id="38231-232">Once updated, the users whose accounts were created on the development environment would now be able to sign into the web application on production.</span></span>


<span data-ttu-id="38231-233">Buone notizie sono disponibile un semplice passaggio da eseguire per assicurarsi che entrambi gli ambienti usino gli stessi `ApplicationId` - impostare in modo esplicito il `applicationName` attributo `Web.config` per tutti i provider di servizi di applicazione.</span><span class="sxs-lookup"><span data-stu-id="38231-233">The good news is that there is a simple step you can take to ensure that the two environments use the same `ApplicationId` - explicitly set the `applicationName` attribute in `Web.config` for all of your application services providers.</span></span> <span data-ttu-id="38231-234">È impostato in modo esplicito il `applicationName` attributo "BookReviews" nel `<membership>` e `<roleManager>` elementi come questo frammento di codice da `Web.config` Mostra.</span><span class="sxs-lookup"><span data-stu-id="38231-234">I explicitly set the `applicationName` attribute to "BookReviews" in the `<membership>` and `<roleManager>` elements as this snippet from `Web.config` shows.</span></span>

[!code-xml[Main](configuring-a-website-that-uses-application-services-cs/samples/sample4.xml)]

<span data-ttu-id="38231-235">Per ulteriori informazioni sull'impostazione di `applicationName` attributo e la logica alla base, fare riferimento a [ *Scott Guthrie* ](https://weblogs.asp.net/scottgu/) post di blog s [ *sempre imposta applicationName Quando si configura l'appartenenza ASP.NET e altri provider di proprietà*](https://weblogs.asp.net/scottgu/443634).</span><span class="sxs-lookup"><span data-stu-id="38231-235">For more discussion on setting the `applicationName` attribute and the rationale behind it, refer to [*Scott Guthrie*](https://weblogs.asp.net/scottgu/) s blog post, [*Always set the applicationName property when configuring ASP.NET Membership and other Providers*](https://weblogs.asp.net/scottgu/443634).</span></span>

### <a name="managing-user-accounts-in-the-production-environment"></a><span data-ttu-id="38231-236">Gestione degli account utente nell'ambiente di produzione</span><span class="sxs-lookup"><span data-stu-id="38231-236">Managing User Accounts in the Production Environment</span></span>

<span data-ttu-id="38231-237">La strumento Amministrazione sito Web di ASP.NET (WSAT) semplifica creare e gestire gli account utente, definire e applicare i ruoli e specificare le regole di autorizzazione basata sui ruoli e utenti.</span><span class="sxs-lookup"><span data-stu-id="38231-237">The ASP.NET Web Site Administration Tool (WSAT) makes it easy to create and manage user accounts, define and apply roles, and spell out user- and role-based authorization rules.</span></span> <span data-ttu-id="38231-238">È possibile avviare il WSAT da Visual Studio a Esplora soluzioni e scegliendo l'icona di configurazione di ASP.NET oppure selezionando i menu sito Web o il progetto e selezionando la voce di menu configurazione di ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="38231-238">You can launch the WSAT from Visual Studio by going to the Solution Explorer and clicking the ASP.NET Configuration icon or by going to the Website or Project menus and selecting the ASP.NET Configuration menu item.</span></span> <span data-ttu-id="38231-239">Sfortunatamente, il WSAT funzionano solo con i siti Web locale.</span><span class="sxs-lookup"><span data-stu-id="38231-239">Unfortunately, the WSAT can only work with local websites.</span></span> <span data-ttu-id="38231-240">Pertanto, è possibile utilizzare il WSAT dalla propria workstation per gestire il sito Web nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="38231-240">Therefore, you cannot use the WSAT from your workstation to manage the website in the production environment.</span></span>

<span data-ttu-id="38231-241">Buone notizie sono che tutte le funzionalità esposte fornite dal WSAT è disponibile a livello di codice tramite l'appartenenza e ruoli API; Inoltre, molte delle schermate di WSAT utilizzare i controlli standard relative all'accesso di ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="38231-241">The good news is that all of the functionality exposed provided by the WSAT is available programmatically through the Membership and Roles APIs; furthermore, many of the WSAT screens use the standard ASP.NET Login-related controls.</span></span> <span data-ttu-id="38231-242">In breve, è possibile aggiungere le pagine ASP.NET per il sito Web che offrono le funzionalità di gestione necessarie.</span><span class="sxs-lookup"><span data-stu-id="38231-242">In short, you can add ASP.NET pages to your website that offer the necessary management capabilities.</span></span>

<span data-ttu-id="38231-243">Tenere presente che un'esercitazione precedente aggiornato l'applicazione web recensioni per includere un `~/Admin` le cartelle e questo è stato configurato per consentire agli utenti nel ruolo di amministratore.</span><span class="sxs-lookup"><span data-stu-id="38231-243">Recall that an earlier tutorial updated the Book Reviews web application to include an `~/Admin` folder, and this folder has been configured to only allow users in the Admin role.</span></span> <span data-ttu-id="38231-244">È stata aggiunta una pagina in tale cartella denominata `CreateAccount.aspx` da cui un amministratore può creare un nuovo account utente.</span><span class="sxs-lookup"><span data-stu-id="38231-244">I added a page to that folder named `CreateAccount.aspx` from which an administrator can create a new user account.</span></span> <span data-ttu-id="38231-245">Questa pagina utilizza il controllo CreateUserWizard per visualizzare la logica di back-end e l'interfaccia utente per la creazione di un nuovo account utente.</span><span class="sxs-lookup"><span data-stu-id="38231-245">This page uses the CreateUserWizard control to display the user interface and backend logic for creating a new user account.</span></span> <span data-ttu-id="38231-246">Novità più, personalizzate del controllo per includere una casella di controllo che richiede se il nuovo utente deve essere aggiunti anche al ruolo di amministratore (vedere Figura 5).</span><span class="sxs-lookup"><span data-stu-id="38231-246">What s more, I customized the control to include a CheckBox that prompts whether the new user should also be added to the Admin role (see Figure 5).</span></span> <span data-ttu-id="38231-247">Con un minimo di lavoro è possibile compilare un set personalizzato di pagine che implementa le attività correlate alla gestione utente e il ruolo che sarebbero altrimenti essere fornite dal WSAT.</span><span class="sxs-lookup"><span data-stu-id="38231-247">With a little bit of work you can build a custom set of pages that implements the user and role management-related tasks that would otherwise be provided by the WSAT.</span></span>

> [!NOTE]
> <span data-ttu-id="38231-248">Per ulteriori informazioni sull'utilizzo l'appartenenza e l'API di ruoli e i controlli Web di ASP.NET relative all'accesso, assicurarsi di leggere il [ *esercitazioni di sicurezza del sito Web*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span><span class="sxs-lookup"><span data-stu-id="38231-248">For more information on using the Membership and Roles APIs along with the Login-related ASP.NET Web controls, be sure to read my [*Website Security Tutorials*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span></span> <span data-ttu-id="38231-249">Per altre informazioni sulla personalizzazione del controllo CreateUserWizard, consultare il [ *creazione degli account utente* ](../../older-versions-security/membership/creating-user-accounts-cs.md) e [ *l'archiviazione di informazioni utente aggiuntive* ](../../older-versions-security/membership/storing-additional-user-information-cs.md) esercitazioni o check-out [ *Erich Peterson* ](http://www.erichpeterson.com/) articolo s [ *personalizzazione del controllo CreateUserWizard* ](http://aspnet.4guysfromrolla.com/articles/070506-1.aspx).</span><span class="sxs-lookup"><span data-stu-id="38231-249">For more on customizing the CreateUserWizard control refer to the [*Creating User Accounts*](../../older-versions-security/membership/creating-user-accounts-cs.md) and [*Storing Additional User Information*](../../older-versions-security/membership/storing-additional-user-information-cs.md) tutorials, or check out [*Erich Peterson*](http://www.erichpeterson.com/) s article, [*Customizing the CreateUserWizard Control*](http://aspnet.4guysfromrolla.com/articles/070506-1.aspx).</span></span>


<span data-ttu-id="38231-250">[![Gli amministratori possono creare nuovi account utente](configuring-a-website-that-uses-application-services-cs/_static/image14.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image13.jpg)</span><span class="sxs-lookup"><span data-stu-id="38231-250">[![Administrators Can Create New User Accounts](configuring-a-website-that-uses-application-services-cs/_static/image14.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image13.jpg)</span></span>

<span data-ttu-id="38231-251">**Figura 5**: gli amministratori possono creare nuovi account utente ([fare clic per visualizzare l'immagine ingrandita](configuring-a-website-that-uses-application-services-cs/_static/image15.jpg))</span><span class="sxs-lookup"><span data-stu-id="38231-251">**Figure 5**: Administrators Can Create New User Accounts ([Click to view full-size image](configuring-a-website-that-uses-application-services-cs/_static/image15.jpg))</span></span>


<span data-ttu-id="38231-252">Se è necessario che tutte le funzionalità di estrazione WSAT [ *in sequenza il proprio strumento Amministrazione sito Web*](http://aspnet.4guysfromrolla.com/articles/052307-1.aspx), in cui l'autore Dan Clem vengono illustrati il processo di compilazione di uno strumento simile WSAT personalizzato.</span><span class="sxs-lookup"><span data-stu-id="38231-252">If you need the full functionality of the WSAT check out [*Rolling Your Own Web Site Administration Tool*](http://aspnet.4guysfromrolla.com/articles/052307-1.aspx), in which author Dan Clem walks through the process of building a custom WSAT-like tool.</span></span> <span data-ttu-id="38231-253">Dan condivide il codice sorgente dell'applicazione s (in c#) e vengono fornite istruzioni dettagliate per l'aggiunta al sito Web ospitato.</span><span class="sxs-lookup"><span data-stu-id="38231-253">Dan shares his application s source code (in C#) and provides step-by-step instructions for adding it to your hosted website.</span></span>

## <a name="summary"></a><span data-ttu-id="38231-254">Riepilogo</span><span class="sxs-lookup"><span data-stu-id="38231-254">Summary</span></span>

<span data-ttu-id="38231-255">Quando si distribuisce un'applicazione web che utilizza l'implementazione di database di applicazione dei servizi è necessario assicurarsi che il database di produzione con gli oggetti di database richiesti.</span><span class="sxs-lookup"><span data-stu-id="38231-255">When deploying a web application that uses the application services database implementation you must first ensure that the production database has the requisite database objects.</span></span> <span data-ttu-id="38231-256">Questi oggetti possono essere aggiunti utilizzando le tecniche descritte nel *distribuzione di un Database* esercitazione; in alternativa, è possibile utilizzare il `aspnet_regsql.exe` strumento, come illustrato in questa esercitazione.</span><span class="sxs-lookup"><span data-stu-id="38231-256">These objects can be added using the techniques discussed in the *Deploying a Database* tutorial; alternatively, you can use the `aspnet_regsql.exe` tool, as we saw in this tutorial.</span></span> <span data-ttu-id="38231-257">Altre problematiche è stata presa in considerazione sono incentrate sui concetti di sincronizzazione utilizzato negli ambienti di sviluppo e produzione (che è importante se si desidera che gli utenti e i ruoli creati nell'ambiente di sviluppo sia valido in produzione) e le tecniche per il nome dell'applicazione gestione di utenti e ruoli nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="38231-257">Other challenges we touched on center around synchronizing the application name used in the development and production environments (which is important if you want users and roles created in the development environment to be valid on production) and techniques for managing the users and roles in the production environment.</span></span>

<span data-ttu-id="38231-258">Buona programmazione!</span><span class="sxs-lookup"><span data-stu-id="38231-258">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="38231-259">Ulteriori informazioni</span><span class="sxs-lookup"><span data-stu-id="38231-259">Further Reading</span></span>

<span data-ttu-id="38231-260">Per ulteriori informazioni sugli argomenti trattati in questa esercitazione, vedere le risorse seguenti:</span><span class="sxs-lookup"><span data-stu-id="38231-260">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="38231-261">*ASP.NET SQL Server Registration Tool (aspnet_regsql.exe)*</span><span class="sxs-lookup"><span data-stu-id="38231-261">*ASP.NET SQL Server Registration Tool (aspnet_regsql.exe)*</span></span>](https://msdn.microsoft.com/library/ms229862.aspx)
- [<span data-ttu-id="38231-262">*Creazione del Database di servizi dell'applicazione per SQL Server*</span><span class="sxs-lookup"><span data-stu-id="38231-262">*Creating the Application Services Database for SQL Server*</span></span>](https://msdn.microsoft.com/library/x28wfk74.aspx)
- [<span data-ttu-id="38231-263">*Creazione dello Schema di appartenenza in SQL Server*</span><span class="sxs-lookup"><span data-stu-id="38231-263">*Creating the Membership Schema in SQL Server*</span></span>](../../older-versions-security/membership/creating-the-membership-schema-in-sql-server-cs.md)
- [<span data-ttu-id="38231-264">*Esaminare l'appartenenza ASP.NET s, ruoli e profilo*</span><span class="sxs-lookup"><span data-stu-id="38231-264">*Examining ASP.NET s Membership, Roles, and Profile*</span></span>](http://aspnet.4guysfromrolla.com/articles/120705-1.aspx)
- [<span data-ttu-id="38231-265">*In sequenza il propria strumento Amministrazione sito Web*</span><span class="sxs-lookup"><span data-stu-id="38231-265">*Rolling Your Own Web Site Administration Tool*</span></span>](http://aspnet.4guysfromrolla.com/articles/052307-1.aspx)
- [<span data-ttu-id="38231-266">*Esercitazioni di sicurezza sito Web*</span><span class="sxs-lookup"><span data-stu-id="38231-266">*Website Security Tutorials*</span></span>](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md)
- [<span data-ttu-id="38231-267">*Panoramica dello strumento Amministrazione sito Web*</span><span class="sxs-lookup"><span data-stu-id="38231-267">*Web Site Administration Tool Overview*</span></span>](https://msdn.microsoft.com/library/yy40ytx0.aspx)

> [!div class="step-by-step"]
> <span data-ttu-id="38231-268">[Precedente](configuring-the-production-web-application-to-use-the-production-database-cs.md)
> [Successivo](strategies-for-database-development-and-deployment-cs.md)</span><span class="sxs-lookup"><span data-stu-id="38231-268">[Previous](configuring-the-production-web-application-to-use-the-production-database-cs.md)
[Next](strategies-for-database-development-and-deployment-cs.md)</span></span>
