---
uid: web-forms/overview/older-versions-getting-started/master-pages/interacting-with-the-content-page-from-the-master-page-cs
title: L'interazione con la pagina di contenuto dalla pagina Master (c#) | Documenti Microsoft
author: rick-anderson
description: Viene illustrato come chiamare i metodi, impostare le proprietà e così via della pagina di contenuto dal codice nella pagina Master.
ms.author: aspnetcontent
manager: wpickett
ms.date: 07/11/2008
ms.topic: article
ms.assetid: 3282df5e-516c-4972-8666-313828b90fb5
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/master-pages/interacting-with-the-content-page-from-the-master-page-cs
msc.type: authoredcontent
ms.openlocfilehash: 7c845c7b0077e6d3fb5ce770029b4f9f48609b17
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/06/2018
ms.locfileid: "30891087"
---
<a name="interacting-with-the-content-page-from-the-master-page-c"></a><span data-ttu-id="db5b4-103">L'interazione con la pagina di contenuto dalla pagina Master (c#)</span><span class="sxs-lookup"><span data-stu-id="db5b4-103">Interacting with the Content Page from the Master Page (C#)</span></span>
====================
<span data-ttu-id="db5b4-104">da [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="db5b4-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="db5b4-105">[Scaricare codice](http://download.microsoft.com/download/1/8/4/184e24fa-fcc8-47fa-ac99-4b6a52d41e97/ASPNET_MasterPages_Tutorial_07_CS.zip) o [Scarica il PDF](http://download.microsoft.com/download/e/b/4/eb4abb10-c416-4ba4-9899-32577715b1bd/ASPNET_MasterPages_Tutorial_07_CS.pdf)</span><span class="sxs-lookup"><span data-stu-id="db5b4-105">[Download Code](http://download.microsoft.com/download/1/8/4/184e24fa-fcc8-47fa-ac99-4b6a52d41e97/ASPNET_MasterPages_Tutorial_07_CS.zip) or [Download PDF](http://download.microsoft.com/download/e/b/4/eb4abb10-c416-4ba4-9899-32577715b1bd/ASPNET_MasterPages_Tutorial_07_CS.pdf)</span></span>

> <span data-ttu-id="db5b4-106">Viene illustrato come chiamare i metodi, impostare le proprietà e così via della pagina di contenuto dal codice nella pagina Master.</span><span class="sxs-lookup"><span data-stu-id="db5b4-106">Examines how to call methods, set properties, etc. of the Content Page from code in the Master Page.</span></span>


## <a name="introduction"></a><span data-ttu-id="db5b4-107">Introduzione</span><span class="sxs-lookup"><span data-stu-id="db5b4-107">Introduction</span></span>

<span data-ttu-id="db5b4-108">L'esercitazione precedente esaminato come disporre la pagina di contenuto a livello di codice tenendo conto della pagina master.</span><span class="sxs-lookup"><span data-stu-id="db5b4-108">The preceding tutorial examined how to have the content page programmatically interact with its master page.</span></span> <span data-ttu-id="db5b4-109">Tenere presente che è aggiornata della pagina master per includere un controllo GridView elencati i cinque più di recente aggiunti prodotti.</span><span class="sxs-lookup"><span data-stu-id="db5b4-109">Recall that we updated the master page to include a GridView control that listed the five most recently added products.</span></span> <span data-ttu-id="db5b4-110">È stato quindi creato una pagina di contenuto da cui l'utente è stato possibile aggiungere un nuovo prodotto.</span><span class="sxs-lookup"><span data-stu-id="db5b4-110">We then created a content page from which the user could add a new product.</span></span> <span data-ttu-id="db5b4-111">Al momento di aggiungere un nuovo prodotto, la pagina di contenuto necessario per indicare la pagina master per aggiornare il GridView in modo che includerebbe il prodotto appena aggiunto.</span><span class="sxs-lookup"><span data-stu-id="db5b4-111">Upon adding a new product, the content page needed to instruct the master page to refresh its GridView so that it would include the just-added product.</span></span> <span data-ttu-id="db5b4-112">Questa funzionalità è stata effettuata mediante l'aggiunta di un metodo pubblico della pagina master aggiornato con associazione a dati a GridView e quindi richiamare il metodo della pagina di contenuto.</span><span class="sxs-lookup"><span data-stu-id="db5b4-112">This functionality was accomplished by adding a public method to the master page that refreshed the data bound to the GridView, and then invoking that method from the content page.</span></span>

<span data-ttu-id="db5b4-113">La forma più comune di contenuto e l'interazione di pagina master provenienza dalla pagina di contenuto.</span><span class="sxs-lookup"><span data-stu-id="db5b4-113">The most common form of content and master page interaction originates from the content page.</span></span> <span data-ttu-id="db5b4-114">Tuttavia, è possibile che la pagina master per la pagina di contenuto corrente di rouse in azione, e tale funzionalità potrebbe essere necessaria se la pagina master contiene elementi dell'interfaccia utente che consentono agli utenti di modificare i dati che viene visualizzati anche nella pagina contenuto.</span><span class="sxs-lookup"><span data-stu-id="db5b4-114">However, it is possible for the master page to rouse the current content page into action, and such functionality may be needed if the master page contains user interface elements that enable users to modify data that is also displayed on the content page.</span></span> <span data-ttu-id="db5b4-115">Si consideri una pagina contenuta che consente di visualizzare le informazioni sui prodotti in un controllo GridView di controllare e una pagina master che include un pulsante che, quando si fa clic, raddoppia i prezzi di tutti i prodotti.</span><span class="sxs-lookup"><span data-stu-id="db5b4-115">Consider a content page that displays the products information in a GridView control and a master page that includes a Button control that, when clicked, doubles the prices of all products.</span></span> <span data-ttu-id="db5b4-116">Molto simile all'esempio nell'esercitazione precedente, deve essere aggiornato dopo il prezzo doppio che pulsante affinché visualizzi i nuovi prezzi GridView, ma in questo scenario è la pagina master che è necessario rouse la pagina contenuta in azione.</span><span class="sxs-lookup"><span data-stu-id="db5b4-116">Much like the example in the preceding tutorial, the GridView needs to be refreshed after the double price Button is clicked so that it displays the new prices, but in this scenario it's the master page that needs to rouse the content page into action.</span></span>

<span data-ttu-id="db5b4-117">In questa esercitazione illustra richiamare funzionalità definite nella pagina di contenuto della pagina master.</span><span class="sxs-lookup"><span data-stu-id="db5b4-117">This tutorial explores how to have the master page invoke functionality defined in the content page.</span></span>

### <a name="instigating-programmatic-interaction-via-an-event-and-event-handlers"></a><span data-ttu-id="db5b4-118">Instigating a livello di programmazione tramite un evento e i gestori eventi</span><span class="sxs-lookup"><span data-stu-id="db5b4-118">Instigating Programmatic Interaction via an Event and Event Handlers</span></span>

<span data-ttu-id="db5b4-119">Richiamo di funzionalità della pagina di contenuto da una pagina master è più complessa nel caso opposto.</span><span class="sxs-lookup"><span data-stu-id="db5b4-119">Invoking content page functionality from a master page is more challenging than the other way around.</span></span> <span data-ttu-id="db5b4-120">Perché una pagina di contenuto ha una singola pagina master, quando instigating l'interazione a livello di codice della pagina di contenuto si sa quali proprietà e metodi pubblici sono a disposizione.</span><span class="sxs-lookup"><span data-stu-id="db5b4-120">Because a content page has a single master page, when instigating the programmatic interaction from the content page we know what public methods and properties are at our disposal.</span></span> <span data-ttu-id="db5b4-121">Una pagina master, tuttavia, può avere molte pagine di contenuto diversi, ognuno con un proprio set di proprietà e metodi.</span><span class="sxs-lookup"><span data-stu-id="db5b4-121">A master page, however, can have many different content pages, each with its own set of properties and methods.</span></span> <span data-ttu-id="db5b4-122">Quindi, possiamo è scrivere codice nella pagina master per eseguire un'azione nella relativa pagina contenuto quando non sono disponibili informazioni sulle pagine con contenuta verranno richiamata fino all'esecuzione?</span><span class="sxs-lookup"><span data-stu-id="db5b4-122">How, then, can we write code in the master page to perform some action in its content page when we don't know what content page will be invoked until runtime?</span></span>

<span data-ttu-id="db5b4-123">Si consideri un controllo Web ASP.NET, ad esempio il controllo pulsante.</span><span class="sxs-lookup"><span data-stu-id="db5b4-123">Consider an ASP.NET Web control, such as the Button control.</span></span> <span data-ttu-id="db5b4-124">Un controllo pulsante può essere visualizzati in un numero qualsiasi di pagine ASP.NET e richiede un meccanismo mediante il quale è possibile verificare la pagina che si è stato fatto clic.</span><span class="sxs-lookup"><span data-stu-id="db5b4-124">A Button control can appear on any number of ASP.NET pages and needs a mechanism by which it can alert the page that it has been clicked.</span></span> <span data-ttu-id="db5b4-125">Ciò avviene usando *eventi*.</span><span class="sxs-lookup"><span data-stu-id="db5b4-125">This is accomplished using *events*.</span></span> <span data-ttu-id="db5b4-126">In particolare, il controllo pulsante genera relativo `Click` evento quando è selezionato; la pagina ASP.NET che contiene il pulsante può facoltativamente rispondere a tale notifica tramite un *gestore dell'evento*.</span><span class="sxs-lookup"><span data-stu-id="db5b4-126">In particular, the Button control raises its `Click` event when it is clicked; the ASP.NET page that contains the Button can optionally respond to that notification via an *event handler*.</span></span>

<span data-ttu-id="db5b4-127">Questo stesso modello consente di disporre di una funzionalità di trigger pagina master nelle relative pagine di contenuto:</span><span class="sxs-lookup"><span data-stu-id="db5b4-127">This same pattern can be used to have a master page trigger functionality in its content pages:</span></span>

1. <span data-ttu-id="db5b4-128">Aggiungere un evento della pagina master.</span><span class="sxs-lookup"><span data-stu-id="db5b4-128">Add an event to the master page.</span></span>
2. <span data-ttu-id="db5b4-129">Genera l'evento ogni volta che la pagina master deve comunicare con la pagina contenuta.</span><span class="sxs-lookup"><span data-stu-id="db5b4-129">Raise the event whenever the master page needs to communicate with its content page.</span></span> <span data-ttu-id="db5b4-130">Ad esempio, se la pagina master deve avvisare relativa pagina di contenuto che l'utente è raddoppiato i prezzi, il relativo evento verrebbe generato subito dopo i prezzi sono stati raddoppiati.</span><span class="sxs-lookup"><span data-stu-id="db5b4-130">For example, if the master page needs to alert its content page that the user has doubled the prices, its event would be raised immediately after the prices have been doubled.</span></span>
3. <span data-ttu-id="db5b4-131">Creare un gestore eventi in tali pagine di contenuto che sarà necessario eseguire alcune operazioni.</span><span class="sxs-lookup"><span data-stu-id="db5b4-131">Create an event handler in those content pages that need to take some action.</span></span>

<span data-ttu-id="db5b4-132">Il resto di questa esercitazione implementa l'esempio descritto nell'introduzione; vale a dire, una pagina contenuto in cui sono elencati i prodotti nel database e una pagina master che include un pulsante di controllo per raddoppiare i prezzi.</span><span class="sxs-lookup"><span data-stu-id="db5b4-132">This remainder of this tutorial implements the example outlined in the Introduction; namely, a content page that lists the products in the database and a master page that includes a Button control to double the prices.</span></span>

## <a name="step-1-displaying-products-in-a-content-page"></a><span data-ttu-id="db5b4-133">Passaggio 1: Visualizzazione dei prodotti in una pagina contenuto</span><span class="sxs-lookup"><span data-stu-id="db5b4-133">Step 1: Displaying Products in a Content Page</span></span>

<span data-ttu-id="db5b4-134">Attività di primo ordine consiste nel creare una pagina contenuto in cui sono elencati i prodotti dal database Northwind.</span><span class="sxs-lookup"><span data-stu-id="db5b4-134">Our first order of business is to create a content page that lists the products from the Northwind database.</span></span> <span data-ttu-id="db5b4-135">(Il database Northwind è aggiunto al progetto nell'esercitazione precedente, [ *l'interazione con la pagina Master dalla pagina contenuto*](interacting-with-the-master-page-from-the-content-page-cs.md).) Per iniziare, aggiungere una nuova pagina ASP.NET per il `~/Admin` cartella denominata `Products.aspx`, rendendo di associarlo al `Site.master` pagina master.</span><span class="sxs-lookup"><span data-stu-id="db5b4-135">(We added the Northwind database to the project in the preceding tutorial, [*Interacting with the Master Page from the Content Page*](interacting-with-the-master-page-from-the-content-page-cs.md).) Start by adding a new ASP.NET page to the `~/Admin` folder named `Products.aspx`, making sure to bind it to the `Site.master` master page.</span></span> <span data-ttu-id="db5b4-136">Figura 1 Mostra Esplora soluzioni dopo l'aggiunta di questa pagina per il sito Web.</span><span class="sxs-lookup"><span data-stu-id="db5b4-136">Figure 1 shows the Solution Explorer after this page has been added to the website.</span></span>


<span data-ttu-id="db5b4-137">[![Aggiungere una nuova pagina ASP.NET per la cartella Admin](interacting-with-the-content-page-from-the-master-page-cs/_static/image2.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="db5b4-137">[![Add a New ASP.NET Page to the Admin Folder](interacting-with-the-content-page-from-the-master-page-cs/_static/image2.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image1.png)</span></span>

<span data-ttu-id="db5b4-138">**Figura 01**: aggiungere una nuova pagina ASP.NET per il `Admin` cartella ([fare clic per visualizzare l'immagine ingrandita](interacting-with-the-content-page-from-the-master-page-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="db5b4-138">**Figure 01**: Add a New ASP.NET Page to the `Admin` Folder ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image3.png))</span></span>


<span data-ttu-id="db5b4-139">Tenere presente che nel [ *che specifica il titolo, tag Meta e altre intestazioni HTML della pagina Master* ](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs.md) esercitazione è stata creata una classe della pagina base personalizzata denominata `BasePage` che genera il titolo della pagina, in caso contrario impostare in modo esplicito.</span><span class="sxs-lookup"><span data-stu-id="db5b4-139">Recall that in the [*Specifying the Title, Meta Tags, and Other HTML Headers in the Master Page*](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs.md) tutorial we created a custom base page class named `BasePage` that generates the page's title if it is not explicitly set.</span></span> <span data-ttu-id="db5b4-140">Passare al `Products.aspx` codice della pagina classe e fare in modo che derivano da `BasePage` (anziché da `System.Web.UI.Page`).</span><span class="sxs-lookup"><span data-stu-id="db5b4-140">Go to the `Products.aspx` page's code-behind class and have it derive from `BasePage` (instead of from `System.Web.UI.Page`).</span></span>

<span data-ttu-id="db5b4-141">Infine, aggiornare il `Web.sitemap` file da includere una voce per questa lezione.</span><span class="sxs-lookup"><span data-stu-id="db5b4-141">Finally, update the `Web.sitemap` file to include an entry for this lesson.</span></span> <span data-ttu-id="db5b4-142">Aggiungere il markup seguente sotto il `<siteMapNode>` per il contenuto alla lezione interazione pagina Master:</span><span class="sxs-lookup"><span data-stu-id="db5b4-142">Add the following markup beneath the `<siteMapNode>` for the Content to Master Page Interaction lesson:</span></span>


[!code-xml[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample1.xml)]

<span data-ttu-id="db5b4-143">L'aggiunta di questo `<siteMapNode>` elemento si riflette nelle lezioni dell'elenco (vedere Figura 5).</span><span class="sxs-lookup"><span data-stu-id="db5b4-143">The addition of this `<siteMapNode>` element is reflected in the Lessons list (see Figure 5).</span></span>

<span data-ttu-id="db5b4-144">Tornare al `Products.aspx`.</span><span class="sxs-lookup"><span data-stu-id="db5b4-144">Return to `Products.aspx`.</span></span> <span data-ttu-id="db5b4-145">Nel controllo del contenuto per `MainContent`, aggiungere un controllo GridView e denominarla `ProductsGrid`.</span><span class="sxs-lookup"><span data-stu-id="db5b4-145">In the Content control for `MainContent`, add a GridView control and name it `ProductsGrid`.</span></span> <span data-ttu-id="db5b4-146">Associare il controllo GridView a un nuovo controllo SqlDataSource denominato `ProductsDataSource`.</span><span class="sxs-lookup"><span data-stu-id="db5b4-146">Bind the GridView to a new SqlDataSource control named `ProductsDataSource`.</span></span>


<span data-ttu-id="db5b4-147">[![Associare un nuovo controllo SqlDataSource controllo GridView.](interacting-with-the-content-page-from-the-master-page-cs/_static/image5.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="db5b4-147">[![Bind the GridView to a New SqlDataSource Control](interacting-with-the-content-page-from-the-master-page-cs/_static/image5.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image4.png)</span></span>

<span data-ttu-id="db5b4-148">**Figura 02**: associare un nuovo controllo SqlDataSource GridView ([fare clic per visualizzare l'immagine ingrandita](interacting-with-the-content-page-from-the-master-page-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="db5b4-148">**Figure 02**: Bind the GridView to a New SqlDataSource Control  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image6.png))</span></span>


<span data-ttu-id="db5b4-149">Configurare la procedura guidata in modo che utilizzi il database Northwind.</span><span class="sxs-lookup"><span data-stu-id="db5b4-149">Configure the wizard so that it uses the Northwind database.</span></span> <span data-ttu-id="db5b4-150">Se si è lavorato l'esercitazione precedente, si dovrebbe già disporre di una stringa di connessione denominata `NorthwindConnectionString` in `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="db5b4-150">If you worked through the previous tutorial then you should already have a connection string named `NorthwindConnectionString` in `Web.config`.</span></span> <span data-ttu-id="db5b4-151">Scegliere la stringa di connessione dall'elenco a discesa, come mostrato nella figura 3.</span><span class="sxs-lookup"><span data-stu-id="db5b4-151">Choose this connection string from the drop-down list, as shown in Figure 3.</span></span>


<span data-ttu-id="db5b4-152">[![Configurare SqlDataSource per utilizzare il Database Northwind](interacting-with-the-content-page-from-the-master-page-cs/_static/image8.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="db5b4-152">[![Configure the SqlDataSource to Use the Northwind Database](interacting-with-the-content-page-from-the-master-page-cs/_static/image8.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image7.png)</span></span>

<span data-ttu-id="db5b4-153">**Figura 03**: configurare SqlDataSource per utilizzare il Northwind Database ([fare clic per visualizzare l'immagine ingrandita](interacting-with-the-content-page-from-the-master-page-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="db5b4-153">**Figure 03**: Configure the SqlDataSource to Use the Northwind Database  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image9.png))</span></span>


<span data-ttu-id="db5b4-154">Specificare quindi il controllo origine dati `SELECT` istruzione scegliendo la tabella Products dall'elenco a discesa e restituendo la `ProductName` e `UnitPrice` colonne (vedere la figura 4).</span><span class="sxs-lookup"><span data-stu-id="db5b4-154">Next, specify the data source control's `SELECT` statement by choosing the Products table from the drop-down list and returning the `ProductName` and `UnitPrice` columns (see Figure 4).</span></span> <span data-ttu-id="db5b4-155">Fare clic su Avanti e quindi scegliere Fine per completare la procedura guidata Configura origine dati.</span><span class="sxs-lookup"><span data-stu-id="db5b4-155">Click Next and then Finish to complete the Configure Data Source wizard.</span></span>


<span data-ttu-id="db5b4-156">[![Restituire i campi di UnitPrice e ProductName dalla tabella Products](interacting-with-the-content-page-from-the-master-page-cs/_static/image11.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="db5b4-156">[![Return the ProductName and UnitPrice Fields from the Products Table](interacting-with-the-content-page-from-the-master-page-cs/_static/image11.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image10.png)</span></span>

<span data-ttu-id="db5b4-157">**Figura 04**: restituire il `ProductName` e `UnitPrice` i campi dal `Products` tabella ([fare clic per visualizzare l'immagine ingrandita](interacting-with-the-content-page-from-the-master-page-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="db5b4-157">**Figure 04**: Return the `ProductName` and `UnitPrice` Fields from the `Products` Table  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image12.png))</span></span>


<span data-ttu-id="db5b4-158">Questo è tutto qui!</span><span class="sxs-lookup"><span data-stu-id="db5b4-158">That's all there is to it!</span></span> <span data-ttu-id="db5b4-159">Dopo aver completato la procedura guidata Visual Studio aggiunge due BoundField GridView per eseguire i due campi restituiti dal controllo SqlDataSource il mirroring.</span><span class="sxs-lookup"><span data-stu-id="db5b4-159">After completing the wizard Visual Studio adds two BoundFields to the GridView to mirror the two fields returned by the SqlDataSource control.</span></span> <span data-ttu-id="db5b4-160">Markup dei controlli GridView e SqlDataSource segue.</span><span class="sxs-lookup"><span data-stu-id="db5b4-160">The GridView and SqlDataSource controls' markup follows.</span></span> <span data-ttu-id="db5b4-161">Figura 5 mostra i risultati quando viene visualizzato tramite un browser.</span><span class="sxs-lookup"><span data-stu-id="db5b4-161">Figure 5 shows the results when viewed through a browser.</span></span>


[!code-aspx[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample2.aspx)]


<span data-ttu-id="db5b4-162">[![Ogni prodotto e il prezzo è elencato nel controllo GridView.](interacting-with-the-content-page-from-the-master-page-cs/_static/image14.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="db5b4-162">[![Each Product and its Price is Listed in the GridView](interacting-with-the-content-page-from-the-master-page-cs/_static/image14.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image13.png)</span></span>

<span data-ttu-id="db5b4-163">**Figura 05**: ogni prodotto e il prezzo è elencato in GridView ([fare clic per visualizzare l'immagine ingrandita](interacting-with-the-content-page-from-the-master-page-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="db5b4-163">**Figure 05**: Each Product and its Price is Listed in the GridView  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image15.png))</span></span>


> [!NOTE]
> <span data-ttu-id="db5b4-164">È possibile pulire l'aspetto del controllo GridView.</span><span class="sxs-lookup"><span data-stu-id="db5b4-164">Feel free to clean up the appearance of the GridView.</span></span> <span data-ttu-id="db5b4-165">Alcuni suggerimenti includono la formattazione del valore di UnitPrice visualizzato come valuta e l'utilizzo di tipi di carattere e colori di sfondo per migliorare l'aspetto della griglia.</span><span class="sxs-lookup"><span data-stu-id="db5b4-165">Some suggestions include formatting the displayed UnitPrice value as a currency and using background colors and fonts to improve the grid's appearance.</span></span> <span data-ttu-id="db5b4-166">Per ulteriori informazioni sulla visualizzazione e formattazione dei dati in ASP.NET, vedere il [utilizzo di una serie di esercitazioni dati](../../data-access/index.md).</span><span class="sxs-lookup"><span data-stu-id="db5b4-166">For more information on displaying and formatting data in ASP.NET, refer to my [Working with Data tutorial series](../../data-access/index.md).</span></span>


## <a name="step-2-adding-a-double-prices-button-to-the-master-page"></a><span data-ttu-id="db5b4-167">Passaggio 2: Aggiunta di un pulsante di prezzi doppie alla pagina Master</span><span class="sxs-lookup"><span data-stu-id="db5b4-167">Step 2: Adding a Double Prices Button to the Master Page</span></span>

<span data-ttu-id="db5b4-168">L'attività successiva è per aggiungere un controllo pulsante Web al master per la pagina che, quando si fa clic, verrà raddoppiare il prezzo di tutti i prodotti nel database.</span><span class="sxs-lookup"><span data-stu-id="db5b4-168">Our next task is to add a Button Web control to the master page that, when clicked, will double the price of all products in the database.</span></span> <span data-ttu-id="db5b4-169">Aprire il `Site.master` pagina master e trascinare un pulsante dalla casella degli strumenti nella finestra di progettazione, posizionarlo sotto il `RecentProductsDataSource` controllo SqlDataSource abbiamo aggiunto nell'esercitazione precedente.</span><span class="sxs-lookup"><span data-stu-id="db5b4-169">Open the `Site.master` master page and drag a Button from the Toolbox onto the Designer, placing it beneath the `RecentProductsDataSource` SqlDataSource control we added in the previous tutorial.</span></span> <span data-ttu-id="db5b4-170">Impostare il pulsante `ID` proprietà `DoublePrice` e il relativo `Text` proprietà su "Double prezzi dei prodotti".</span><span class="sxs-lookup"><span data-stu-id="db5b4-170">Set the Button's `ID` property to `DoublePrice` and its `Text` property to "Double Product Prices".</span></span>

<span data-ttu-id="db5b4-171">Successivamente, aggiungere un controllo SqlDataSource per la pagina master, denominarla `DoublePricesDataSource`.</span><span class="sxs-lookup"><span data-stu-id="db5b4-171">Next, add a SqlDataSource control to the master page, naming it `DoublePricesDataSource`.</span></span> <span data-ttu-id="db5b4-172">Questo SqlDataSource verrà utilizzato per eseguire il `UPDATE` doppio tutti i prezzi dell'istruzione.</span><span class="sxs-lookup"><span data-stu-id="db5b4-172">This SqlDataSource will be used to execute the `UPDATE` statement to double all prices.</span></span> <span data-ttu-id="db5b4-173">In particolare, è necessario impostare il relativo `ConnectionString` e `UpdateCommand` proprietà alla stringa di connessione appropriata e `UPDATE` istruzione.</span><span class="sxs-lookup"><span data-stu-id="db5b4-173">Specifically, we need to set its `ConnectionString` and `UpdateCommand` properties to the appropriate connection string and `UPDATE` statement.</span></span> <span data-ttu-id="db5b4-174">Quindi è necessario chiamare questo controllo SqlDataSource `Update` metodo quando il `DoublePrice` si fa clic sul pulsante.</span><span class="sxs-lookup"><span data-stu-id="db5b4-174">Then we need to call this SqlDataSource control's `Update` method when the `DoublePrice` Button is clicked.</span></span> <span data-ttu-id="db5b4-175">Per impostare il `ConnectionString` e `UpdateCommand` proprietà, selezionare il controllo SqlDataSource e quindi passare alla finestra Proprietà.</span><span class="sxs-lookup"><span data-stu-id="db5b4-175">To set the `ConnectionString` and `UpdateCommand` properties, select the SqlDataSource control and then go to the Properties window.</span></span> <span data-ttu-id="db5b4-176">Il `ConnectionString` elenchi di proprietà di queste stringhe di connessione già memorizzate in `Web.config` in un elenco a discesa; scegliere il `NorthwindConnectionString` opzione come illustrato nella figura 6.</span><span class="sxs-lookup"><span data-stu-id="db5b4-176">The `ConnectionString` property lists those connection strings already stored in `Web.config` in a drop-down list; choose the `NorthwindConnectionString` option as shown in Figure 6.</span></span>


<span data-ttu-id="db5b4-177">[![Configurare SqlDataSource per utilizzare il NorthwindConnectionString](interacting-with-the-content-page-from-the-master-page-cs/_static/image17.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="db5b4-177">[![Configure the SqlDataSource to Use the NorthwindConnectionString](interacting-with-the-content-page-from-the-master-page-cs/_static/image17.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image16.png)</span></span>

<span data-ttu-id="db5b4-178">**Figura 06**: configurare SqlDataSource per usare il `NorthwindConnectionString` ([fare clic per visualizzare l'immagine ingrandita](interacting-with-the-content-page-from-the-master-page-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="db5b4-178">**Figure 06**: Configure the SqlDataSource to Use the `NorthwindConnectionString` ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image18.png))</span></span>


<span data-ttu-id="db5b4-179">Per impostare il `UpdateCommand` proprietà, individuare l'opzione UpdateQuery nella finestra Proprietà.</span><span class="sxs-lookup"><span data-stu-id="db5b4-179">To set the `UpdateCommand` property, locate the UpdateQuery option in the Properties window.</span></span> <span data-ttu-id="db5b4-180">Questa proprietà, se selezionata, viene visualizzato un pulsante con puntini di sospensione; Fare clic su questo pulsante per visualizzare la finestra di dialogo Editor comandi e parametri illustrato nella figura 7.</span><span class="sxs-lookup"><span data-stu-id="db5b4-180">This property, when selected, displays a button with ellipses; click this button to display the Command and Parameter Editor dialog box shown in Figure 7.</span></span> <span data-ttu-id="db5b4-181">Digitare il comando seguente `UPDATE` istruzione nella casella di testo della finestra di dialogo:</span><span class="sxs-lookup"><span data-stu-id="db5b4-181">Type the following `UPDATE` statement into the dialog box's textbox:</span></span>


[!code-sql[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample3.sql)]

<span data-ttu-id="db5b4-182">Destinato a raddoppiare di questa istruzione, quando eseguita, il `UnitPrice` valore per ogni record di `Products` tabella.</span><span class="sxs-lookup"><span data-stu-id="db5b4-182">This statement, when executed, will double the `UnitPrice` value for each record in the `Products` table.</span></span>


<span data-ttu-id="db5b4-183">[![Impostare la proprietà UpdateCommand del SqlDataSource](interacting-with-the-content-page-from-the-master-page-cs/_static/image20.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="db5b4-183">[![Set SqlDataSource's UpdateCommand Property](interacting-with-the-content-page-from-the-master-page-cs/_static/image20.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image19.png)</span></span>

<span data-ttu-id="db5b4-184">**Figura 07**: impostare SqlDataSource `UpdateCommand` proprietà ([fare clic per visualizzare l'immagine ingrandita](interacting-with-the-content-page-from-the-master-page-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="db5b4-184">**Figure 07**: Set SqlDataSource's `UpdateCommand` Property  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image21.png))</span></span>


<span data-ttu-id="db5b4-185">Dopo l'impostazione di queste proprietà, markup dichiarativo del pulsante SqlDataSource dei controlli e dovrebbe essere simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="db5b4-185">After setting these properties, your Button and SqlDataSource controls' declarative markup should look similar to the following:</span></span>


[!code-aspx[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample4.aspx)]

<span data-ttu-id="db5b4-186">È comunque di chiamare il relativo `Update` metodo quando il `DoublePrice` si fa clic sul pulsante.</span><span class="sxs-lookup"><span data-stu-id="db5b4-186">All that remains is to call its `Update` method when the `DoublePrice` Button is clicked.</span></span> <span data-ttu-id="db5b4-187">Creare un `Click` gestore eventi per il `DoublePrice` pulsante e aggiungere il codice seguente:</span><span class="sxs-lookup"><span data-stu-id="db5b4-187">Create a `Click` event handler for the `DoublePrice` Button and add the following code:</span></span>


[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample5.cs)]

<span data-ttu-id="db5b4-188">Per testare questa funzionalità, visitare il `~/Admin/Products.aspx` pagina abbiamo creato nel passaggio 1 e fare clic sul pulsante "Double prezzi dei prodotti".</span><span class="sxs-lookup"><span data-stu-id="db5b4-188">To test this functionality, visit the `~/Admin/Products.aspx` page we created in Step 1 and click the "Double Product Prices" button.</span></span> <span data-ttu-id="db5b4-189">Fare clic sul pulsante provoca un postback ed esegue il `DoublePrice` del pulsante `Click` gestore dell'evento, raddoppiare i prezzi di tutti i prodotti.</span><span class="sxs-lookup"><span data-stu-id="db5b4-189">Clicking the button causes a postback and executes the `DoublePrice` Button's `Click` event handler, doubling the prices of all products.</span></span> <span data-ttu-id="db5b4-190">Rendering della pagina, quindi nuovamente il markup viene restituito e nuovamente visualizzato nel browser.</span><span class="sxs-lookup"><span data-stu-id="db5b4-190">The page is then re-rendered and the markup is returned and re-displayed in the browser.</span></span> <span data-ttu-id="db5b4-191">GridView nella pagina di contenuto, Elenca, tuttavia, i prezzi stesso prima di "Double prezzi dei prodotti" è stato fatto clic sul pulsante.</span><span class="sxs-lookup"><span data-stu-id="db5b4-191">The GridView in the content page, however, lists the same prices as before the "Double Product Prices" button was clicked.</span></span> <span data-ttu-id="db5b4-192">Questo avviene perché i dati inizialmente caricati in GridView fosse stato memorizzato nello stato di visualizzazione, in modo non vengono ricaricati durante i postback se non diversamente specificato.</span><span class="sxs-lookup"><span data-stu-id="db5b4-192">This is because the data initially loaded in the GridView had its state stored in view state, so it's not reloaded on postbacks unless instructed otherwise.</span></span> <span data-ttu-id="db5b4-193">Se visita una pagina diversa, quindi tornare al `~/Admin/Products.aspx` pagina verrà visualizzato il prezzo aggiornato.</span><span class="sxs-lookup"><span data-stu-id="db5b4-193">If you visit a different page and then return to the `~/Admin/Products.aspx` page you'll see the updated prices.</span></span>

## <a name="step-3-raising-an-event-when-the-prices-are-doubled"></a><span data-ttu-id="db5b4-194">Passaggio 3: Generare un evento quando il prezzi vengono raddoppiati.</span><span class="sxs-lookup"><span data-stu-id="db5b4-194">Step 3: Raising an Event When the Prices are Doubled</span></span>

<span data-ttu-id="db5b4-195">Poiché il controllo GridView nel `~/Admin/Products.aspx` pagina non rispecchiano immediatamente il raddoppiamento di prezzo, un utente può naturalmente che pensi non clic sul pulsante "Prezzi dei prodotti Double", o non funziona.</span><span class="sxs-lookup"><span data-stu-id="db5b4-195">Because the GridView in the `~/Admin/Products.aspx` page does not immediately reflect the price doubling, a user may understandably think that they did not click the "Double Product Prices" button, or that it didn't work.</span></span> <span data-ttu-id="db5b4-196">Potrebbe provare facendo clic sul pulsante un maggior numero di volte, raddoppiare i prezzi più volte.</span><span class="sxs-lookup"><span data-stu-id="db5b4-196">They may try clicking the button a few more times, doubling the prices again and again.</span></span> <span data-ttu-id="db5b4-197">Per risolvere il problema è necessario che la griglia del contenuto pagina visualizzano i nuovi prezzi immediatamente dopo che vengono raddoppiati.</span><span class="sxs-lookup"><span data-stu-id="db5b4-197">To fix this we need to have the grid in the content page display the new prices immediately after they are doubled.</span></span>

<span data-ttu-id="db5b4-198">Come descritto precedentemente in questa esercitazione, è necessario generare un evento nella pagina master ogni volta che l'utente fa clic il `DoublePrice` pulsante.</span><span class="sxs-lookup"><span data-stu-id="db5b4-198">As discussed earlier in this tutorial, we need to raise an event in the master page whenever the user clicks the `DoublePrice` Button.</span></span> <span data-ttu-id="db5b4-199">Un evento è un modo per una classe (un server di pubblicazione di eventi) per notificare a un altro una serie di altre classi (i sottoscrittori di eventi) che si è verificato qualcosa di interessante.</span><span class="sxs-lookup"><span data-stu-id="db5b4-199">An event is a way for one class (an event publisher) to notify another a set of other classes (the event subscribers) that something interesting has occurred.</span></span> <span data-ttu-id="db5b4-200">In questo esempio, la pagina master è il server di pubblicazione di eventi; le pagine di contenuto del rilevante quando il `DoublePrice` si fa clic sul pulsante sono i sottoscrittori.</span><span class="sxs-lookup"><span data-stu-id="db5b4-200">In this example, the master page is the event publisher; those content pages that care about when the `DoublePrice` Button is clicked are the subscribers.</span></span>

<span data-ttu-id="db5b4-201">Una classe sottoscrive un evento creando un *gestore dell'evento*, che è un metodo che viene eseguito in risposta all'evento da generare.</span><span class="sxs-lookup"><span data-stu-id="db5b4-201">A class subscribes to an event by creating an *event handler*, which is a method that is executed in response to the event being raised.</span></span> <span data-ttu-id="db5b4-202">Il server di pubblicazione definisce gli eventi che genera definendo un *delegato dell'evento*.</span><span class="sxs-lookup"><span data-stu-id="db5b4-202">The publisher defines the events he raises by defining an *event delegate*.</span></span> <span data-ttu-id="db5b4-203">Il delegato dell'evento specifica i parametri di input deve accettare il gestore dell'evento.</span><span class="sxs-lookup"><span data-stu-id="db5b4-203">The event delegate specifies what input parameters the event handler must accept.</span></span> <span data-ttu-id="db5b4-204">In .NET Framework, i delegati non restituisce alcun valore e accetta due parametri di input:</span><span class="sxs-lookup"><span data-stu-id="db5b4-204">In the .NET Framework, event delegates do not return any value and accept two input parameters:</span></span>

- <span data-ttu-id="db5b4-205">Un `Object`, che identifica l'origine evento, e</span><span class="sxs-lookup"><span data-stu-id="db5b4-205">An `Object`, which identifies the event source, and</span></span>
- <span data-ttu-id="db5b4-206">Una classe derivata da `System.EventArgs`</span><span class="sxs-lookup"><span data-stu-id="db5b4-206">A class derived from `System.EventArgs`</span></span>

<span data-ttu-id="db5b4-207">Il secondo parametro passato al gestore eventi può includere informazioni aggiuntive sull'evento.</span><span class="sxs-lookup"><span data-stu-id="db5b4-207">The second parameter passed to an event handler can include additional information about the event.</span></span> <span data-ttu-id="db5b4-208">Mentre la base `EventArgs` classe non passano tutte le informazioni, .NET Framework include una serie di classi che estendono `EventArgs` e comprendono proprietà aggiuntive.</span><span class="sxs-lookup"><span data-stu-id="db5b4-208">While the base `EventArgs` class does not pass along any information, the .NET Framework includes a number of classes that extend `EventArgs` and encompass additional properties.</span></span> <span data-ttu-id="db5b4-209">Ad esempio, un `CommandEventArgs` istanza verrà passata ai gestori di eventi che rispondono al `Command` evento e include due proprietà informativo: `CommandArgument` e `CommandName`.</span><span class="sxs-lookup"><span data-stu-id="db5b4-209">For example, a `CommandEventArgs` instance is passed to event handlers that respond to the `Command` event, and includes two informational properties: `CommandArgument` and `CommandName`.</span></span>

> [!NOTE]
> <span data-ttu-id="db5b4-210">Per ulteriori informazioni sulla creazione, la generazione e la gestione degli eventi, vedere [eventi e delegati](https://msdn.microsoft.com/library/17sde2xt.aspx) e [delegati di evento semplice inglese](http://www.codeproject.com/KB/cs/eventdelegates.aspx).</span><span class="sxs-lookup"><span data-stu-id="db5b4-210">For more information on creating, raising, and handling events, see [Events and Delegates](https://msdn.microsoft.com/library/17sde2xt.aspx) and [Event Delegates in Simple English](http://www.codeproject.com/KB/cs/eventdelegates.aspx).</span></span>


<span data-ttu-id="db5b4-211">Per definire un evento utilizzare la sintassi seguente:</span><span class="sxs-lookup"><span data-stu-id="db5b4-211">To define an event use the following syntax:</span></span>


[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample6.cs)]

<span data-ttu-id="db5b4-212">Poiché è necessario solo quando l'utente ha fatto clic su un avviso nella pagina di contenuto di `DoublePrice` pulsante e non è necessario passare le eventuali altre informazioni, è possibile utilizzare il delegato dell'evento `EventHandler`, che definisce un gestore eventi che accetta come il secondo parametro di un oggetto di tipo `System.EventArgs`.</span><span class="sxs-lookup"><span data-stu-id="db5b4-212">Because we only need to alert the content page when the user has clicked the `DoublePrice` Button and do not need to pass along any other additional information, we can use the event delegate `EventHandler`, which defines an event handler that accepts as its second parameter an object of type `System.EventArgs`.</span></span> <span data-ttu-id="db5b4-213">Per creare l'evento nella pagina master, aggiungere la seguente riga di codice nella classe code-behind della pagina master:</span><span class="sxs-lookup"><span data-stu-id="db5b4-213">To create the event in the master page, add the following line of code to the master page's code-behind class:</span></span>


[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample7.cs)]

<span data-ttu-id="db5b4-214">Il codice sopra riportato aggiunge un evento pubblico per la pagina master denominata `PricesDoubled`.</span><span class="sxs-lookup"><span data-stu-id="db5b4-214">The above code adds a public event to the master page named `PricesDoubled`.</span></span> <span data-ttu-id="db5b4-215">È ora necessario generare questo evento dopo i prezzi sono stati raddoppiati.</span><span class="sxs-lookup"><span data-stu-id="db5b4-215">We now need to raise this event after the prices have been doubled.</span></span> <span data-ttu-id="db5b4-216">Per generare un evento utilizzare la sintassi seguente:</span><span class="sxs-lookup"><span data-stu-id="db5b4-216">To raise an event use the following syntax:</span></span>


[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample8.cs)]

<span data-ttu-id="db5b4-217">Dove *mittente* e *eventArgs* sono i valori da passare al gestore dell'evento del sottoscrittore.</span><span class="sxs-lookup"><span data-stu-id="db5b4-217">Where *sender* and *eventArgs* are the values you want to pass to the subscriber's event handler.</span></span>

<span data-ttu-id="db5b4-218">Aggiornamento di `DoublePrice` `Click` gestore dell'evento con il codice seguente:</span><span class="sxs-lookup"><span data-stu-id="db5b4-218">Update the `DoublePrice` `Click` event handler with the following code:</span></span>


[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample9.cs)]

<span data-ttu-id="db5b4-219">Come in precedenza, il `Click` gestore dell'evento viene avviata chiamando il `DoublePricesDataSource` del controllo SqlDataSource `Update` metodo raddoppiare i prezzi di tutti i prodotti.</span><span class="sxs-lookup"><span data-stu-id="db5b4-219">As before, the `Click` event handler starts by calling the `DoublePricesDataSource` SqlDataSource control's `Update` method to double the prices of all products.</span></span> <span data-ttu-id="db5b4-220">Sono presenti due aggiunte al gestore dell'evento in seguito.</span><span class="sxs-lookup"><span data-stu-id="db5b4-220">Following that there are two additions to the event handler.</span></span> <span data-ttu-id="db5b4-221">Prima di tutto, il `RecentProducts` vengono aggiornati i dati del controllo GridView.</span><span class="sxs-lookup"><span data-stu-id="db5b4-221">First, the `RecentProducts` GridView's data is refreshed.</span></span> <span data-ttu-id="db5b4-222">Questo controllo GridView è stato aggiunto alla pagina master nell'esercitazione precedente e visualizza i cinque prodotti aggiunto più di recente.</span><span class="sxs-lookup"><span data-stu-id="db5b4-222">This GridView was added to the master page in the preceding tutorial and displays the five most recently-added products.</span></span> <span data-ttu-id="db5b4-223">È necessario aggiornare la griglia in modo che mostra i prezzi raddoppiato solo per questi cinque prodotti.</span><span class="sxs-lookup"><span data-stu-id="db5b4-223">We need to refresh this grid so that it shows the just-doubled prices for these five products.</span></span> <span data-ttu-id="db5b4-224">Successivamente, il `PricesDoubled` viene generato l'evento.</span><span class="sxs-lookup"><span data-stu-id="db5b4-224">Following that, the `PricesDoubled` event is raised.</span></span> <span data-ttu-id="db5b4-225">Un riferimento alla stessa pagina master (`this`) viene inviato al gestore eventi come origine evento e un oggetto vuoto `EventArgs` l'oggetto viene inviato come argomenti dell'evento.</span><span class="sxs-lookup"><span data-stu-id="db5b4-225">A reference to the master page itself (`this`) is sent to the event handler as the event source and an empty `EventArgs` object is sent as the event arguments.</span></span>

## <a name="step-4-handling-the-event-in-the-content-page"></a><span data-ttu-id="db5b4-226">Passaggio 4: La gestione dell'evento nella pagina di contenuto</span><span class="sxs-lookup"><span data-stu-id="db5b4-226">Step 4: Handling the Event in the Content Page</span></span>

<span data-ttu-id="db5b4-227">A questo punto della pagina master genera relativo `PricesDoubled` evento ogni volta che il `DoublePrice` si fa clic sul controllo Button.</span><span class="sxs-lookup"><span data-stu-id="db5b4-227">At this point the master page raises its `PricesDoubled` event whenever the `DoublePrice` Button control is clicked.</span></span> <span data-ttu-id="db5b4-228">Tuttavia, questo è solo potere, è comunque necessario gestire l'evento nel Sottoscrittore.</span><span class="sxs-lookup"><span data-stu-id="db5b4-228">However, this is only half the battle - we still need to handle the event in the subscriber.</span></span> <span data-ttu-id="db5b4-229">Questa operazione comporta due passaggi: creazione del gestore eventi e l'aggiunta di codice cablaggio dell'evento in modo che quando viene generato l'evento viene eseguito il gestore dell'evento.</span><span class="sxs-lookup"><span data-stu-id="db5b4-229">This involves two steps: creating the event handler and adding event wiring code so that when the event is raised the event handler is executed.</span></span>

<span data-ttu-id="db5b4-230">Iniziare creando un gestore eventi denominato `Master_PricesDoubled`.</span><span class="sxs-lookup"><span data-stu-id="db5b4-230">Start by creating an event handler named `Master_PricesDoubled`.</span></span> <span data-ttu-id="db5b4-231">A causa di come è stato definito il `PricesDoubled` evento nella pagina master due parametri di input del gestore eventi devono essere di tipi `Object` e `EventArgs`, rispettivamente.</span><span class="sxs-lookup"><span data-stu-id="db5b4-231">Because of how we defined the `PricesDoubled` event in the master page the event handler's two input parameters must be of types `Object` and `EventArgs`, respectively.</span></span> <span data-ttu-id="db5b4-232">Nella chiamata al gestore dell'evento di `ProductsGrid` GridView `DataBind` metodo per riassociare i dati alla griglia.</span><span class="sxs-lookup"><span data-stu-id="db5b4-232">In the event handler call the `ProductsGrid` GridView's `DataBind` method to rebind the data to the grid.</span></span>


[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample10.cs)]

<span data-ttu-id="db5b4-233">Il codice per il gestore dell'evento è stato completato, ma è stata ancora per collegare la pagina master `PricesDoubled` questo gestore dell'evento.</span><span class="sxs-lookup"><span data-stu-id="db5b4-233">The code for the event handler is complete but we've yet to wire the master page's `PricesDoubled` event to this event handler.</span></span> <span data-ttu-id="db5b4-234">Il sottoscrittore collega un evento al gestore eventi tramite la sintassi seguente:</span><span class="sxs-lookup"><span data-stu-id="db5b4-234">The subscriber wires an event to an event handler via the following syntax:</span></span>


[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample11.cs)]

<span data-ttu-id="db5b4-235">*server di pubblicazione* è un riferimento all'oggetto che offre l'evento *eventName*, e *NomeMetodo* è il nome del gestore dell'evento definito nel Sottoscrittore che ha una firma corrispondente a il *eventDelegate*.</span><span class="sxs-lookup"><span data-stu-id="db5b4-235">*publisher* is a reference to the object that offers the event *eventName*, and *methodName* is the name of the event handler defined in the subscriber that has a signature corresponding to the *eventDelegate*.</span></span> <span data-ttu-id="db5b4-236">In altre parole, se l'evento di delegati è `EventHandler`, quindi *NomeMetodo* deve essere il nome di un metodo nel server di sottoscrizione che non restituisce un valore e accetta due parametri di tipi di input `Object` e `EventArgs`, rispettivamente.</span><span class="sxs-lookup"><span data-stu-id="db5b4-236">In other words, if the event delegate is `EventHandler`, then *methodName* must be the name of a method in the subscriber that does not return a value and accepts two input parameters of types `Object` and `EventArgs`, respectively.</span></span>

<span data-ttu-id="db5b4-237">Questo codice di cablaggio evento deve essere eseguito nella prima visita di pagina e postback successivi e deve essere eseguita in un punto di vita che precede quando potrebbe essere generato l'evento.</span><span class="sxs-lookup"><span data-stu-id="db5b4-237">This event wiring code must be executed on the first page visit and subsequent postbacks and should occur at a point in the page lifecycle that precedes when the event may be raised.</span></span> <span data-ttu-id="db5b4-238">Consiglia di aggiungere il codice di cablaggio dell'evento è in fase di PreInit, che si verifica all'inizio nel ciclo di vita di pagina.</span><span class="sxs-lookup"><span data-stu-id="db5b4-238">A good time to add event wiring code is in the PreInit stage, which occurs very early in the page lifecycle.</span></span>

<span data-ttu-id="db5b4-239">Aprire `~/Admin/Products.aspx` e creare un `Page_PreInit` gestore eventi:</span><span class="sxs-lookup"><span data-stu-id="db5b4-239">Open `~/Admin/Products.aspx` and create a `Page_PreInit` event handler:</span></span>


[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample12.cs)]

<span data-ttu-id="db5b4-240">Per completare questo codice di collegamento è necessario un riferimento a livello di codice della pagina master dalla pagina contenuto.</span><span class="sxs-lookup"><span data-stu-id="db5b4-240">In order to complete this wiring code we need a programmatic reference to the master page from the content page.</span></span> <span data-ttu-id="db5b4-241">Come indicato nell'esercitazione precedente, sono disponibili due modi per eseguire questa operazione:</span><span class="sxs-lookup"><span data-stu-id="db5b4-241">As noted in the previous tutorial, there are two ways to do this:</span></span>

- <span data-ttu-id="db5b4-242">Eseguendo il cast di fortemente tipizzato `Page.Master` proprietà al tipo di pagina master appropriato, o</span><span class="sxs-lookup"><span data-stu-id="db5b4-242">By casting the loosely-typed `Page.Master` property to the appropriate master page type, or</span></span>
- <span data-ttu-id="db5b4-243">Aggiungendo un `@MasterType` direttiva di `.aspx` pagina e quindi utilizzando fortemente tipizzata `Master` proprietà.</span><span class="sxs-lookup"><span data-stu-id="db5b4-243">By adding a `@MasterType` directive in the `.aspx` page and then using the strongly-typed `Master` property.</span></span>

<span data-ttu-id="db5b4-244">Consente di usare l'approccio di quest'ultimo.</span><span class="sxs-lookup"><span data-stu-id="db5b4-244">Let's use the latter approach.</span></span> <span data-ttu-id="db5b4-245">Aggiungere il seguente `@MasterType` direttiva all'inizio del markup dichiarativo della pagina:</span><span class="sxs-lookup"><span data-stu-id="db5b4-245">Add the following `@MasterType` directive to the top of the page's declarative markup:</span></span>


[!code-aspx[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample13.aspx)]

<span data-ttu-id="db5b4-246">Quindi aggiungere il seguente codice di collegamento di eventi nel `Page_PreInit` gestore eventi:</span><span class="sxs-lookup"><span data-stu-id="db5b4-246">Then add the following event wiring code in the `Page_PreInit` event handler:</span></span>


[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample14.cs)]

<span data-ttu-id="db5b4-247">Con questo codice, il controllo GridView nella pagina di contenuto viene aggiornato ogni volta che il `DoublePrice` si fa clic sul pulsante.</span><span class="sxs-lookup"><span data-stu-id="db5b4-247">With this code in place, the GridView in the content page is refreshed whenever the `DoublePrice` Button is clicked.</span></span>

<span data-ttu-id="db5b4-248">Cifre 8 e 9 viene illustrato questo comportamento.</span><span class="sxs-lookup"><span data-stu-id="db5b4-248">Figures 8 and 9 illustrate this behavior.</span></span> <span data-ttu-id="db5b4-249">Figura 8 mostra la pagina alla prima visita.</span><span class="sxs-lookup"><span data-stu-id="db5b4-249">Figure 8 shows the page when first visited.</span></span> <span data-ttu-id="db5b4-250">Si noti che il prezzo di valori in entrambe le `RecentProducts` GridView (nella colonna sinistra della pagina master) e `ProductsGrid` GridView (nella pagina di contenuto).</span><span class="sxs-lookup"><span data-stu-id="db5b4-250">Note that price values in both the `RecentProducts` GridView (in the left column of the master page) and the `ProductsGrid` GridView (in the content page).</span></span> <span data-ttu-id="db5b4-251">Figura 9 mostra la stessa schermata immediatamente dopo il `DoublePrice` ha fatto clic sul pulsante.</span><span class="sxs-lookup"><span data-stu-id="db5b4-251">Figure 9 shows the same screen immediately after the `DoublePrice` Button has been clicked.</span></span> <span data-ttu-id="db5b4-252">Come si può notare, i nuovi prezzi vengono riflesse immediatamente in entrambi i GridView.</span><span class="sxs-lookup"><span data-stu-id="db5b4-252">As you can see, the new prices are instantaneously reflected in both GridViews.</span></span>


<span data-ttu-id="db5b4-253">[![I valori di prezzo iniziale](interacting-with-the-content-page-from-the-master-page-cs/_static/image23.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="db5b4-253">[![The Initial Price Values](interacting-with-the-content-page-from-the-master-page-cs/_static/image23.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image22.png)</span></span>

<span data-ttu-id="db5b4-254">**Figura 08**: i valori dei prezzi iniziale di ([fare clic per visualizzare l'immagine ingrandita](interacting-with-the-content-page-from-the-master-page-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="db5b4-254">**Figure 08**: The Initial Price Values  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image24.png))</span></span>


<span data-ttu-id="db5b4-255">[![I prezzi Just-Doubled vengono visualizzati di GridView](interacting-with-the-content-page-from-the-master-page-cs/_static/image26.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="db5b4-255">[![The Just-Doubled Prices are Displayed in the GridViews](interacting-with-the-content-page-from-the-master-page-cs/_static/image26.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image25.png)</span></span>

<span data-ttu-id="db5b4-256">**Figura 09**: i prezzi The Just-Doubled vengono visualizzati di GridView ([fare clic per visualizzare l'immagine ingrandita](interacting-with-the-content-page-from-the-master-page-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="db5b4-256">**Figure 09**: The Just-Doubled Prices are Displayed in the GridViews  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image27.png))</span></span>


## <a name="summary"></a><span data-ttu-id="db5b4-257">Riepilogo</span><span class="sxs-lookup"><span data-stu-id="db5b4-257">Summary</span></span>

<span data-ttu-id="db5b4-258">Idealmente, una pagina master e le pagine di contenuto sono completamente distinti, uno da altro e nessun livello di interazione.</span><span class="sxs-lookup"><span data-stu-id="db5b4-258">Ideally, a master page and its content pages are completely separate from one another and require no level of interaction.</span></span> <span data-ttu-id="db5b4-259">Tuttavia, se si dispone di una pagina master o contenuto che visualizza i dati che possono essere modificati dalla pagina master o pagina di contenuto, quindi si potrebbe essere necessario disporre della pagina master avviso pagina contenuto (o a-viceversa) quando i dati vengono modificati in modo che sia possibile aggiornare la visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="db5b4-259">However, if you have a master page or content page that displays data that can be modified from the master page or content page, then you may need to have the master page alert the content page (or vice-a-versa) when data is modified so that the display can be updated.</span></span> <span data-ttu-id="db5b4-260">Nell'esercitazione precedente è stato illustrato come disporre di una pagina di contenuto a livello di programmazione interagire con la pagina master. in questa esercitazione è stato illustrato come avviare una pagina master l'interazione.</span><span class="sxs-lookup"><span data-stu-id="db5b4-260">In the preceding tutorial we saw how to have a content page programmatically interact with its master page; in this tutorial we looked at how to have a master page initiate the interaction.</span></span>

<span data-ttu-id="db5b4-261">Durante l'interazione a livello di codice tra una pagina master e il contenuto può derivare da pagina master o di contenuto, il modello di interazione utilizzato dipende dall'origine.</span><span class="sxs-lookup"><span data-stu-id="db5b4-261">While programmatic interaction between a content and master page can originate from either the content or master page, the interaction pattern used depends on the origination.</span></span> <span data-ttu-id="db5b4-262">Le differenze sono dovute al fatto che una pagina di contenuto ha una singola pagina master, ma una pagina master può disporre di molte pagine di contenuto diversi.</span><span class="sxs-lookup"><span data-stu-id="db5b4-262">The differences are due to the fact that a content page has a single master page, but a master page can have many different content pages.</span></span> <span data-ttu-id="db5b4-263">Anziché avere una pagina master interagire direttamente con una pagina di contenuto, un approccio migliore è di generare un evento per segnalare che un'azione ha avuto luogo la pagina master.</span><span class="sxs-lookup"><span data-stu-id="db5b4-263">Rather than having a master page directly interact with a content page, a better approach is to have the master page raise an event to signal that some action has taken place.</span></span> <span data-ttu-id="db5b4-264">Le pagine di contenuto che interessano l'azione è possono creare gestori eventi.</span><span class="sxs-lookup"><span data-stu-id="db5b4-264">Those content pages that care about the action can create event handlers.</span></span>

<span data-ttu-id="db5b4-265">Buona programmazione!</span><span class="sxs-lookup"><span data-stu-id="db5b4-265">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="db5b4-266">Ulteriori informazioni</span><span class="sxs-lookup"><span data-stu-id="db5b4-266">Further Reading</span></span>

<span data-ttu-id="db5b4-267">Per ulteriori informazioni sugli argomenti trattati in questa esercitazione, vedere le risorse seguenti:</span><span class="sxs-lookup"><span data-stu-id="db5b4-267">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="db5b4-268">L'accesso e l'aggiornamento dei dati in ASP.NET</span><span class="sxs-lookup"><span data-stu-id="db5b4-268">Accessing and Updating Data in ASP.NET</span></span>](http://aspnet.4guysfromrolla.com/articles/011106-1.aspx)
- [<span data-ttu-id="db5b4-269">Gli eventi e delegati</span><span class="sxs-lookup"><span data-stu-id="db5b4-269">Events and Delegates</span></span>](https://msdn.microsoft.com/library/17sde2xt.aspx)
- [<span data-ttu-id="db5b4-270">Il passaggio di informazioni tra il contenuto e pagine Master</span><span class="sxs-lookup"><span data-stu-id="db5b4-270">Passing Information Between Content and Master Pages</span></span>](http://aspnet.4guysfromrolla.com/articles/013107-1.aspx)
- [<span data-ttu-id="db5b4-271">Utilizzo di dati nelle esercitazioni ASP.NET</span><span class="sxs-lookup"><span data-stu-id="db5b4-271">Working with Data in ASP.NET Tutorials</span></span>](../../data-access/index.md)

### <a name="about-the-author"></a><span data-ttu-id="db5b4-272">Informazioni sull'autore</span><span class="sxs-lookup"><span data-stu-id="db5b4-272">About the Author</span></span>

<span data-ttu-id="db5b4-273">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autore di più libri e fondatore di 4GuysFromRolla, ha lavorato con tecnologie Web di Microsoft fin dal 1998.</span><span class="sxs-lookup"><span data-stu-id="db5b4-273">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="db5b4-274">Scott funziona come un consulente trainer e writer.</span><span class="sxs-lookup"><span data-stu-id="db5b4-274">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="db5b4-275">Il suo ultimo libro è [ *SAM insegna manualmente ASP.NET 3.5 nelle 24 ore*](https://www.amazon.com/exec/obidos/ASIN/0672329972/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="db5b4-275">His latest book is [*Sams Teach Yourself ASP.NET 3.5 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672329972/4guysfromrollaco).</span></span> <span data-ttu-id="db5b4-276">Scott può essere raggiunto al [ mitchell@4GuysFromRolla.com ](mailto:mitchell@4GuysFromRolla.com) o tramite il suo blog all'indirizzo [ http://ScottOnWriting.NET ](http://scottonwriting.net/).</span><span class="sxs-lookup"><span data-stu-id="db5b4-276">Scott can be reached at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="db5b4-277">Ringraziamenti speciali</span><span class="sxs-lookup"><span data-stu-id="db5b4-277">Special Thanks To</span></span>

<span data-ttu-id="db5b4-278">Questa serie di esercitazioni è stata esaminata da diversi validi revisori.</span><span class="sxs-lookup"><span data-stu-id="db5b4-278">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="db5b4-279">Il revisore per questa esercitazione è stata Suchi Banerjee.</span><span class="sxs-lookup"><span data-stu-id="db5b4-279">Lead reviewer for this tutorial was Suchi Banerjee.</span></span> <span data-ttu-id="db5b4-280">Se si è interessati my prossimi articoli MSDN?</span><span class="sxs-lookup"><span data-stu-id="db5b4-280">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="db5b4-281">In caso affermativo, Inviami una riga alla [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="db5b4-281">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="db5b4-282">[Precedente](interacting-with-the-master-page-from-the-content-page-cs.md)
> [Successivo](master-pages-and-asp-net-ajax-cs.md)</span><span class="sxs-lookup"><span data-stu-id="db5b4-282">[Previous](interacting-with-the-master-page-from-the-content-page-cs.md)
[Next](master-pages-and-asp-net-ajax-cs.md)</span></span>
