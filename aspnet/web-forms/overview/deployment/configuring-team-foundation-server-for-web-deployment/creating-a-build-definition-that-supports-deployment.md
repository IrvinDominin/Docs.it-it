---
uid: web-forms/overview/deployment/configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment
title: Creazione di una definizione di compilazione che supporta la distribuzione | Documenti Microsoft
author: jrjlee
description: Se si desidera eseguire qualsiasi tipo di compilazione in Team Foundation Server (TFS) 2010, è necessario creare una definizione di compilazione all'interno del progetto team. Des in questo argomento...
ms.author: aspnetcontent
manager: wpickett
ms.date: 05/04/2012
ms.topic: article
ms.assetid: fe47a018-f6d0-4979-80e7-5b1fa75a5865
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/deployment/configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment
msc.type: authoredcontent
ms.openlocfilehash: c5ea0bd9f01bb57b96abd349741f304c0093d887
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/06/2018
---
<a name="creating-a-build-definition-that-supports-deployment"></a><span data-ttu-id="23254-104">Creazione di una definizione di compilazione che supporta la distribuzione</span><span class="sxs-lookup"><span data-stu-id="23254-104">Creating a Build Definition That Supports Deployment</span></span>
====================
<span data-ttu-id="23254-105">da [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="23254-105">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="23254-106">Scarica il PDF</span><span class="sxs-lookup"><span data-stu-id="23254-106">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="23254-107">Se si desidera eseguire qualsiasi tipo di compilazione in Team Foundation Server (TFS) 2010, è necessario creare una definizione di compilazione all'interno del progetto team.</span><span class="sxs-lookup"><span data-stu-id="23254-107">If you want to perform any kind of build in Team Foundation Server (TFS) 2010, you need to create a build definition within your team project.</span></span> <span data-ttu-id="23254-108">In questo argomento viene descritto come creare una nuova definizione di compilazione in TFS e su come controllare la distribuzione web come parte del processo di compilazione in Team Build.</span><span class="sxs-lookup"><span data-stu-id="23254-108">This topic describes how to create a new build definition in TFS and how to control web deployment as part of the build process in Team Build.</span></span>


<span data-ttu-id="23254-109">In questo argomento fa parte di una serie di esercitazioni basate su requisiti di distribuzione dell'organizzazione di una società fittizia denominata Fabrikam, Inc. Questa serie di esercitazioni Usa una soluzione di esempio&#x2014;il [Contact Manager soluzione](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;per rappresentare un'applicazione web con un livello di complessità, tra cui un'applicazione ASP.NET MVC 3, una comunicazione Windows realistico Servizio Foundation (WCF) e un progetto di database.</span><span class="sxs-lookup"><span data-stu-id="23254-109">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="23254-110">Il metodo di distribuzione il fulcro di queste esercitazioni si basa sul progetto file split approccio descritto in [informazioni sui File di progetto](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in cui il processo di compilazione e distribuzione è controllato da due file di progetto&#x2014;uno contenente le istruzioni di compilazione che si applicano a ogni ambiente di destinazione e quella contenente impostazioni specifiche dell'ambiente di compilazione e distribuzione.</span><span class="sxs-lookup"><span data-stu-id="23254-110">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in which the build and deployment process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="23254-111">In fase di compilazione, il file di progetto specifici dell'ambiente viene unito nel file di progetto indipendenti dall'ambiente in modo da formare un set completo di istruzioni di compilazione.</span><span class="sxs-lookup"><span data-stu-id="23254-111">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="task-overview"></a><span data-ttu-id="23254-112">Panoramica di Task</span><span class="sxs-lookup"><span data-stu-id="23254-112">Task Overview</span></span>

<span data-ttu-id="23254-113">Una definizione di compilazione è il meccanismo che consente di controllare come e quando le compilazioni vengono eseguiti per i progetti team in TFS.</span><span class="sxs-lookup"><span data-stu-id="23254-113">A build definition is the mechanism that controls how and when builds occur for team projects in TFS.</span></span> <span data-ttu-id="23254-114">Ogni definizione di compilazione specifica:</span><span class="sxs-lookup"><span data-stu-id="23254-114">Each build definition specifies:</span></span>

- <span data-ttu-id="23254-115">Le operazioni che si desidera compilare, ad esempio i file di soluzione di Visual Studio o file di progetto personalizzati Microsoft Build Engine (MSBuild).</span><span class="sxs-lookup"><span data-stu-id="23254-115">The things you want to build, like Visual Studio solution files or custom Microsoft Build Engine (MSBuild) project files.</span></span>
- <span data-ttu-id="23254-116">I criteri che determinano quando deve essere una build di inseriscono, ad esempio trigger manuale, integrazione continua (CI), o archiviazioni.</span><span class="sxs-lookup"><span data-stu-id="23254-116">The criteria that determine when a build should take place, like manual triggers, continuous integration (CI), or gated check-ins.</span></span>
- <span data-ttu-id="23254-117">Il percorso a cui Team Build devono inviare gli output di compilazione, inclusi gli elementi di distribuzione come pacchetti web e gli script di database.</span><span class="sxs-lookup"><span data-stu-id="23254-117">The location to which Team Build should send build outputs, including deployment artifacts like web packages and database scripts.</span></span>
- <span data-ttu-id="23254-118">La quantità di tempo che deve essere mantenuto ogni compilazione.</span><span class="sxs-lookup"><span data-stu-id="23254-118">The amount of time that each build should be retained.</span></span>
- <span data-ttu-id="23254-119">Diversi altri parametri del processo di compilazione.</span><span class="sxs-lookup"><span data-stu-id="23254-119">Various other parameters of the build process.</span></span>

> [!NOTE]
> <span data-ttu-id="23254-120">Per ulteriori informazioni sulle definizioni di compilazione, vedere [definire il processo di compilazione](https://msdn.microsoft.com/library/ms181715.aspx).</span><span class="sxs-lookup"><span data-stu-id="23254-120">For more information on build definitions, see [Define Your Build Process](https://msdn.microsoft.com/library/ms181715.aspx).</span></span>


<span data-ttu-id="23254-121">Questo argomento viene illustrato come creare una definizione di compilazione che utilizza l'elemento di configurazione, in modo che una compilazione viene attivata quando uno sviluppatore archivia il nuovo contenuto.</span><span class="sxs-lookup"><span data-stu-id="23254-121">This topic will show you how to create a build definition that uses CI, so that a build is triggered when a developer checks in new content.</span></span> <span data-ttu-id="23254-122">Se la compilazione ha esito positivo, il servizio di compilazione esegue un file di progetto personalizzati per distribuire la soluzione in un ambiente di test.</span><span class="sxs-lookup"><span data-stu-id="23254-122">If the build succeeds, the build service runs a custom project file to deploy the solution to a test environment.</span></span>

<span data-ttu-id="23254-123">Quando si attiva una compilazione, queste azioni devono essere eseguite:</span><span class="sxs-lookup"><span data-stu-id="23254-123">When you trigger a build, these actions need to happen:</span></span>

- <span data-ttu-id="23254-124">In primo luogo, Team Build deve compilare la soluzione.</span><span class="sxs-lookup"><span data-stu-id="23254-124">First, Team Build should build the solution.</span></span> <span data-ttu-id="23254-125">Team Build come parte di questo processo, verrà richiamato Web pubblicazione Pipeline (WPP) per generare pacchetti di distribuzione web per ognuno dei progetti di applicazione web nella soluzione.</span><span class="sxs-lookup"><span data-stu-id="23254-125">As part of this process, Team Build will invoke the Web Publishing Pipeline (WPP) to generate web deployment packages for each of the web application projects in the solution.</span></span> <span data-ttu-id="23254-126">Compilazione di team verrà eseguiti anche qualsiasi unit test associati alla soluzione.</span><span class="sxs-lookup"><span data-stu-id="23254-126">Team Build will also run any unit tests associated with the solution.</span></span>
- <span data-ttu-id="23254-127">Se si verifica un errore di compilazione della soluzione, Team Build non deve intraprendere alcuna azione ulteriore.</span><span class="sxs-lookup"><span data-stu-id="23254-127">If the solution build fails, Team Build should take no further action.</span></span> <span data-ttu-id="23254-128">Errori di unit test devono essere considerati come un errore di compilazione.</span><span class="sxs-lookup"><span data-stu-id="23254-128">Unit test failures should be treated as a build failure.</span></span>
- <span data-ttu-id="23254-129">Se la compilazione di soluzioni ha esito positivo, Team Build deve eseguire il file di progetto personalizzato che controlla la distribuzione della soluzione.</span><span class="sxs-lookup"><span data-stu-id="23254-129">If the solution build succeeds, Team Build should run the custom project file that controls the deployment of the solution.</span></span> <span data-ttu-id="23254-130">Come parte di questo processo, Team Build richiameranno lo strumento di distribuzione Web di Internet Information Services (IIS) (distribuzione Web) per installare le applicazioni in pacchetto web nei server web di destinazione e verrà richiamato l'utilità VSDBCMD.exe per eseguire la creazione del database script nei server di database di destinazione.</span><span class="sxs-lookup"><span data-stu-id="23254-130">As part of this process, Team Build will invoke the Internet Information Services (IIS) Web Deployment Tool (Web Deploy) to install the packaged web applications on the destination web servers, and it will invoke the VSDBCMD.exe utility to run database creation scripts on the destination database servers.</span></span>

<span data-ttu-id="23254-131">Ciò illustra il processo:</span><span class="sxs-lookup"><span data-stu-id="23254-131">This illustrates the process:</span></span>

![](creating-a-build-definition-that-supports-deployment/_static/image1.png)

<span data-ttu-id="23254-132">Il [Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) soluzione di esempio include un file di progetto MSBuild personalizzato *Publish.proj*, che è possibile eseguire da MSBuild o Team Build.</span><span class="sxs-lookup"><span data-stu-id="23254-132">The [Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) sample solution includes a custom MSBuild project file, *Publish.proj*, that you can run from MSBuild or Team Build.</span></span> <span data-ttu-id="23254-133">Come descritto in [comprendere il processo di compilazione](../web-deployment-in-the-enterprise/understanding-the-build-process.md), questo file di progetto definisce la logica che consente di distribuire i pacchetti web e i database in un ambiente di destinazione.</span><span class="sxs-lookup"><span data-stu-id="23254-133">As described in [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md), this project file defines the logic that deploys your web packages and databases to a target environment.</span></span> <span data-ttu-id="23254-134">Il file include la logica che consente di omettere l'edificio e il processo di creazione del pacchetto se è in esecuzione in Team Build, lasciando solo le attività di distribuzione per l'esecuzione.</span><span class="sxs-lookup"><span data-stu-id="23254-134">The file includes logic that omits the building and packaging process if it's running in Team Build, leaving just the deployment tasks to run.</span></span> <span data-ttu-id="23254-135">Questo avviene perché quando si automatizza la distribuzione in questo modo, è in genere opportuno verificare che la soluzione venga compilata correttamente e passa tutti gli unit test prima di avviare il processo di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="23254-135">This is because when you automate deployment in this way, you'll typically want to ensure that the solution builds successfully and passes any unit tests before the deployment process commences.</span></span>

<span data-ttu-id="23254-136">La sezione successiva viene illustrato come implementare questo processo creando una nuova definizione di compilazione.</span><span class="sxs-lookup"><span data-stu-id="23254-136">The next section explains how to implement this process by creating a new build definition.</span></span>

> [!NOTE]
> <span data-ttu-id="23254-137">Questa procedura&#x2014;in cui automatizzata un singolo processo compilazioni, verifica e distribuisce una soluzione&#x2014;è probabile che sia più adatto per la distribuzione in ambienti di test.</span><span class="sxs-lookup"><span data-stu-id="23254-137">This procedure&#x2014;in which a single automated process builds, tests, and deploys a solution&#x2014;is likely to be most suited to deployment to test environments.</span></span> <span data-ttu-id="23254-138">Per gli ambienti di gestione temporanea e produzione si è molto più probabile che desidera distribuire il contenuto di una compilazione precedente che già verificato e convalidato in un ambiente di test.</span><span class="sxs-lookup"><span data-stu-id="23254-138">For staging and production environments you're a lot more likely to want to deploy content from a previous build that you've already verified and validated in a test environment.</span></span> <span data-ttu-id="23254-139">Questo approccio è descritto nell'argomento successivo, [la distribuzione di una compilazione specifica](deploying-a-specific-build.md).</span><span class="sxs-lookup"><span data-stu-id="23254-139">This approach is described in the next topic, [Deploying a Specific Build](deploying-a-specific-build.md).</span></span>


### <a name="who-performs-this-procedure"></a><span data-ttu-id="23254-140">Che consente di eseguire questa procedura?</span><span class="sxs-lookup"><span data-stu-id="23254-140">Who Performs This Procedure?</span></span>

<span data-ttu-id="23254-141">In genere, un amministratore TFS esegue questa procedura.</span><span class="sxs-lookup"><span data-stu-id="23254-141">Typically, a TFS administrator performs this procedure.</span></span> <span data-ttu-id="23254-142">In alcuni casi, un responsabile del team di sviluppo potrebbe richiedere la responsabilità per la raccolta di progetti team in TFS.</span><span class="sxs-lookup"><span data-stu-id="23254-142">In some cases, a developer team leader may take responsibility for the team project collection in TFS.</span></span> <span data-ttu-id="23254-143">Per creare una nuova definizione di compilazione, è necessario essere un membro del **Project Collection Administrators di compilare** gruppo per la raccolta di progetti team che contiene la soluzione.</span><span class="sxs-lookup"><span data-stu-id="23254-143">In order to create a new build definition, you need to be a member of the **Project Collection Build Administrators** group for the team project collection that contains your solution.</span></span>

## <a name="create-a-build-definition-for-ci-and-deployment"></a><span data-ttu-id="23254-144">Creare una definizione di compilazione per l'elemento di configurazione e distribuzione</span><span class="sxs-lookup"><span data-stu-id="23254-144">Create a Build Definition for CI and Deployment</span></span>

<span data-ttu-id="23254-145">La procedura seguente viene descritto come creare una definizione di compilazione che CI attiva.</span><span class="sxs-lookup"><span data-stu-id="23254-145">The next procedure describes how to create a build definition that CI triggers.</span></span> <span data-ttu-id="23254-146">Se la compilazione ha esito positivo, la soluzione viene distribuita utilizzando la logica in un file di progetto MSBuild personalizzato.</span><span class="sxs-lookup"><span data-stu-id="23254-146">If the build succeeds, the solution is deployed using the logic in a custom MSBuild project file.</span></span>

<span data-ttu-id="23254-147">**Per creare una definizione di compilazione per elementi di configurazione e distribuzione**</span><span class="sxs-lookup"><span data-stu-id="23254-147">**To create a build definition for CI and deployment**</span></span>

1. <span data-ttu-id="23254-148">In Visual Studio 2010, nel **Team Explorer** finestra, espandere il nodo del progetto team, fare doppio clic su **compilazioni**, quindi fare clic su **nuova definizione di compilazione**.</span><span class="sxs-lookup"><span data-stu-id="23254-148">In Visual Studio 2010, in the **Team Explorer** window, expand your team project node, right-click **Builds**, and then click **New Build Definition**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image2.png)
2. <span data-ttu-id="23254-149">Nel **generale** scheda, assegnare un nome di definizione di compilazione (ad esempio, **DeployToTest**) e una descrizione facoltativa.</span><span class="sxs-lookup"><span data-stu-id="23254-149">On the **General** tab, give the build definition a name (for example, **DeployToTest**) and an optional description.</span></span>
3. <span data-ttu-id="23254-150">Nel **Trigger** scheda, selezionare i criteri in cui si vuole attivare una nuova compilazione.</span><span class="sxs-lookup"><span data-stu-id="23254-150">On the **Trigger** tab, select the criteria on which you want to trigger a new build.</span></span> <span data-ttu-id="23254-151">Ad esempio, se si desidera compilare la soluzione e distribuire l'ambiente di test ogni volta che uno sviluppatore archivia nel nuovo codice, selezionare **integrazione continua**.</span><span class="sxs-lookup"><span data-stu-id="23254-151">For example, if you want to build the solution and deploy to the test environment every time a developer checks in new code, select **Continuous Integration**.</span></span>
4. <span data-ttu-id="23254-152">Nel **impostazioni predefinite compilazione** nella scheda il **Copia output nella seguente cartella di rilascio di compilazione** , digitare il percorso UNC Universal Naming Convention () della cartella di ricezione (ad esempio,  **\\TFSBUILD\Drops**).</span><span class="sxs-lookup"><span data-stu-id="23254-152">On the **Build Defaults** tab, in the **Copy build output to the following drop folder** box, type the Universal Naming Convention (UNC) path of your drop folder (for example, **\\TFSBUILD\Drops**).</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image3.png)

    > [!NOTE]
    > <span data-ttu-id="23254-153">Questo percorso di rilascio archivia le compilazioni diverse, a seconda dei criteri di conservazione configurate.</span><span class="sxs-lookup"><span data-stu-id="23254-153">This drop location stores several builds, depending on the retention policy you configure.</span></span> <span data-ttu-id="23254-154">Quando si desidera pubblicare gli elementi di distribuzione da una compilazione specifica in un ambiente di produzione o gestione temporanea, viene visualizzato in cui è possibile trovarli.</span><span class="sxs-lookup"><span data-stu-id="23254-154">When you want to publish deployment artifacts from a specific build to a staging or production environment, this is where you'll find them.</span></span>
5. <span data-ttu-id="23254-155">Nel **processo** nella scheda il **file processo di compilazione** dall'elenco a discesa lasciare **DefaultTemplate** selezionato.</span><span class="sxs-lookup"><span data-stu-id="23254-155">On the **Process** tab, in the **Build process file** dropdown list, leave **DefaultTemplate.xaml** selected.</span></span> <span data-ttu-id="23254-156">Questo è uno dei modelli di processo di compilazione predefiniti che vengono aggiunte a tutti i nuovi progetti team.</span><span class="sxs-lookup"><span data-stu-id="23254-156">This is one of the default build process templates that get added to all new team projects.</span></span>
6. <span data-ttu-id="23254-157">Nel **parametri processo di compilazione** tabella, fare clic su di **elementi da compilare** riga e quindi fare clic sul **i puntini di sospensione** pulsante.</span><span class="sxs-lookup"><span data-stu-id="23254-157">In the **Build process parameters** table, click in the **Items to Build** row, and then click the **ellipsis** button.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image4.png)
7. <span data-ttu-id="23254-158">Nel **elementi da compilare** la finestra di dialogo, fare clic su **Aggiungi**.</span><span class="sxs-lookup"><span data-stu-id="23254-158">In the **Items to Build** dialog box, click **Add**.</span></span>
8. <span data-ttu-id="23254-159">Passare al percorso del file di soluzione e quindi fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="23254-159">Browse to the location of your solution file, and then click **OK**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image5.png)
9. <span data-ttu-id="23254-160">Nel **elementi da compilare** la finestra di dialogo, fare clic su **Aggiungi**.</span><span class="sxs-lookup"><span data-stu-id="23254-160">In the **Items to Build** dialog box, click **Add**.</span></span>
10. <span data-ttu-id="23254-161">Nel **gli elementi di tipo** elenco a discesa, seleziona **i file di progetto MSBuild**.</span><span class="sxs-lookup"><span data-stu-id="23254-161">In the **Items of type** dropdown list, select **MSBuild Project files**.</span></span>
11. <span data-ttu-id="23254-162">Passare al percorso del file di progetto personalizzati con cui controllano il processo di distribuzione, selezionare il file e quindi fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="23254-162">Browse to the location of the custom project file with which you control the deployment process, select the file, and then click **OK**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image6.png)
12. <span data-ttu-id="23254-163">Il **elementi da compilare** la finestra di dialogo vengono visualizzati due elementi.</span><span class="sxs-lookup"><span data-stu-id="23254-163">The **Items to Build** dialog box should now show two items.</span></span> <span data-ttu-id="23254-164">Fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="23254-164">Click **OK**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image7.png)
13. <span data-ttu-id="23254-165">Nel **processo** nella scheda il **parametri processo di compilazione** tabella, quindi espandere il **avanzate** sezione.</span><span class="sxs-lookup"><span data-stu-id="23254-165">On the **Process** tab, in the **Build process parameters** table, expand the **Advanced** section.</span></span>
14. <span data-ttu-id="23254-166">Nel **argomenti MSBuild** di riga, aggiungere tutti gli argomenti della riga di comando di MSBuild che *entrambi* degli elementi di compilazione richiede.</span><span class="sxs-lookup"><span data-stu-id="23254-166">In the **MSBuild Arguments** row, add any MSBuild command-line arguments that *either* of your items to build requires.</span></span> <span data-ttu-id="23254-167">Nello scenario di soluzione Contact Manager, sono necessari questi argomenti:</span><span class="sxs-lookup"><span data-stu-id="23254-167">In the Contact Manager solution scenario, these arguments are required:</span></span>

    [!code-console[Main](creating-a-build-definition-that-supports-deployment/samples/sample1.cmd)]

    ![](creating-a-build-definition-that-supports-deployment/_static/image8.png)
15. <span data-ttu-id="23254-168">In questo esempio:</span><span class="sxs-lookup"><span data-stu-id="23254-168">In this example:</span></span>

    1. <span data-ttu-id="23254-169">Il **DeployOnBuild = true** e **DeployTarget = pacchetto** sono necessari argomenti quando si compila la soluzione di gestione di contatto.</span><span class="sxs-lookup"><span data-stu-id="23254-169">The **DeployOnBuild=true** and **DeployTarget=package** arguments are required when you build the Contact Manager solution.</span></span> <span data-ttu-id="23254-170">Ciò indica a MSBuild per creare web pacchetti di distribuzione dopo la compilazione di ogni progetto di applicazione web, come descritto in [compilazione e creazione di pacchetti Web Application Projects](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md).</span><span class="sxs-lookup"><span data-stu-id="23254-170">This instructs MSBuild to create web deployment packages after building each web application project, as described in [Building and Packaging Web Application Projects](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md).</span></span>
    2. <span data-ttu-id="23254-171">Il **TargetEnvPropsFile** argomento è obbligatorio quando si compila il *Publish.proj* file.</span><span class="sxs-lookup"><span data-stu-id="23254-171">The **TargetEnvPropsFile** argument is required when you build the *Publish.proj* file.</span></span> <span data-ttu-id="23254-172">Questa proprietà indica il percorso del file di configurazione specifici dell'ambiente, come descritto in [comprendere il processo di compilazione](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span><span class="sxs-lookup"><span data-stu-id="23254-172">This property indicates the location of the environment-specific configuration file, as described in [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span></span>
16. <span data-ttu-id="23254-173">Nel **criteri di conservazione** , configurare il numero di compilazioni di ogni tipo a cui si desidera mantenere come richiesto.</span><span class="sxs-lookup"><span data-stu-id="23254-173">On the **Retention Policy** tab, configure how many builds of each type you want to retain as required.</span></span>
17. <span data-ttu-id="23254-174">Fare clic su **Salva**.</span><span class="sxs-lookup"><span data-stu-id="23254-174">Click **Save**.</span></span>

## <a name="queue-a-build"></a><span data-ttu-id="23254-175">Accodare una compilazione</span><span class="sxs-lookup"><span data-stu-id="23254-175">Queue a Build</span></span>

<span data-ttu-id="23254-176">A questo punto, creazione almeno una nuova definizione di compilazione.</span><span class="sxs-lookup"><span data-stu-id="23254-176">At this point, you have created at least one new build definition.</span></span> <span data-ttu-id="23254-177">Verrà eseguito il processo di compilazione che è definito in base a trigger specificato nella definizione di compilazione.</span><span class="sxs-lookup"><span data-stu-id="23254-177">The build process you defined will now run according to the triggers you specified in the build definition.</span></span>

<span data-ttu-id="23254-178">Se hai configurato la definizione di compilazione per utilizzare l'elemento di configurazione, è possibile testare la definizione di compilazione in due modi:</span><span class="sxs-lookup"><span data-stu-id="23254-178">If you've configured your build definition to use CI, you can test your build definition in two ways:</span></span>

- <span data-ttu-id="23254-179">Archiviare il progetto team per attivare una compilazione automatica di alcuni contenuti.</span><span class="sxs-lookup"><span data-stu-id="23254-179">Check in some content to the team project to trigger an automatic build.</span></span>
- <span data-ttu-id="23254-180">Accodare una compilazione manuale.</span><span class="sxs-lookup"><span data-stu-id="23254-180">Queue a build manually.</span></span>

<span data-ttu-id="23254-181">**Accodare una compilazione manuale**</span><span class="sxs-lookup"><span data-stu-id="23254-181">**To queue a build manually**</span></span>

1. <span data-ttu-id="23254-182">Nel **Team Explorer** finestra, fare doppio clic sulla definizione di compilazione e quindi fare clic su **Accoda nuova compilazione**.</span><span class="sxs-lookup"><span data-stu-id="23254-182">In the **Team Explorer** window, right-click the build definition, and then click **Queue New Build**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image9.png)
2. <span data-ttu-id="23254-183">Nel **Accoda compilazione** nella finestra di dialogo esaminare le proprietà di compilazione e quindi fare clic su **coda**.</span><span class="sxs-lookup"><span data-stu-id="23254-183">In the **Queue Build** dialog box, review the build properties, and then click **Queue**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image10.png)

<span data-ttu-id="23254-184">Per esaminare lo stato di avanzamento e il risultato di una compilazione&#x2014;indipendentemente dal fatto che è stata attivata automaticamente o manualmente&#x2014;fare doppio clic sulla definizione di compilazione nel **Team Explorer** finestra.</span><span class="sxs-lookup"><span data-stu-id="23254-184">To review the progress and the outcome of a build&#x2014;regardless of whether it was triggered manually or automatically&#x2014;double-click the build definition in the **Team Explorer** window.</span></span> <span data-ttu-id="23254-185">Verrà aperta una **Build Explorer** scheda.</span><span class="sxs-lookup"><span data-stu-id="23254-185">This will open a **Build Explorer** tab.</span></span>

![](creating-a-build-definition-that-supports-deployment/_static/image11.png)

<span data-ttu-id="23254-186">Da qui è possibile risolvere errori di compilazione.</span><span class="sxs-lookup"><span data-stu-id="23254-186">From here, you can troubleshoot failed builds.</span></span> <span data-ttu-id="23254-187">Se si fa doppio clic su una singola compilazione, è possibile visualizzare le informazioni di riepilogo e fare clic per file di log dettagliati.</span><span class="sxs-lookup"><span data-stu-id="23254-187">If you double-click an individual build, you can view summary information and click through to detailed log files.</span></span>

![](creating-a-build-definition-that-supports-deployment/_static/image12.png)

<span data-ttu-id="23254-188">È possibile utilizzare queste informazioni per risolvere i problemi relativi a errori di compilazione e risolvere eventuali problemi prima di tentare un'altra compilazione.</span><span class="sxs-lookup"><span data-stu-id="23254-188">You can use this information to troubleshoot failed builds and address any problems before you attempt another build.</span></span>

> [!NOTE]
> <span data-ttu-id="23254-189">Le compilazioni che eseguono la logica di distribuzione sono probabilmente esito negativo fino a quando non si dispone del server di compilazione tutte le autorizzazioni necessarie nell'ambiente di destinazione.</span><span class="sxs-lookup"><span data-stu-id="23254-189">Builds that execute deployment logic are likely to fail until you have granted the build server any permissions required in the destination environment.</span></span> <span data-ttu-id="23254-190">Per ulteriori informazioni, vedere [configurazione delle autorizzazioni per la distribuzione di compilazione Team](configuring-permissions-for-team-build-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="23254-190">For more information, see [Configuring Permissions for Team Build Deployment](configuring-permissions-for-team-build-deployment.md).</span></span>


## <a name="monitor-the-build-process"></a><span data-ttu-id="23254-191">Monitorare il processo di compilazione</span><span class="sxs-lookup"><span data-stu-id="23254-191">Monitor the Build Process</span></span>

<span data-ttu-id="23254-192">TFS fornisce un'ampia gamma di funzionalità che consentono di monitorare il processo di compilazione.</span><span class="sxs-lookup"><span data-stu-id="23254-192">TFS provides a broad range of functionality to help you monitor the build process.</span></span> <span data-ttu-id="23254-193">Ad esempio, TFS può inviare un messaggio di posta elettronica o visualizzare gli avvisi nell'area di notifica della barra delle applicazioni quando è stata completata una compilazione.</span><span class="sxs-lookup"><span data-stu-id="23254-193">For example, TFS can send you an email or display alerts in your taskbar notification area when a build has completed.</span></span> <span data-ttu-id="23254-194">Per ulteriori informazioni, vedere [eseguire e monitorare le compilazioni](https://msdn.microsoft.com/library/ms181721.aspx).</span><span class="sxs-lookup"><span data-stu-id="23254-194">For more information, see [Run and Monitor Builds](https://msdn.microsoft.com/library/ms181721.aspx).</span></span>

## <a name="conclusion"></a><span data-ttu-id="23254-195">Conclusione</span><span class="sxs-lookup"><span data-stu-id="23254-195">Conclusion</span></span>

<span data-ttu-id="23254-196">In questo argomento viene descritto come creare una definizione di compilazione in TFS.</span><span class="sxs-lookup"><span data-stu-id="23254-196">This topic described how to create a build definition in TFS.</span></span> <span data-ttu-id="23254-197">La definizione di compilazione è configurata per l'integrazione continua, il processo di compilazione con cui viene eseguito ogni volta che uno sviluppatore archivia nel contenuto al progetto team.</span><span class="sxs-lookup"><span data-stu-id="23254-197">The build definition is configured for CI, so the build process runs whenever a developer checks in content to the team project.</span></span> <span data-ttu-id="23254-198">La definizione di compilazione esegue un file di progetto MSBuild personalizzato per distribuire pacchetti web e gli script di database in un ambiente server di destinazione.</span><span class="sxs-lookup"><span data-stu-id="23254-198">The build definition executes a custom MSBuild project file to deploy web packages and database scripts to a target server environment.</span></span>

<span data-ttu-id="23254-199">Affinché una distribuzione automatica abbia esito positivo come parte di un processo di compilazione, è necessario concedere le autorizzazioni appropriate all'account del servizio di compilazione nel server web di destinazione e il server di database di destinazione.</span><span class="sxs-lookup"><span data-stu-id="23254-199">In order for an automated deployment to succeed as part of a build process, you'll need to grant appropriate permissions to the build service account on the target web servers and the target database server.</span></span> <span data-ttu-id="23254-200">L'argomento finale in questa esercitazione, [configurazione delle autorizzazioni per la distribuzione di compilazione Team](configuring-permissions-for-team-build-deployment.md), viene descritto come identificare e configurare le autorizzazioni necessarie per la distribuzione automatica da un server Team Build.</span><span class="sxs-lookup"><span data-stu-id="23254-200">The final topic in this tutorial, [Configuring Permissions for Team Build Deployment](configuring-permissions-for-team-build-deployment.md), describes how to identify and configure the permissions required for automated deployment from a Team Build server.</span></span>

## <a name="further-reading"></a><span data-ttu-id="23254-201">Ulteriori informazioni</span><span class="sxs-lookup"><span data-stu-id="23254-201">Further Reading</span></span>

<span data-ttu-id="23254-202">Per ulteriori informazioni sulla creazione di definizioni di compilazione, vedere [creare una definizione di compilazione di base](https://msdn.microsoft.com/library/ms181716.aspx) e [definire il processo di compilazione](https://msdn.microsoft.com/library/ms181715.aspx).</span><span class="sxs-lookup"><span data-stu-id="23254-202">For more information on creating build definitions, see [Create a Basic Build Definition](https://msdn.microsoft.com/library/ms181716.aspx) and [Define Your Build Process](https://msdn.microsoft.com/library/ms181715.aspx).</span></span> <span data-ttu-id="23254-203">Per informazioni aggiuntive nelle build di Accodamento messaggi, vedere [accodare una compilazione](https://msdn.microsoft.com/library/ms181722.aspx).</span><span class="sxs-lookup"><span data-stu-id="23254-203">For more guidance on queuing builds, see [Queue a Build](https://msdn.microsoft.com/library/ms181722.aspx).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="23254-204">[Precedente](configuring-a-tfs-build-server-for-web-deployment.md)
> [Successivo](deploying-a-specific-build.md)</span><span class="sxs-lookup"><span data-stu-id="23254-204">[Previous](configuring-a-tfs-build-server-for-web-deployment.md)
[Next](deploying-a-specific-build.md)</span></span>
