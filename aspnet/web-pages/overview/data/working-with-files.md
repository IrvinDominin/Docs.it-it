---
uid: web-pages/overview/data/working-with-files
title: Utilizzo dei file in un sito ASP.NET Web Pages (Razor) | Documenti Microsoft
author: tfitzmac
description: In questo capitolo viene illustrato come leggere, scrivere, aggiungere, eliminare e caricare i file.
ms.author: aspnetcontent
manager: wpickett
ms.date: 02/20/2014
ms.topic: article
ms.assetid: eee916e4-ba4c-439a-a24e-68df7d45a569
ms.technology: dotnet-webpages
ms.prod: .net-framework
msc.legacyurl: /web-pages/overview/data/working-with-files
msc.type: authoredcontent
ms.openlocfilehash: 0f119f8fb4873e55292203f21a2efd8f26793ae4
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/10/2018
ms.locfileid: "28040223"
---
<a name="working-with-files-in-an-aspnet-web-pages-razor-site"></a><span data-ttu-id="2a3b0-103">Utilizzo dei file in un sito Web di ASP.NET di pagine (Razor)</span><span class="sxs-lookup"><span data-stu-id="2a3b0-103">Working with Files in an ASP.NET Web Pages (Razor) Site</span></span>
====================
<span data-ttu-id="2a3b0-104">da [Tom FitzMacken](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="2a3b0-104">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="2a3b0-105">In questo articolo viene illustrato come leggere, scrivere, aggiungere, eliminare e caricare i file in un sito di pagine Web ASP.NET (Razor).</span><span class="sxs-lookup"><span data-stu-id="2a3b0-105">This article explains how to read, write, append, delete, and upload files in an ASP.NET Web Pages (Razor) site.</span></span>
> 
> > [!NOTE]
> > <span data-ttu-id="2a3b0-106">Se si desidera caricare immagini e modificarli (ad esempio, capovolge o ridimensionarle), vedere [utilizzo delle immagini in un sito di pagine Web ASP.NET](https://go.microsoft.com/fwlink/?LinkId=202897).</span><span class="sxs-lookup"><span data-stu-id="2a3b0-106">If you want to upload images and manipulate them (for example, flip or resize them), see [Working with Images in an ASP.NET Web Pages Site](https://go.microsoft.com/fwlink/?LinkId=202897).</span></span>
> 
> 
> <span data-ttu-id="2a3b0-107">**Illustra quanto segue:**</span><span class="sxs-lookup"><span data-stu-id="2a3b0-107">**What you'll learn:**</span></span> 
> 
> - <span data-ttu-id="2a3b0-108">Come creare un file di testo e scrivere dati.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-108">How to create a text file and write data to it.</span></span>
> - <span data-ttu-id="2a3b0-109">Come aggiungere dati a un file esistente.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-109">How to append data to an existing file.</span></span>
> - <span data-ttu-id="2a3b0-110">Come leggere un file e visualizzare da esso.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-110">How to read a file and display from it.</span></span>
> - <span data-ttu-id="2a3b0-111">Come eliminare file da un sito Web.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-111">How to delete files from a website.</span></span>
> - <span data-ttu-id="2a3b0-112">Come consentire agli utenti di caricare uno o più file.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-112">How to let users upload one file or multiple files.</span></span>
> 
> <span data-ttu-id="2a3b0-113">Si tratta di programmazione delle funzionalità introdotte nell'articolo ASP.NET:</span><span class="sxs-lookup"><span data-stu-id="2a3b0-113">These are the ASP.NET programming features introduced in the article:</span></span>
> 
> - <span data-ttu-id="2a3b0-114">Il `File` oggetto che fornisce un modo per gestire i file.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-114">The `File` object, which provides a way to manage files.</span></span>
> - <span data-ttu-id="2a3b0-115">Il `FileUpload` helper.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-115">The `FileUpload` helper.</span></span>
> - <span data-ttu-id="2a3b0-116">Il `Path` oggetto che fornisce metodi che consentono di modificare i nomi file e percorso.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-116">The `Path` object, which provides methods that let you manipulate path and file names.</span></span>
>   
> 
> ## <a name="software-versions-used-in-the-tutorial"></a><span data-ttu-id="2a3b0-117">Versioni del software utilizzate nell'esercitazione</span><span class="sxs-lookup"><span data-stu-id="2a3b0-117">Software versions used in the tutorial</span></span>
> 
> 
> - <span data-ttu-id="2a3b0-118">Pagine Web ASP.NET (Razor) 2</span><span class="sxs-lookup"><span data-stu-id="2a3b0-118">ASP.NET Web Pages (Razor) 2</span></span>
> - <span data-ttu-id="2a3b0-119">WebMatrix 2</span><span class="sxs-lookup"><span data-stu-id="2a3b0-119">WebMatrix 2</span></span>
>   
> 
> <span data-ttu-id="2a3b0-120">In questa esercitazione si integra inoltre con 3 di WebMatrix.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-120">This tutorial also works with WebMatrix 3.</span></span>


<a id="Creating_a_Text_File"></a>
## <a name="creating-a-text-file-and-writing-data-to-it"></a><span data-ttu-id="2a3b0-121">Creazione di un File di testo e scrivere dati</span><span class="sxs-lookup"><span data-stu-id="2a3b0-121">Creating a Text File and Writing Data to It</span></span>

<span data-ttu-id="2a3b0-122">Oltre a utilizzare un database del sito Web, potrebbe funzionare con i file.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-122">In addition to using a database in your website, you might work with files.</span></span> <span data-ttu-id="2a3b0-123">Ad esempio, è possibile utilizzare i file di testo come un modo semplice per archiviare i dati per il sito.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-123">For example, you might use text files as a simple way to store data for the site.</span></span> <span data-ttu-id="2a3b0-124">(Un file di testo che viene utilizzato per archiviare i dati in alcuni casi viene chiamato un *file flat*.) File di testo possono essere in formati diversi, ad esempio *. txt*, *XML*, o *CSV* (valori delimitati da virgole).</span><span class="sxs-lookup"><span data-stu-id="2a3b0-124">(A text file that's used to store data is sometimes called a *flat file*.) Text files can be in different formats, like *.txt*, *.xml*, or *.csv* (comma-delimited values).</span></span>

<span data-ttu-id="2a3b0-125">Se si desidera archiviare i dati in un file di testo, è possibile utilizzare il `File.WriteAllText` metodo per specificare il file per creare e i dati per la scrittura.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-125">If you want to store data in a text file, you can use the `File.WriteAllText` method to specify the file to create and the data to write to it.</span></span> <span data-ttu-id="2a3b0-126">In questa procedura, si creerà una pagina che contiene un modulo semplice con tre `input` elementi (nome, cognome e indirizzo di posta elettronica) e un **Invia** pulsante.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-126">In this procedure, you'll create a page that contains a simple form with three `input` elements (first name, last name, and email address) and a **Submit** button.</span></span> <span data-ttu-id="2a3b0-127">Quando l'utente invia il form, che conterrà l'input dell'utente in un file di testo.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-127">When the user submits the form, you'll store the user's input in a text file.</span></span>

1. <span data-ttu-id="2a3b0-128">Creare una nuova cartella denominata *App\_dati*, se non esiste già.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-128">Create a new folder named *App\_Data*, if it doesn't exist already.</span></span>
2. <span data-ttu-id="2a3b0-129">Alla radice del sito Web, creare un nuovo file denominato *UserData.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-129">At the root of your website, create a new file named *UserData.cshtml*.</span></span>
3. <span data-ttu-id="2a3b0-130">Sostituire il contenuto esistente con il seguente:</span><span class="sxs-lookup"><span data-stu-id="2a3b0-130">Replace the existing content with the following:</span></span> 

    [!code-cshtml[Main](working-with-files/samples/sample1.cshtml)]

    <span data-ttu-id="2a3b0-131">Il markup HTML crea il form con tre caselle di testo.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-131">The HTML markup creates the form with the three text boxes.</span></span> <span data-ttu-id="2a3b0-132">Nel codice, utilizzare il `IsPost` proprietà per determinare se è stata inviata la pagina prima di iniziare l'elaborazione.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-132">In the code, you use the `IsPost` property to determine whether the page has been submitted before you start processing.</span></span>

    <span data-ttu-id="2a3b0-133">La prima attività è per ottenere l'input dell'utente e assegnarla a variabili.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-133">The first task is to get the user input and assign it to variables.</span></span> <span data-ttu-id="2a3b0-134">Il codice quindi concatena i valori delle variabili separate in un'unica stringa delimitata da virgole, che viene quindi archiviata in una variabile diversa.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-134">The code then concatenates the values of the separate variables into one comma-delimited string, which is then stored in a different variable.</span></span> <span data-ttu-id="2a3b0-135">Si noti che il separatore virgola è una stringa racchiusi tra virgolette (","). intendi incorporare una virgola letterale nella stringa di grandi dimensioni che si sta creando.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-135">Notice that the comma separator is a string contained in quotation marks (","), because you're literally embedding a comma into the big string that you're creating.</span></span> <span data-ttu-id="2a3b0-136">Alla fine dei dati che concatenano, aggiungere `Environment.NewLine`.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-136">At the end of the data that you concatenate together, you add `Environment.NewLine`.</span></span> <span data-ttu-id="2a3b0-137">Aggiunge un'interruzione di riga (carattere di nuova riga).</span><span class="sxs-lookup"><span data-stu-id="2a3b0-137">This adds a line break (a newline character).</span></span> <span data-ttu-id="2a3b0-138">Cosa si sta creando tutti questa concatenazione è una stringa simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="2a3b0-138">What you're creating with all this concatenation is a string that looks like this:</span></span>

    [!code-css[Main](working-with-files/samples/sample2.css)]

    <span data-ttu-id="2a3b0-139">(Con un'invisibile interruzione di riga alla fine.)</span><span class="sxs-lookup"><span data-stu-id="2a3b0-139">(With an invisible line break at the end.)</span></span>

    <span data-ttu-id="2a3b0-140">Creare quindi una variabile (`dataFile`) che contiene il percorso e nome del file in cui archiviare i dati.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-140">You then create a variable (`dataFile`) that contains the location and name of the file to store the data in.</span></span> <span data-ttu-id="2a3b0-141">Impostazione della posizione richiede alcune una gestione speciale.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-141">Setting the location requires some special handling.</span></span> <span data-ttu-id="2a3b0-142">In siti Web, è una buona prassi per fare riferimento nel codice in percorsi assoluti come *C:\Folder\File.txt* per i file nel server web.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-142">In websites, it's a bad practice to refer in code to absolute paths like *C:\Folder\File.txt* for files on the web server.</span></span> <span data-ttu-id="2a3b0-143">Se viene spostato un sito Web, un percorso assoluto sarà corretto.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-143">If a website is moved, an absolute path will be wrong.</span></span> <span data-ttu-id="2a3b0-144">Inoltre, per un sito di hosting (in contrapposizione nel proprio computer) in genere anche conosce il percorso corretto quando si scrive il codice.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-144">Moreover, for a hosted site (as opposed to on your own computer) you typically don't even know what the correct path is when you're writing the code.</span></span>

    <span data-ttu-id="2a3b0-145">Ma in alcuni casi (ad esempio, ora, per la scrittura di un file) è necessario un percorso completo.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-145">But sometimes (like now, for writing a file) you do need a complete path.</span></span> <span data-ttu-id="2a3b0-146">La soluzione consiste nell'utilizzare il `MapPath` metodo il `Server` oggetto.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-146">The solution is to use the `MapPath` method of the `Server` object.</span></span> <span data-ttu-id="2a3b0-147">Restituisce il percorso completo per il sito Web.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-147">This returns the complete path to your website.</span></span> <span data-ttu-id="2a3b0-148">Per ottenere il percorso per la radice del sito Web, si utilizza il `~` (operatore) (per represen del virtuale nel sito radice) per `MapPath`.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-148">To get the path for the website root, you user the `~` operator (to represen the site's virtual root) to `MapPath`.</span></span> <span data-ttu-id="2a3b0-149">(È anche possibile passare un nome della sottocartella, ad esempio *~/App\_dati /*, per ottenere il percorso per tale sottocartella.) È quindi possibile concatenare le informazioni aggiuntive su qualsiasi sia il metodo restituisce per creare un percorso completo.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-149">(You can also pass a subfolder name to it, like *~/App\_Data/*, to get the path for that subfolder.) You can then concatenate additional information onto whatever the method returns in order to create a complete path.</span></span> <span data-ttu-id="2a3b0-150">In questo esempio, si aggiunge un nome di file.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-150">In this example, you add a file name.</span></span> <span data-ttu-id="2a3b0-151">(Ulteriori informazioni su come lavorare con i percorsi di file e cartelle in [Introduzione a ASP.NET Web Pages di programmazione utilizzando la sintassi Razor](https://go.microsoft.com/fwlink/?LinkId=195205#ID_WorkingWithFileAndFolderPaths).)</span><span class="sxs-lookup"><span data-stu-id="2a3b0-151">(You can read more about how to work with file and folder paths in [Introduction to ASP.NET Web Pages Programming Using the Razor Syntax](https://go.microsoft.com/fwlink/?LinkId=195205#ID_WorkingWithFileAndFolderPaths).)</span></span>

    <span data-ttu-id="2a3b0-152">Il file viene salvato nel *App\_dati* cartella.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-152">The file is saved in the *App\_Data* folder.</span></span> <span data-ttu-id="2a3b0-153">Questa cartella è una cartella speciale di ASP.NET che viene utilizzata per archiviare i file di dati, come descritto [Introduzione all'uso di un Database nei siti di ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=195209).</span><span class="sxs-lookup"><span data-stu-id="2a3b0-153">This folder is a special folder in ASP.NET that's used to store data files, as described in [Introduction to Working with a Database in ASP.NET Web Pages Sites](https://go.microsoft.com/fwlink/?LinkId=195209).</span></span>

    <span data-ttu-id="2a3b0-154">Il `WriteAllText` metodo il `File` oggetto scrive i dati del file.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-154">The `WriteAllText` method of the `File` object writes the data to the file.</span></span> <span data-ttu-id="2a3b0-155">Questo metodo accetta due parametri: il nome (con il percorso) del file da scrivere e i dati effettivi da scrivere.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-155">This method takes two parameters: the name (with path) of the file to write to, and the actual data to write.</span></span> <span data-ttu-id="2a3b0-156">Si noti che il nome del primo parametro presenta un `@` carattere come prefisso.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-156">Notice that the name of the first parameter has an `@` character as a prefix.</span></span> <span data-ttu-id="2a3b0-157">Questo indica ad ASP.NET che si forniscono un valore letterale stringa lettera e caratteri, ad esempio "/" che non deve essere interpretato in modo speciale.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-157">This tells ASP.NET that you're providing a verbatim string literal, and that characters like "/" should not be interpreted in special ways.</span></span> <span data-ttu-id="2a3b0-158">(Per ulteriori informazioni, vedere [Introduzione alla programmazione Web ASP.NET utilizzando la sintassi Razor](https://go.microsoft.com/fwlink/?LinkId=195205#ID_WorkingWithFileAndFolderPaths).)</span><span class="sxs-lookup"><span data-stu-id="2a3b0-158">(For more information, see [Introduction to ASP.NET Web Programming Using the Razor Syntax](https://go.microsoft.com/fwlink/?LinkId=195205#ID_WorkingWithFileAndFolderPaths).)</span></span>

    > [!NOTE]
    > <span data-ttu-id="2a3b0-159">Affinché il codice salvare i file nel *App\_dati* cartella, l'applicazione deve autorizzazioni di lettura-scrittura per la cartella.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-159">In order for your code to save files in the *App\_Data* folder, the application needs read-write permissions for that folder.</span></span> <span data-ttu-id="2a3b0-160">Nel computer di sviluppo non si tratta in genere un problema.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-160">On your development computer this is not typically an issue.</span></span> <span data-ttu-id="2a3b0-161">Tuttavia, quando si pubblica il sito al server di un provider di hosting web, potrebbe essere necessario impostare in modo esplicito tali autorizzazioni.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-161">However, when you publish your site to a hosting provider's web server, you might need to explicitly set those permissions.</span></span> <span data-ttu-id="2a3b0-162">Se si esegue questo codice nel server del provider di hosting e si verificano errori, verificare con il provider di hosting per scoprire come impostare le autorizzazioni.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-162">If you run this code on a hosting provider's server and get errors, check with the hosting provider to find out how to set those permissions.</span></span>

- <span data-ttu-id="2a3b0-163">Eseguire la pagina in un browser.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-163">Run the page in a browser.</span></span> 

    ![](working-with-files/_static/image1.jpg)
- <span data-ttu-id="2a3b0-164">Immettere i valori nei campi e quindi fare clic su **Invia**.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-164">Enter values into the fields and then click **Submit**.</span></span>
- <span data-ttu-id="2a3b0-165">Chiudere il browser.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-165">Close the browser.</span></span>
- <span data-ttu-id="2a3b0-166">Tornare al progetto e aggiornare la visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-166">Return to the project and refresh the view.</span></span>
- <span data-ttu-id="2a3b0-167">Aprire il *txt* file.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-167">Open the *data.txt* file.</span></span> <span data-ttu-id="2a3b0-168">I dati che è stato inviato il modulo sono nel file.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-168">The data you submitted in the form is in the file.</span></span> 

    ![[immagine]](working-with-files/_static/image2.jpg)
- <span data-ttu-id="2a3b0-170">Chiudi il *txt* file.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-170">Close the *data.txt* file.</span></span>

<a id="Appending_Data"></a>
## <a name="appending-data-to-an-existing-file"></a><span data-ttu-id="2a3b0-171">Aggiunta di dati a un File esistente</span><span class="sxs-lookup"><span data-stu-id="2a3b0-171">Appending Data to an Existing File</span></span>

<span data-ttu-id="2a3b0-172">Nell'esempio precedente è stata usata `WriteAllText` per creare un file di testo che dispone di un solo pezzo di dati in essa contenuti.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-172">In the previous example, you used `WriteAllText` to create a text file that's got just one piece of data in it.</span></span> <span data-ttu-id="2a3b0-173">Se si chiama di nuovo il metodo e passarla lo stesso nome di file, il file esistente viene completamente sovrascritto.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-173">If you call the method again and pass it the same file name, the existing file is completely overwritten.</span></span> <span data-ttu-id="2a3b0-174">Tuttavia, dopo aver creato un file è spesso necessario aggiungere nuovi dati alla fine del file.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-174">However, after you've created a file you often want to add new data to the end of the file.</span></span> <span data-ttu-id="2a3b0-175">È possibile eseguire tale utilizzando il `AppendAllText` metodo il `File` oggetto.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-175">You can do that using the `AppendAllText` method of the `File` object.</span></span>

1. <span data-ttu-id="2a3b0-176">Nel sito Web, creare una copia del *UserData.cshtml* file e denominare la copia *UserDataMultiple.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-176">In the website, make a copy of the *UserData.cshtml* file and name the copy *UserDataMultiple.cshtml*.</span></span>
2. <span data-ttu-id="2a3b0-177">Sostituire il blocco di codice prima dell'apertura `<!DOCTYPE html>` tag con il blocco di codice seguente:</span><span class="sxs-lookup"><span data-stu-id="2a3b0-177">Replace the code block before the opening `<!DOCTYPE html>` tag with the following code block:</span></span> 

    [!code-cshtml[Main](working-with-files/samples/sample3.cshtml)]

    <span data-ttu-id="2a3b0-178">Questo codice contiene una modifica dell'esempio precedente.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-178">This code has one change in it from the previous example.</span></span> <span data-ttu-id="2a3b0-179">Anziché utilizzare `WriteAllText`, Usa `the AppendAllText` metodo.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-179">Instead of using `WriteAllText`, it uses `the AppendAllText` method.</span></span> <span data-ttu-id="2a3b0-180">I metodi sono simili, ad eccezione del fatto che `AppendAllText` aggiunge i dati alla fine del file.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-180">The methods are similar, except that `AppendAllText` adds the data to the end of the file.</span></span> <span data-ttu-id="2a3b0-181">Come con `WriteAllText`, `AppendAllText` crea il file se non esiste già.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-181">As with `WriteAllText`, `AppendAllText` creates the file if it doesn't already exist.</span></span>
3. <span data-ttu-id="2a3b0-182">Eseguire la pagina in un browser.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-182">Run the page in a browser.</span></span>
4. <span data-ttu-id="2a3b0-183">Immettere i valori per i campi e quindi fare clic su **Invia**.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-183">Enter values for the fields and then click **Submit**.</span></span>
5. <span data-ttu-id="2a3b0-184">Aggiungere più dati e inviare nuovamente il form.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-184">Add more data and submit the form again.</span></span>
6. <span data-ttu-id="2a3b0-185">Tornare al progetto, fare clic sulla cartella del progetto e quindi fare clic su **aggiornamento**.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-185">Return to your project, right-click the project folder, and then click **Refresh**.</span></span>
7. <span data-ttu-id="2a3b0-186">Aprire il *txt* file.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-186">Open the *data.txt* file.</span></span> <span data-ttu-id="2a3b0-187">Include ora i nuovi dati appena immesso.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-187">It now contains the new data that you just entered.</span></span> 

    ![[immagine]](working-with-files/_static/image3.jpg)

<a id="Reading_and_Displaying_Data"></a>
## <a name="reading-and-displaying-data-from-a-file"></a><span data-ttu-id="2a3b0-189">Lettura e la visualizzazione dei dati da un File</span><span class="sxs-lookup"><span data-stu-id="2a3b0-189">Reading and Displaying Data from a File</span></span>

<span data-ttu-id="2a3b0-190">Anche se non è necessario scrivere dati in un file di testo, probabilmente a volte è necessario leggere i dati da uno.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-190">Even if you don't need to write data to a text file, you'll probably sometimes need to read data from one.</span></span> <span data-ttu-id="2a3b0-191">A tale scopo, è possibile utilizzare nuovamente il `File` oggetto.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-191">To do this, you can again use the `File` object.</span></span> <span data-ttu-id="2a3b0-192">È possibile utilizzare il `File` oggetto per la lettura di ogni riga singolarmente (separate da interruzioni di riga) o la lettura di un elemento singolo indipendentemente dalla modalità di questi separato.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-192">You can use the `File` object to read each line individually (separated by line breaks) or to read individual item no matter how they're separated.</span></span>

<span data-ttu-id="2a3b0-193">Questa procedura viene illustrato come leggere e visualizzare i dati che è stato creato nell'esempio precedente.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-193">This procedure shows you how to read and display the data that you created in the previous example.</span></span>

1. <span data-ttu-id="2a3b0-194">Alla radice del sito Web, creare un nuovo file denominato *DisplayData.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-194">At the root of your website, create a new file named *DisplayData.cshtml*.</span></span>
2. <span data-ttu-id="2a3b0-195">Sostituire il contenuto esistente con il seguente:</span><span class="sxs-lookup"><span data-stu-id="2a3b0-195">Replace the existing content with the following:</span></span> 

    [!code-cshtml[Main](working-with-files/samples/sample4.cshtml)]

    <span data-ttu-id="2a3b0-196">Il codice avvia leggendo il file creato nell'esempio precedente in una variabile denominata `userData`, tramite questa chiamata al metodo:</span><span class="sxs-lookup"><span data-stu-id="2a3b0-196">The code starts by reading the file that you created in the previous example into a variable named `userData`, using this method call:</span></span>

    [!code-css[Main](working-with-files/samples/sample5.css)]

    <span data-ttu-id="2a3b0-197">Il codice per eseguire questa operazione è all'interno di un `if` istruzione.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-197">The code to do this is inside an `if` statement.</span></span> <span data-ttu-id="2a3b0-198">Quando si desidera leggere un file, è consigliabile utilizzare il `File.Exists` metodo per determinare innanzitutto se il file è disponibile.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-198">When you want to read a file, it's a good idea to use the `File.Exists` method to determine first whether the file is available.</span></span> <span data-ttu-id="2a3b0-199">Il codice verifica inoltre se il file è vuoto.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-199">The code also checks whether the file is empty.</span></span>

    <span data-ttu-id="2a3b0-200">Il corpo della pagina contiene due `foreach` cicli, uno annidato all'interno di altro.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-200">The body of the page contains two `foreach` loops, one nested inside the other.</span></span> <span data-ttu-id="2a3b0-201">Esterna `foreach` ciclo Ottiene una riga alla volta dal file di dati.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-201">The outer `foreach` loop gets one line at a time from the data file.</span></span> <span data-ttu-id="2a3b0-202">In questo caso, le righe vengono definite da interruzioni di riga nel file &#8212; , ogni elemento di dati è su una riga.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-202">In this case, the lines are defined by line breaks in the file &#8212; that is, each data item is on its own line.</span></span> <span data-ttu-id="2a3b0-203">Il ciclo esterno crea un nuovo elemento (`<li>` elemento) all'interno di un elenco ordinato (`<ol>` elemento).</span><span class="sxs-lookup"><span data-stu-id="2a3b0-203">The outer loop creates a new item (`<li>` element) inside an ordered list (`<ol>` element).</span></span>

    <span data-ttu-id="2a3b0-204">Il ciclo interno divide ogni riga di dati in elementi (campi) con una virgola come delimitatore.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-204">The inner loop splits each data line into items (fields) using a comma as a delimiter.</span></span> <span data-ttu-id="2a3b0-205">(In base l'esempio precedente, ciò significa che ogni riga contiene tre campi &#8212; il nome, cognome e indirizzo di posta elettronica, separati da una virgola.) Il ciclo interno crea anche un `<ul>` elementi di elenco e visualizza un elenco per ogni campo nella riga di dati.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-205">(Based on the previous example, this means that each line contains three fields &#8212; the first name, last name, and email address, each separated by a comma.) The inner loop also creates a `<ul>` list and displays one list item for each field in the data line.</span></span>

    <span data-ttu-id="2a3b0-206">Il codice viene illustrato come utilizzare due tipi di dati, una matrice e `char` tipo di dati.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-206">The code illustrates how to use two data types, an array and the `char` data type.</span></span> <span data-ttu-id="2a3b0-207">La matrice è necessaria perché il `File.ReadAllLines` metodo restituisce i dati sotto forma di matrice.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-207">The array is required because the `File.ReadAllLines` method returns data as an array.</span></span> <span data-ttu-id="2a3b0-208">Il `char` tipo di dati è necessario perché il `Split` metodo restituisce un `array` in cui ogni elemento è del tipo `char`.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-208">The `char` data type is required because the `Split` method returns an `array` in which each element is of the type `char`.</span></span> <span data-ttu-id="2a3b0-209">(Per informazioni sulle matrici, vedere [Introduzione alla programmazione Web ASP.NET utilizzando la sintassi Razor](https://go.microsoft.com/fwlink/?LinkId=202890#ID_CollectionsAndObjects).)</span><span class="sxs-lookup"><span data-stu-id="2a3b0-209">(For information about arrays, see [Introduction to ASP.NET Web Programming Using the Razor Syntax](https://go.microsoft.com/fwlink/?LinkId=202890#ID_CollectionsAndObjects).)</span></span>
3. <span data-ttu-id="2a3b0-210">Eseguire la pagina in un browser.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-210">Run the page in a browser.</span></span> <span data-ttu-id="2a3b0-211">I dati che immessi per gli esempi precedenti viene visualizzati.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-211">The data you entered for the previous examples is displayed.</span></span> 

    ![[immagine]](working-with-files/_static/image4.jpg)

> [!TIP] 
> 
> <span data-ttu-id="2a3b0-213">**Visualizzazione dei dati da un File delimitato da virgole di Microsoft Excel**</span><span class="sxs-lookup"><span data-stu-id="2a3b0-213">**Displaying Data from a Microsoft Excel Comma-Delimited File**</span></span>
> 
> <span data-ttu-id="2a3b0-214">È possibile utilizzare Microsoft Excel per salvare i dati contenuti in un foglio di calcolo come file delimitato da virgole (*CSV* file).</span><span class="sxs-lookup"><span data-stu-id="2a3b0-214">You can use Microsoft Excel to save the data contained in a spreadsheet as a comma-delimited file (*.csv* file).</span></span> <span data-ttu-id="2a3b0-215">Quando si esegue l'operazione, il file viene salvato in formato testo normale, non è in formato Excel.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-215">When you do, the file is saved in plain text, not in Excel format.</span></span> <span data-ttu-id="2a3b0-216">Ogni riga del foglio di calcolo è separato da un'interruzione di riga nel file di testo e ogni elemento di dati è separato da una virgola.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-216">Each row in the spreadsheet is separated by a line break in the text file, and each data item is separated by a comma.</span></span> <span data-ttu-id="2a3b0-217">Per leggere un file delimitato da virgole di Excel solo modificando il nome del file di dati nel codice, è possibile utilizzare il codice illustrato nell'esempio precedente.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-217">You can use the code shown in the previous example to read an Excel comma-delimited file just by changing the name of the data file in your code.</span></span>


<a id="Deleting_Files"></a>
## <a name="deleting-files"></a><span data-ttu-id="2a3b0-218">L'eliminazione di file</span><span class="sxs-lookup"><span data-stu-id="2a3b0-218">Deleting Files</span></span>

<span data-ttu-id="2a3b0-219">Per eliminare file dal sito Web, è possibile utilizzare il `File.Delete` metodo.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-219">To delete files from your website, you can use the `File.Delete` method.</span></span> <span data-ttu-id="2a3b0-220">Questa procedura viene illustrato come consentire agli utenti di eliminare un'immagine (*jpg* file) da un *immagini* cartella se si conosce il nome del file.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-220">This procedure shows how to let users delete an image (*.jpg* file) from an *images* folder if they know the name of the file.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="2a3b0-221">**Importante** In un sito Web di produzione, è in genere limitare chi è consentito per apportare modifiche ai dati.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-221">**Important** In a production website, you typically restrict who's allowed to make changes to the data.</span></span> <span data-ttu-id="2a3b0-222">Per informazioni su come configurare l'appartenenza e sui modi per consentire agli utenti di eseguire attività nel sito, vedere [sicurezza aggiunta e l'appartenenza a un sito di pagine Web ASP.NET](https://go.microsoft.com/fwlink/?LinkId=202904).</span><span class="sxs-lookup"><span data-stu-id="2a3b0-222">For information about how to set up membership and about ways to authorize users to perform tasks on the site, see [Adding Security and Membership to an ASP.NET Web Pages Site](https://go.microsoft.com/fwlink/?LinkId=202904).</span></span>


1. <span data-ttu-id="2a3b0-223">Nel sito Web, creare una sottocartella denominata *immagini*.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-223">In the website, create a subfolder named *images*.</span></span>
2. <span data-ttu-id="2a3b0-224">Copiare una o più *jpg* di file nel *immagini* cartella.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-224">Copy one or more *.jpg* files into the *images* folder.</span></span>
3. <span data-ttu-id="2a3b0-225">Nella radice del sito Web, creare un nuovo file denominato *FileDelete.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-225">In the root of the website, create a new file named *FileDelete.cshtml*.</span></span>
4. <span data-ttu-id="2a3b0-226">Sostituire il contenuto esistente con il seguente:</span><span class="sxs-lookup"><span data-stu-id="2a3b0-226">Replace the existing content with the following:</span></span> 

    [!code-cshtml[Main](working-with-files/samples/sample6.cshtml)]

    <span data-ttu-id="2a3b0-227">Questa pagina contiene un modulo in cui gli utenti possono immettere il nome di un file di immagine.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-227">This page contains a form where users can enter the name of an image file.</span></span> <span data-ttu-id="2a3b0-228">Non si immette il *jpg* estensione di file; limitando il nome del file simile al seguente, si guida impedisce agli utenti di eliminazione file arbitrari nel sito.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-228">They don't enter the *.jpg* file-name extension; by restricting the file name like this, you help prevents users from deleting arbitrary files on your site.</span></span>

    <span data-ttu-id="2a3b0-229">Il codice legge il nome del file che l'utente ha immesso e genera quindi un percorso completo.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-229">The code reads the file name that the user has entered and then constructs a complete path.</span></span> <span data-ttu-id="2a3b0-230">Per creare il percorso, il codice Usa il percorso del sito Web corrente (come restituito dal `Server.MapPath` metodo), il *immagini* ". jpg" come valore letterale stringa, il nome fornito dall'utente e nome della cartella.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-230">To create the path, the code uses the current website path (as returned by the `Server.MapPath` method), the *images* folder name, the name that the user has provided, and ".jpg" as a literal string.</span></span>

    <span data-ttu-id="2a3b0-231">Per eliminare il file, il codice chiama il `File.Delete` metodo, passando il percorso completo appena costruita.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-231">To delete the file, the code calls the `File.Delete` method, passing it the full path that you just constructed.</span></span> <span data-ttu-id="2a3b0-232">Alla fine del markup, codice visualizza un messaggio di conferma che il file è stato eliminato.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-232">At the end of the markup, code displays a confirmation message that the file was deleted.</span></span>
5. <span data-ttu-id="2a3b0-233">Eseguire la pagina in un browser.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-233">Run the page in a browser.</span></span> 

    ![[immagine]](working-with-files/_static/image5.jpg)
6. <span data-ttu-id="2a3b0-235">Immettere il nome del file da eliminare e quindi fare clic su **Invia**.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-235">Enter the name of the file to delete and then click **Submit**.</span></span> <span data-ttu-id="2a3b0-236">Se il file è stato eliminato, il nome del file viene visualizzato nella parte inferiore della pagina.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-236">If the file was deleted, the name of the file is displayed at the bottom of the page.</span></span>

<a id="Letting_Users_Upload_a_File"></a>
## <a name="letting-users-upload-a-file"></a><span data-ttu-id="2a3b0-237">Caricamento di utenti consentendo agli sviluppatori di un File</span><span class="sxs-lookup"><span data-stu-id="2a3b0-237">Letting Users Upload a File</span></span>

<span data-ttu-id="2a3b0-238">Il `FileUpload` supporto consente agli utenti di caricare i file nel sito Web.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-238">The `FileUpload` helper lets users upload files to your website.</span></span> <span data-ttu-id="2a3b0-239">La procedura seguente viene illustrato come consentire agli utenti di caricare un singolo file.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-239">The procedure below shows you how to let users upload a single file.</span></span>

1. <span data-ttu-id="2a3b0-240">Aggiungere il sito Web ASP.NET Web Helpers Library come descritto in [helper per l'installazione in un sito di pagine Web ASP.NET](https://go.microsoft.com/fwlink/?LinkId=252372), se non sono state aggiunte in precedenza.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-240">Add the ASP.NET Web Helpers Library to your website as described in [Installing Helpers in an ASP.NET Web Pages Site](https://go.microsoft.com/fwlink/?LinkId=252372), if you didn't add it previously.</span></span>
2. <span data-ttu-id="2a3b0-241">Nel *App\_dati* cartella, creare un nuovo una cartella e denominarla *UploadedFiles*.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-241">In the *App\_Data* folder, create a new a folder and name it *UploadedFiles*.</span></span>
3. <span data-ttu-id="2a3b0-242">Nella radice, creare un nuovo file denominato *FileUpload.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-242">In the root, create a new file named *FileUpload.cshtml*.</span></span>
4. <span data-ttu-id="2a3b0-243">Sostituire il contenuto esistente nella pagina con le operazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="2a3b0-243">Replace the existing content in the page with the following:</span></span> 

    [!code-cshtml[Main](working-with-files/samples/sample7.cshtml)]

    <span data-ttu-id="2a3b0-244">Usa la parte del corpo della pagina di `FileUpload` helper per creare la casella di caricamento e pulsanti che si sono probabilmente familiare con:</span><span class="sxs-lookup"><span data-stu-id="2a3b0-244">The body portion of the page uses the `FileUpload` helper to create the upload box and buttons that you're probably familiar with:</span></span>

    ![[immagine]](working-with-files/_static/image6.jpg)

    <span data-ttu-id="2a3b0-246">Le proprietà impostate per il `FileUpload` helper specificare che una singola casella per il file da caricare e che il pulsante submit per leggere **caricare**.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-246">The properties that you set for the `FileUpload` helper specify that you want a single box for the file to upload and that you want the submit button to read **Upload**.</span></span> <span data-ttu-id="2a3b0-247">(Si aggiungeranno caselle più avanti in questo articolo.)</span><span class="sxs-lookup"><span data-stu-id="2a3b0-247">(You'll add more boxes later in the article.)</span></span>

    <span data-ttu-id="2a3b0-248">Quando l'utente fa clic **caricare**, ottiene il file e lo salva il codice nella parte superiore della pagina.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-248">When the user clicks **Upload**, the code at the top of the page gets the file and saves it.</span></span> <span data-ttu-id="2a3b0-249">Il `Request` oggetto normalmente utilizzato per ottenere i valori dai campi modulo dispone anche di un `Files` matrice che contiene i file di () che sono stati caricati.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-249">The `Request` object that you normally use to get values from form fields also has a `Files` array that contains the file (or files) that have been uploaded.</span></span> <span data-ttu-id="2a3b0-250">È possibile ottenere singoli file tra posizioni specifiche nella matrice &#8212; , ad esempio, per ottenere il primo file caricato, si ottiene `Request.Files[0]`, per ottenere il secondo file, viene visualizzato `Request.Files[1]`e così via.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-250">You can get individual files out of specific positions in the array &#8212; for example, to get the first uploaded file, you get `Request.Files[0]`, to get the second file, you get `Request.Files[1]`, and so on.</span></span> <span data-ttu-id="2a3b0-251">(Tenere presente che nella programmazione, il conteggio in genere inizia in corrispondenza di zero).</span><span class="sxs-lookup"><span data-stu-id="2a3b0-251">(Remember that in programming, counting usually starts at zero.)</span></span>

    <span data-ttu-id="2a3b0-252">Quando si recupera un file caricato, viene inserita in una variabile (in questo caso, `uploadedFile`) in modo da poterli modificare.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-252">When you fetch an uploaded file, you put it in a variable (here, `uploadedFile`) so that you can manipulate it.</span></span> <span data-ttu-id="2a3b0-253">Per determinare il nome del file caricato, viene visualizzato solo il relativo `FileName` proprietà.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-253">To determine the name of the uploaded file, you just get its `FileName` property.</span></span> <span data-ttu-id="2a3b0-254">Tuttavia, quando l'utente carica un file, `FileName` contiene il nome dell'utente originale, che include l'intero percorso.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-254">However, when the user uploads a file, `FileName` contains the user's original name, which includes the entire path.</span></span> <span data-ttu-id="2a3b0-255">Potrebbe essere simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="2a3b0-255">It might look like this:</span></span>

    <span data-ttu-id="2a3b0-256">*C:\Users\Public\Sample.txt*</span><span class="sxs-lookup"><span data-stu-id="2a3b0-256">*C:\Users\Public\Sample.txt*</span></span>

    <span data-ttu-id="2a3b0-257">Non si desidera tutte queste informazioni di percorso, tuttavia, poiché è il percorso nel computer dell'utente, non per il server.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-257">You don't want all that path information, though, because that's the path on the user's computer, not for your server.</span></span> <span data-ttu-id="2a3b0-258">Si desidera semplicemente il nome del file effettivo (*Sample.txt*).</span><span class="sxs-lookup"><span data-stu-id="2a3b0-258">You just want the actual file name (*Sample.txt*).</span></span> <span data-ttu-id="2a3b0-259">È possibile rimuovere solo il file da un percorso utilizzando il `Path.GetFileName` metodo, simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="2a3b0-259">You can strip out just the file from a path by using the `Path.GetFileName` method, like this:</span></span>

    [!code-csharp[Main](working-with-files/samples/sample8.cs)]

    <span data-ttu-id="2a3b0-260">Il `Path` oggetto è un'utilità che ha un numero di metodi, ad esempio ciò che è possibile utilizzare per rimuovere i percorsi, combinare i tracciati e così via.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-260">The `Path` object is a utility that has a number of methods like this that you can use to strip paths, combine paths, and so on.</span></span>

    <span data-ttu-id="2a3b0-261">Una volta il nome del file caricato, è possibile creare un nuovo percorso in cui si desidera archiviare il file caricato nel sito Web.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-261">Once you've gotten the name of the uploaded file, you can build a new path for where you want to store the uploaded file in your website.</span></span> <span data-ttu-id="2a3b0-262">In questo caso, si combinano `Server.MapPath`, i nomi delle cartelle (*App\_dati/UploadedFiles*) e il nome del file appena rimossi per creare un nuovo percorso.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-262">In this case, you combine `Server.MapPath`, the folder names (*App\_Data/UploadedFiles*), and the newly stripped file name to create a new path.</span></span> <span data-ttu-id="2a3b0-263">È quindi possibile chiamare il file caricato `SaveAs` metodo effettivamente salvare il file.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-263">You can then call the uploaded file's `SaveAs` method to actually save the file.</span></span>
5. <span data-ttu-id="2a3b0-264">Eseguire la pagina in un browser.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-264">Run the page in a browser.</span></span> 

    ![[immagine]](working-with-files/_static/image7.jpg)
6. <span data-ttu-id="2a3b0-266">Fare clic su **Sfoglia** e quindi selezionare un file da caricare.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-266">Click **Browse** and then select a file to upload.</span></span> 

    ![[immagine]](working-with-files/_static/image8.jpg)

    <span data-ttu-id="2a3b0-268">Casella di testo accanto al **Sfoglia** pulsante conterrà il percorso e il percorso file.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-268">The text box next to the **Browse** button will contain the path and file location.</span></span>

    ![[immagine]](working-with-files/_static/image9.jpg)
7. <span data-ttu-id="2a3b0-270">Fare clic su **Upload**.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-270">Click **Upload**.</span></span>
8. <span data-ttu-id="2a3b0-271">Nel sito Web, fare clic sulla cartella del progetto e quindi fare clic su **aggiornamento**.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-271">In the website, right-click the project folder and then click **Refresh**.</span></span>
9. <span data-ttu-id="2a3b0-272">Aprire il *UploadedFiles* cartella.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-272">Open the *UploadedFiles* folder.</span></span> <span data-ttu-id="2a3b0-273">Il file caricato è nella cartella.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-273">The file that you uploaded is in the folder.</span></span> 

    ![[immagine]](working-with-files/_static/image10.jpg)

<a id="Letting_Users_Upload_Multiple_Files"></a>
## <a name="letting-users-upload-multiple-files"></a><span data-ttu-id="2a3b0-275">Consentendo agli utenti di caricare più file</span><span class="sxs-lookup"><span data-stu-id="2a3b0-275">Letting Users Upload Multiple Files</span></span>

<span data-ttu-id="2a3b0-276">Nell'esempio precedente, consentire agli utenti di caricare un file.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-276">In the previous example, you let users upload one file.</span></span> <span data-ttu-id="2a3b0-277">Ma è possibile utilizzare il `FileUpload` helper per caricare più di un file alla volta.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-277">But you can use the `FileUpload` helper to upload more than one file at a time.</span></span> <span data-ttu-id="2a3b0-278">Ciò è utile per scenari come caricare foto, in cui è difficile caricare un file alla volta.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-278">This is handy for scenarios like uploading photos, where uploading one file at a time is tedious.</span></span> <span data-ttu-id="2a3b0-279">(Per ulteriori informazioni sul caricamento delle foto in [utilizzo delle immagini in un sito di pagine Web ASP.NET](https://go.microsoft.com/fwlink/?LinkId=202897).) In questo esempio viene illustrato come consentire agli utenti di caricare due alla volta, sebbene sia possibile utilizzare la stessa tecnica per caricare qualcosa di più.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-279">(You can read about uploading photos in [Working with Images in an ASP.NET Web Pages Site](https://go.microsoft.com/fwlink/?LinkId=202897).) This example shows how to let users upload two at a time, although you can use the same technique to upload more than that.</span></span>

1. <span data-ttu-id="2a3b0-280">Aggiungere il sito Web ASP.NET Web Helpers Library come descritto in [helper per l'installazione in un sito di pagine Web ASP.NET](https://go.microsoft.com/fwlink/?LinkId=252372), se hai già fatto.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-280">Add the ASP.NET Web Helpers Library to your website as described in [Installing Helpers in an ASP.NET Web Pages Site](https://go.microsoft.com/fwlink/?LinkId=252372), if you haven't already.</span></span>
2. <span data-ttu-id="2a3b0-281">Creare una nuova pagina denominata *FileUploadMultiple.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-281">Create a new page named *FileUploadMultiple.cshtml*.</span></span>
3. <span data-ttu-id="2a3b0-282">Sostituire il contenuto esistente nella pagina con le operazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="2a3b0-282">Replace the existing content in the page with the following:</span></span>  

    [!code-cshtml[Main](working-with-files/samples/sample9.cshtml)]

    <span data-ttu-id="2a3b0-283">In questo esempio, il `FileUpload` helper nel corpo della pagina è configurato per consentire agli utenti di caricare due file per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-283">In this example, the `FileUpload` helper in the body of the page is configured to let users upload two files by default.</span></span> <span data-ttu-id="2a3b0-284">Poiché `allowMoreFilesToBeAdded` è impostato su `true`, l'helper esegue il rendering di un collegamento che consente di aggiungere altre caselle di caricamento utente:</span><span class="sxs-lookup"><span data-stu-id="2a3b0-284">Because `allowMoreFilesToBeAdded` is set to `true`, the helper renders a link that lets user add more upload boxes:</span></span>

    ![[immagine]](working-with-files/_static/image11.jpg)

    <span data-ttu-id="2a3b0-286">Per elaborare i file che l'utente carica, il codice Usa la stessa tecnica di base utilizzato nell'esempio precedente &#8212; ottenere un file da `Request.Files` e quindi salvare il file.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-286">To process the files that the user uploads, the code uses the same basic technique that you used in the previous example &#8212; get a file from `Request.Files` and then save it.</span></span> <span data-ttu-id="2a3b0-287">(Compresi i vari elementi necessario ottenere il nome file corretti e il percorso.) Questa volta l'innovazione è che l'utente sta per caricare più file e non si conosce molti.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-287">(Including the various things you need to do to get the right file name and path.) The innovation this time is that the user might be uploading multiple files and you don't know many.</span></span> <span data-ttu-id="2a3b0-288">Per individuare, è possibile ottenere `Request.Files.Count`.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-288">To find out, you can get `Request.Files.Count`.</span></span>

    <span data-ttu-id="2a3b0-289">Con questo numero di disponibilità, è possibile scorrere in ciclo `Request.Files`, recuperare, a sua volta di ogni file e salvarlo.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-289">With this number in hand, you can loop through `Request.Files`, fetch each file in turn, and save it.</span></span> <span data-ttu-id="2a3b0-290">Quando si desidera eseguire un ciclo noto il numero di volte tramite una raccolta, è possibile utilizzare un `for` ciclo, simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="2a3b0-290">When you want to loop a known number of times through a collection, you can use a `for` loop, like this:</span></span>

    [!code-csharp[Main](working-with-files/samples/sample10.cs)]

    <span data-ttu-id="2a3b0-291">La variabile `i` è semplicemente un contatore temporaneo che verrà inviata da zero a qualsiasi limite superiore è impostato.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-291">The variable `i` is just a temporary counter that will go from zero to whatever upper limit you set.</span></span> <span data-ttu-id="2a3b0-292">In questo caso, il limite massimo è il numero di file.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-292">In this case, the upper limit is the number of files.</span></span> <span data-ttu-id="2a3b0-293">Tuttavia, poiché il contatore inizia da zero, come avviene per il conteggio di scenari in ASP.NET, il limite superiore è uno, minore il numero di file.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-293">But because the counter starts at zero, as is typical for counting scenarios in ASP.NET, the upper limit is actually one less than the file count.</span></span> <span data-ttu-id="2a3b0-294">(Se vengono caricati i tre file, Microsoft il conteggio è zero per 2.)</span><span class="sxs-lookup"><span data-stu-id="2a3b0-294">(If three files are uploaded, the count is zero to 2.)</span></span>

    <span data-ttu-id="2a3b0-295">Il `uploadedCount` variabile totali di tutti i file che vengono caricati e salvati.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-295">The `uploadedCount` variable totals all the files that are successfully uploaded and saved.</span></span> <span data-ttu-id="2a3b0-296">Questo codice account la possibilità che potrebbe non essere in grado di caricare un file prevista.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-296">This code accounts for the possibility that an expected file may not be able to be uploaded.</span></span>
4. <span data-ttu-id="2a3b0-297">Eseguire la pagina in un browser.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-297">Run the page in a browser.</span></span> <span data-ttu-id="2a3b0-298">Il browser visualizza la pagina e le finestre di caricamento di due.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-298">The browser displays the page and its two upload boxes.</span></span>
5. <span data-ttu-id="2a3b0-299">Selezionare due file da caricare.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-299">Select two files to upload.</span></span>
6. <span data-ttu-id="2a3b0-300">Fare clic su **aggiungere un altro file**.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-300">Click **Add another file**.</span></span> <span data-ttu-id="2a3b0-301">La pagina Visualizza una nuova finestra di caricamento.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-301">The page displays a new upload box.</span></span> 

    ![[immagine]](working-with-files/_static/image12.jpg)
7. <span data-ttu-id="2a3b0-303">Fare clic su **Upload**.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-303">Click **Upload**.</span></span>
8. <span data-ttu-id="2a3b0-304">Nel sito Web, fare clic sulla cartella del progetto e quindi fare clic su **aggiornamento**.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-304">In the website, right-click the project folder and then click **Refresh**.</span></span>
9. <span data-ttu-id="2a3b0-305">Aprire il *UploadedFiles* cartella per visualizzare i file caricati correttamente.</span><span class="sxs-lookup"><span data-stu-id="2a3b0-305">Open the *UploadedFiles* folder to see the successfully uploaded files.</span></span>

<a id="Additional_Resources"></a>
## <a name="additional-resources"></a><span data-ttu-id="2a3b0-306">Risorse aggiuntive</span><span class="sxs-lookup"><span data-stu-id="2a3b0-306">Additional Resources</span></span>


[<span data-ttu-id="2a3b0-307">Utilizzo di immagini in un sito di pagine Web ASP.NET</span><span class="sxs-lookup"><span data-stu-id="2a3b0-307">Working with Images in an ASP.NET Web Pages Site</span></span>](https://go.microsoft.com/fwlink/?LinkId=202897)

[<span data-ttu-id="2a3b0-308">Esportazione in un File CSV</span><span class="sxs-lookup"><span data-stu-id="2a3b0-308">Exporting to a CSV File</span></span>](https://msdn.microsoft.com/library/ms155919.aspx)
