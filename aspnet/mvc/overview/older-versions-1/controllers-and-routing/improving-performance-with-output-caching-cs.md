---
uid: mvc/overview/older-versions-1/controllers-and-routing/improving-performance-with-output-caching-cs
title: Miglioramento delle prestazioni con Output memorizzazione nella cache (c#) | Documenti Microsoft
author: microsoft
description: In questa esercitazione viene illustrato come è possibile migliorare notevolmente le prestazioni delle applicazioni web ASP.NET MVC, sfruttando la cache di output. Si...
ms.author: aspnetcontent
manager: wpickett
ms.date: 01/27/2009
ms.topic: article
ms.assetid: 521c9117-81cd-4d8d-9d96-0256dc7bf50f
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/older-versions-1/controllers-and-routing/improving-performance-with-output-caching-cs
msc.type: authoredcontent
ms.openlocfilehash: 8958caa5a0ccad669ca861bed261102625be5cb6
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 04/06/2018
ms.locfileid: "30873797"
---
<a name="improving-performance-with-output-caching-c"></a><span data-ttu-id="97aea-104">Miglioramento delle prestazioni con Output la memorizzazione nella cache (c#)</span><span class="sxs-lookup"><span data-stu-id="97aea-104">Improving Performance with Output Caching (C#)</span></span>
====================
<span data-ttu-id="97aea-105">by [Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="97aea-105">by [Microsoft](https://github.com/microsoft)</span></span>

> <span data-ttu-id="97aea-106">In questa esercitazione viene illustrato come è possibile migliorare notevolmente le prestazioni delle applicazioni web ASP.NET MVC, sfruttando la cache di output.</span><span class="sxs-lookup"><span data-stu-id="97aea-106">In this tutorial, you learn how you can dramatically improve the performance of your ASP.NET MVC web applications by taking advantage of output caching.</span></span> <span data-ttu-id="97aea-107">Informazioni su come memorizzare nella cache il risultato restituito da un'azione del controller in modo che lo stesso contenuto non devono essere creati ogni volta che un nuovo utente richiama l'azione.</span><span class="sxs-lookup"><span data-stu-id="97aea-107">You learn how to cache the result returned from a controller action so that the same content does not need to be created each and every time a new user invokes the action.</span></span>


<span data-ttu-id="97aea-108">L'obiettivo di questa esercitazione è illustrare come è possibile migliorare notevolmente le prestazioni di un'applicazione ASP.NET MVC, sfruttando la cache di output.</span><span class="sxs-lookup"><span data-stu-id="97aea-108">The goal of this tutorial is to explain how you can dramatically improve the performance of an ASP.NET MVC application by taking advantage of the output cache.</span></span> <span data-ttu-id="97aea-109">La cache di output consente di memorizzare nella cache il contenuto restituito da un'azione del controller.</span><span class="sxs-lookup"><span data-stu-id="97aea-109">The output cache enables you to cache the content returned by a controller action.</span></span> <span data-ttu-id="97aea-110">In questo modo, lo stesso contenuto non è necessario essere generato ogni volta che viene richiamata l'azione del controller stesso.</span><span class="sxs-lookup"><span data-stu-id="97aea-110">That way, the same content does not need to be generated each and every time the same controller action is invoked.</span></span>

<span data-ttu-id="97aea-111">Si supponga, ad esempio, che l'applicazione ASP.NET MVC consente di visualizzare un elenco di record del database in una vista denominata Index.</span><span class="sxs-lookup"><span data-stu-id="97aea-111">Imagine, for example, that your ASP.NET MVC application displays a list of database records in a view named Index.</span></span> <span data-ttu-id="97aea-112">In genere, ogni volta che un utente richiama l'azione del controller che restituisce la visualizzazione dell'indice, il set di record del database deve recuperare dal database eseguendo una query sul database.</span><span class="sxs-lookup"><span data-stu-id="97aea-112">Normally, each and every time that a user invokes the controller action that returns the Index view, the set of database records must be retrieved from the database by executing a database query.</span></span>

<span data-ttu-id="97aea-113">Se, d'altra parte, sfruttare i vantaggi della cache di output è possibile evitare l'esecuzione di una query di database ogni volta che un utente richiama la stessa azione del controller.</span><span class="sxs-lookup"><span data-stu-id="97aea-113">If, on the other hand, you take advantage of the output cache then you can avoid executing a database query every time any user invokes the same controller action.</span></span> <span data-ttu-id="97aea-114">La vista può essere recuperata dalla cache anziché il modello viene rigenerato dall'azione del controller.</span><span class="sxs-lookup"><span data-stu-id="97aea-114">The view can be retrieved from the cache instead of being regenerated from the controller action.</span></span> <span data-ttu-id="97aea-115">La memorizzazione nella cache consente di evitare l'esecuzione di ridondanza di operare sul server.</span><span class="sxs-lookup"><span data-stu-id="97aea-115">Caching enables you to avoid performing redundant work on the server.</span></span>

## <a name="enabling-output-caching"></a><span data-ttu-id="97aea-116">Abilitare la memorizzazione nella cache di Output</span><span class="sxs-lookup"><span data-stu-id="97aea-116">Enabling Output Caching</span></span>

<span data-ttu-id="97aea-117">Abilitare la memorizzazione nella cache di output aggiungendo un attributo [OutputCache] per un'azione del controller singoli o una classe controller intero.</span><span class="sxs-lookup"><span data-stu-id="97aea-117">You enable output caching by adding an [OutputCache] attribute to either an individual controller action or an entire controller class.</span></span> <span data-ttu-id="97aea-118">Ad esempio, il controller nel listato 1 espone un'azione denominata index ().</span><span class="sxs-lookup"><span data-stu-id="97aea-118">For example, the controller in Listing 1 exposes an action named Index().</span></span> <span data-ttu-id="97aea-119">L'output dell'azione Index () viene memorizzato nella cache per 10 secondi.</span><span class="sxs-lookup"><span data-stu-id="97aea-119">The output of the Index() action is cached for 10 seconds.</span></span>

<span data-ttu-id="97aea-120">**Elenco 1 – controllers\homecontroller.cs.**</span><span class="sxs-lookup"><span data-stu-id="97aea-120">**Listing 1 – Controllers\HomeController.cs**</span></span>

[!code-csharp[Main](improving-performance-with-output-caching-cs/samples/sample1.cs)]

<span data-ttu-id="97aea-121">Nelle versioni Beta di ASP.NET MVC, la memorizzazione nella cache di output non funziona per un URL, ad esempio [ http://www.MySite.com/ ](http://www.mysite.com/).</span><span class="sxs-lookup"><span data-stu-id="97aea-121">In the Beta versions of ASP.NET MVC, output caching does not work for a URL like [http://www.MySite.com/](http://www.mysite.com/).</span></span> <span data-ttu-id="97aea-122">Al contrario, è necessario immettere un URL, ad esempio [ http://www.MySite.com/Home/Index ](http://www.mysite.com/Home/Index).</span><span class="sxs-lookup"><span data-stu-id="97aea-122">Instead, you must enter a URL like [http://www.MySite.com/Home/Index](http://www.mysite.com/Home/Index).</span></span> 

<span data-ttu-id="97aea-123">Nel listato 1, l'output dell'azione Index () viene memorizzato nella cache per 10 secondi.</span><span class="sxs-lookup"><span data-stu-id="97aea-123">In Listing 1, the output of the Index() action is cached for 10 seconds.</span></span> <span data-ttu-id="97aea-124">Se si preferisce, è possibile specificare una durata maggiore di cache.</span><span class="sxs-lookup"><span data-stu-id="97aea-124">If you prefer, you can specify a much longer cache duration.</span></span> <span data-ttu-id="97aea-125">Ad esempio, se si desidera memorizzare nella cache l'output di un'azione del controller per un giorno è possibile specificare una durata della cache di 86400 secondi (60 secondi \* 60 minuti \* 24 ore).</span><span class="sxs-lookup"><span data-stu-id="97aea-125">For example, if you want to cache the output of a controller action for one day then you can specify a cache duration of 86400 seconds (60 seconds \* 60 minutes \* 24 hours).</span></span>

<span data-ttu-id="97aea-126">Vi è alcuna garanzia che il contenuto non nella cache per la quantità di tempo specificato.</span><span class="sxs-lookup"><span data-stu-id="97aea-126">There is no guarantee that content will be cached for the amount of time that you specify.</span></span> <span data-ttu-id="97aea-127">Quando le risorse di memoria diventino insufficiente, la cache viene avviata automaticamente la rimozione del contenuto.</span><span class="sxs-lookup"><span data-stu-id="97aea-127">When memory resources become low, the cache starts evicting content automatically.</span></span>

<span data-ttu-id="97aea-128">Il controller Home nel listato 1 restituisce la visualizzazione dell'indice nel listato 2.</span><span class="sxs-lookup"><span data-stu-id="97aea-128">The Home controller in Listing 1 returns the Index view in Listing 2.</span></span> <span data-ttu-id="97aea-129">Non c'è niente di speciale su questa vista.</span><span class="sxs-lookup"><span data-stu-id="97aea-129">There is nothing special about this view.</span></span> <span data-ttu-id="97aea-130">La visualizzazione dell'indice vengono visualizzate l'ora corrente (vedere la figura 1).</span><span class="sxs-lookup"><span data-stu-id="97aea-130">The Index view simply displays the current time (see Figure 1).</span></span>

<span data-ttu-id="97aea-131">**Elenco 2 – Views\Home\Index.aspx.**</span><span class="sxs-lookup"><span data-stu-id="97aea-131">**Listing 2 – Views\Home\Index.aspx**</span></span>

[!code-aspx[Main](improving-performance-with-output-caching-cs/samples/sample2.aspx)]

<span data-ttu-id="97aea-132">**Figura 1 – visualizzazione dell'indice memorizzata nella cache**</span><span class="sxs-lookup"><span data-stu-id="97aea-132">**Figure 1 – Cached Index view**</span></span>

![clip_image002](improving-performance-with-output-caching-cs/_static/image1.jpg)

<span data-ttu-id="97aea-134">Se si richiama l'azione Index () più volte immettendo l'URL /Home/indice nella barra degli indirizzi del browser e premendo il pulsante di aggiornamento/Ricarica nel browser più volte, l'ora visualizzata per la visualizzazione dell'indice non cambierà per 10 secondi.</span><span class="sxs-lookup"><span data-stu-id="97aea-134">If you invoke the Index() action multiple times by entering the URL /Home/Index in the address bar of your browser and hitting the Refresh/Reload button in your browser repeatedly, then the time displayed by the Index view won't change for 10 seconds.</span></span> <span data-ttu-id="97aea-135">Contemporaneamente viene visualizzato perché la vista viene memorizzato nella cache.</span><span class="sxs-lookup"><span data-stu-id="97aea-135">The same time is displayed because the view is cached.</span></span>

<span data-ttu-id="97aea-136">È importante comprendere che la stessa vista viene memorizzato nella cache per tutti gli utenti che visita l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="97aea-136">It is important to understand that the same view is cached for everyone who visits your application.</span></span> <span data-ttu-id="97aea-137">Tutti gli utenti che richiama l'azione Index () otterrà la stessa versione memorizzata nella cache della visualizzazione dell'indice.</span><span class="sxs-lookup"><span data-stu-id="97aea-137">Anyone who invokes the Index() action will get the same cached version of the Index view.</span></span> <span data-ttu-id="97aea-138">Ciò significa che viene ridotta notevolmente la quantità di lavoro che il server web deve eseguire per gestire la visualizzazione dell'indice.</span><span class="sxs-lookup"><span data-stu-id="97aea-138">This means that the amount of work that the web server must perform to serve the Index view is dramatically reduced.</span></span>

<span data-ttu-id="97aea-139">La visualizzazione nel listato 2 avviene per eseguire un'operazione estremamente semplice.</span><span class="sxs-lookup"><span data-stu-id="97aea-139">The view in Listing 2 happens to be doing something really simple.</span></span> <span data-ttu-id="97aea-140">La vista visualizza solo l'ora corrente.</span><span class="sxs-lookup"><span data-stu-id="97aea-140">The view just displays the current time.</span></span> <span data-ttu-id="97aea-141">Tuttavia, è possibile semplicemente come facilmente cache di una vista che viene visualizzato un set di record del database.</span><span class="sxs-lookup"><span data-stu-id="97aea-141">However, you could just as easily cache a view that displays a set of database records.</span></span> <span data-ttu-id="97aea-142">In tal caso, il set di record del database non dovrebbe essere recuperate dal database ogni volta che viene richiamata l'azione del controller che restituisce la vista.</span><span class="sxs-lookup"><span data-stu-id="97aea-142">In that case, the set of database records would not need to be retrieved from the database each and every time the controller action that returns the view is invoked.</span></span> <span data-ttu-id="97aea-143">La memorizzazione nella cache, è possibile ridurre la quantità di lavoro che deve eseguire il server web e server di database.</span><span class="sxs-lookup"><span data-stu-id="97aea-143">Caching can reduce the amount of work that both your web server and database server must perform.</span></span>

<span data-ttu-id="97aea-144">Non utilizzare la pagina &lt;% @ OutputCache %&gt; direttiva in una visualizzazione MVC.</span><span class="sxs-lookup"><span data-stu-id="97aea-144">Don't use the page &lt;%@ OutputCache %&gt; directive in an MVC view.</span></span> <span data-ttu-id="97aea-145">Questa direttiva è di uscita dall'ambiente di Web Form e non deve essere utilizzata in un'applicazione MVC ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="97aea-145">This directive is bleeding over from the Web Forms world and should not be used in an ASP.NET MVC application.</span></span>

## <a name="where-content-is-cached"></a><span data-ttu-id="97aea-146">In cui contenuto viene memorizzato nella cache</span><span class="sxs-lookup"><span data-stu-id="97aea-146">Where Content is Cached</span></span>

<span data-ttu-id="97aea-147">Per impostazione predefinita, quando si utilizza l'attributo [OutputCache], il contenuto memorizzato nella cache di tre posizioni: il server web, tutti i server proxy e il web browser.</span><span class="sxs-lookup"><span data-stu-id="97aea-147">By default, when you use the [OutputCache] attribute, content is cached in three locations: the web server, any proxy servers, and the web browser.</span></span> <span data-ttu-id="97aea-148">È possibile controllare esattamente in cui contenuto viene memorizzato nella cache modificando la proprietà Location dell'attributo [OutputCache].</span><span class="sxs-lookup"><span data-stu-id="97aea-148">You can control exactly where content is cached by modifying the Location property of the [OutputCache] attribute.</span></span>

<span data-ttu-id="97aea-149">È possibile impostare la proprietà Location a uno dei valori seguenti:</span><span class="sxs-lookup"><span data-stu-id="97aea-149">You can set the Location property to any one of the following values:</span></span>

> <span data-ttu-id="97aea-150">· Qualsiasi</span><span class="sxs-lookup"><span data-stu-id="97aea-150">· Any</span></span>
> 
> <span data-ttu-id="97aea-151">· Client</span><span class="sxs-lookup"><span data-stu-id="97aea-151">· Client</span></span>
> 
> <span data-ttu-id="97aea-152">· Downstream</span><span class="sxs-lookup"><span data-stu-id="97aea-152">· Downstream</span></span>
> 
> <span data-ttu-id="97aea-153">· Server</span><span class="sxs-lookup"><span data-stu-id="97aea-153">· Server</span></span>
> 
> <span data-ttu-id="97aea-154">· Nessuno</span><span class="sxs-lookup"><span data-stu-id="97aea-154">· None</span></span>
> 
> <span data-ttu-id="97aea-155">· ServerAndClient</span><span class="sxs-lookup"><span data-stu-id="97aea-155">· ServerAndClient</span></span>


<span data-ttu-id="97aea-156">Per impostazione predefinita, la proprietà Location contiene il valore Any.</span><span class="sxs-lookup"><span data-stu-id="97aea-156">By default, the Location property has the value Any.</span></span> <span data-ttu-id="97aea-157">Tuttavia, esistono casi in cui potrebbe memorizzare nella cache solo nel browser o solo sul server.</span><span class="sxs-lookup"><span data-stu-id="97aea-157">However, there are situations in which you might want to cache only on the browser or only on the server.</span></span> <span data-ttu-id="97aea-158">Ad esempio, se si memorizza nella cache informazioni personalizzati per ogni utente quindi non devono essere memorizzati le informazioni sul server.</span><span class="sxs-lookup"><span data-stu-id="97aea-158">For example, if you are caching information that is personalized for each user then you should not cache the information on the server.</span></span> <span data-ttu-id="97aea-159">Se si visualizzano informazioni diverse a utenti diversi è consigliabile memorizzare nella cache le informazioni solo sul client.</span><span class="sxs-lookup"><span data-stu-id="97aea-159">If you are displaying different information to different users then you should cache the information only on the client.</span></span>

<span data-ttu-id="97aea-160">Ad esempio, il controller nel listato 3 espone un'azione denominata GetName() che restituisce il nome utente corrente.</span><span class="sxs-lookup"><span data-stu-id="97aea-160">For example, the controller in Listing 3 exposes an action named GetName() that returns the current user name.</span></span> <span data-ttu-id="97aea-161">Se presa accede al sito Web e richiama l'azione GetName() quindi l'azione restituisce la stringa "Hi presa".</span><span class="sxs-lookup"><span data-stu-id="97aea-161">If Jack logs into the website and invokes the GetName() action then the action returns the string "Hi Jack".</span></span> <span data-ttu-id="97aea-162">Se, successivamente, Jill accede al sito Web e richiama l'azione GetName() quindi potrà anche otterrà la stringa "Hi presa".</span><span class="sxs-lookup"><span data-stu-id="97aea-162">If, subsequently, Jill logs into the website and invokes the GetName() action then she also will get the string "Hi Jack".</span></span> <span data-ttu-id="97aea-163">La stringa viene memorizzato nella cache sul server web per tutti gli utenti dopo presa richiama inizialmente l'azione del controller.</span><span class="sxs-lookup"><span data-stu-id="97aea-163">The string is cached on the web server for all users after Jack initially invokes the controller action.</span></span>

<span data-ttu-id="97aea-164">**Elenco di 3: Controllers\BadUserController.cs**</span><span class="sxs-lookup"><span data-stu-id="97aea-164">**Listing 3 – Controllers\BadUserController.cs**</span></span>

[!code-csharp[Main](improving-performance-with-output-caching-cs/samples/sample3.cs)]

<span data-ttu-id="97aea-165">È probabile che il controller nel listato 3 non funziona il modo in cui si desidera.</span><span class="sxs-lookup"><span data-stu-id="97aea-165">Most likely, the controller in Listing 3 does not work the way that you want.</span></span> <span data-ttu-id="97aea-166">Non si desidera visualizzare il messaggio "Presa Hi" a Jill.</span><span class="sxs-lookup"><span data-stu-id="97aea-166">You don't want to display the message "Hi Jack" to Jill.</span></span>

<span data-ttu-id="97aea-167">È mai deve memorizzare nella cache il contenuto personalizzato nella cache del server.</span><span class="sxs-lookup"><span data-stu-id="97aea-167">You should never cache personalized content in the server cache.</span></span> <span data-ttu-id="97aea-168">Tuttavia, è consigliabile memorizzare nella cache il contenuto personalizzato nella cache del browser per migliorare le prestazioni.</span><span class="sxs-lookup"><span data-stu-id="97aea-168">However, you might want to cache the personalized content in the browser cache to improve performance.</span></span> <span data-ttu-id="97aea-169">Se si memorizza nella cache il contenuto nel browser e un utente richiama la stessa azione controller più volte, può recuperare il contenuto dalla cache del browser invece che nel server.</span><span class="sxs-lookup"><span data-stu-id="97aea-169">If you cache content in the browser, and a user invokes the same controller action multiple times, then the content can be retrieved from the browser cache instead of the server.</span></span>

<span data-ttu-id="97aea-170">Il controller modificato nel listato 4 memorizza nella cache l'output dell'azione GetName().</span><span class="sxs-lookup"><span data-stu-id="97aea-170">The modified controller in Listing 4 caches the output of the GetName() action.</span></span> <span data-ttu-id="97aea-171">Tuttavia, il contenuto rimane nella cache solo nel browser e non nel server.</span><span class="sxs-lookup"><span data-stu-id="97aea-171">However, the content is cached only on the browser and not on the server.</span></span> <span data-ttu-id="97aea-172">In questo modo, quando più utenti richiamano il metodo GetName(), ogni persona Ottiene il proprio nome utente e nome utente della persona non in un altro.</span><span class="sxs-lookup"><span data-stu-id="97aea-172">That way, when multiple users invoke the GetName() method, each person gets their own user name and not another person's user name.</span></span>

<span data-ttu-id="97aea-173">**Listato 4 – Controllers\UserController.cs**</span><span class="sxs-lookup"><span data-stu-id="97aea-173">**Listing 4 – Controllers\UserController.cs**</span></span>

[!code-csharp[Main](improving-performance-with-output-caching-cs/samples/sample4.cs)]

<span data-ttu-id="97aea-174">Si noti che l'attributo [OutputCache] listato 4 include una proprietà Location impostata sul valore OutputCacheLocation.Client.</span><span class="sxs-lookup"><span data-stu-id="97aea-174">Notice that the [OutputCache] attribute in Listing 4 includes a Location property set to the value OutputCacheLocation.Client.</span></span> <span data-ttu-id="97aea-175">L'attributo [OutputCache] include anche una proprietà NoStore.</span><span class="sxs-lookup"><span data-stu-id="97aea-175">The [OutputCache] attribute also includes a NoStore property.</span></span> <span data-ttu-id="97aea-176">La proprietà NoStore viene utilizzata per informare i browser e server proxy che non devono archiviare una copia permanente del contenuto della cache.</span><span class="sxs-lookup"><span data-stu-id="97aea-176">The NoStore property is used to inform proxy servers and browser that they should not store a permanent copy of the cached content.</span></span>

## <a name="varying-the-output-cache"></a><span data-ttu-id="97aea-177">Variare la Cache di Output</span><span class="sxs-lookup"><span data-stu-id="97aea-177">Varying the Output Cache</span></span>

<span data-ttu-id="97aea-178">In alcune situazioni, è possibile utilizzare versioni diverse di memorizzati nella cache del contenuto della stessa.</span><span class="sxs-lookup"><span data-stu-id="97aea-178">In some situations, you might want different cached versions of the very same content.</span></span> <span data-ttu-id="97aea-179">Si supponga, ad esempio, che si sta creando una pagina master-details.</span><span class="sxs-lookup"><span data-stu-id="97aea-179">Imagine, for example, that you are creating a master/detail page.</span></span> <span data-ttu-id="97aea-180">La pagina master consente di visualizzare un elenco di titoli dei film.</span><span class="sxs-lookup"><span data-stu-id="97aea-180">The master page displays a list of movie titles.</span></span> <span data-ttu-id="97aea-181">Quando si fa clic su un titolo, si ricevono dettagli per il film selezionato.</span><span class="sxs-lookup"><span data-stu-id="97aea-181">When you click a title, you get details for the selected movie.</span></span>

<span data-ttu-id="97aea-182">Se si memorizza nella cache la pagina dei dettagli, i dettagli per lo stesso filmato verranno visualizzati indipendentemente da quale film si fa clic su.</span><span class="sxs-lookup"><span data-stu-id="97aea-182">If you cache the details page, then the details for the same movie will be displayed no matter which movie you click.</span></span> <span data-ttu-id="97aea-183">Verrà visualizzato il primo film selezionato per il primo utente a tutti gli utenti future.</span><span class="sxs-lookup"><span data-stu-id="97aea-183">The first movie selected by the first user will be displayed to all future users.</span></span>

<span data-ttu-id="97aea-184">È possibile risolvere questo problema sfruttando la proprietà VaryByParam dell'attributo [OutputCache].</span><span class="sxs-lookup"><span data-stu-id="97aea-184">You can fix this problem by taking advantage of the VaryByParam property of the [OutputCache] attribute.</span></span> <span data-ttu-id="97aea-185">Questa proprietà consente di creare versioni diverse di memorizzati nella cache del contenuto quando un parametro form molto stesso o se il parametro di stringa di query varia.</span><span class="sxs-lookup"><span data-stu-id="97aea-185">This property enables you to create different cached versions of the very same content when a form parameter or query string parameter varies.</span></span>

<span data-ttu-id="97aea-186">Ad esempio, il controller nel listato 5 espone due azioni denominate Master() e Details().</span><span class="sxs-lookup"><span data-stu-id="97aea-186">For example, the controller in Listing 5 exposes two actions named Master() and Details().</span></span> <span data-ttu-id="97aea-187">L'azione Master() restituisce un elenco di titoli dei film e l'azione Details() restituisce i dettagli per il film selezionato.</span><span class="sxs-lookup"><span data-stu-id="97aea-187">The Master() action returns a list of movie titles and the Details() action returns the details for the selected movie.</span></span>

<span data-ttu-id="97aea-188">**Nel listato 5 – Controllers\MoviesController.cs**</span><span class="sxs-lookup"><span data-stu-id="97aea-188">**Listing 5 – Controllers\MoviesController.cs**</span></span>

[!code-csharp[Main](improving-performance-with-output-caching-cs/samples/sample5.cs)]

<span data-ttu-id="97aea-189">L'azione Master() include una proprietà VaryByParam con il valore "none".</span><span class="sxs-lookup"><span data-stu-id="97aea-189">The Master() action includes a VaryByParam property with the value "none".</span></span> <span data-ttu-id="97aea-190">Viene restituito quando l'azione viene richiamata, Master() la stessa versione memorizzata nella cache del Master Visualizza.</span><span class="sxs-lookup"><span data-stu-id="97aea-190">When the Master() action is invoked, the same cached version of the Master view is returned.</span></span> <span data-ttu-id="97aea-191">Eventuali parametri di modulo o la stringa di query i parametri vengono ignorati (vedere Figura 2).</span><span class="sxs-lookup"><span data-stu-id="97aea-191">Any form parameters or query string parameters are ignored (see Figure 2).</span></span>

<span data-ttu-id="97aea-192">**Figura 2 – vista /Movies/Master**</span><span class="sxs-lookup"><span data-stu-id="97aea-192">**Figure 2 – The /Movies/Master view**</span></span>

![clip_image004](improving-performance-with-output-caching-cs/_static/image2.jpg)

<span data-ttu-id="97aea-194">**Figura 3 – la visualizzazione dei dettagli/filmati /**</span><span class="sxs-lookup"><span data-stu-id="97aea-194">**Figure 3 – The /Movies/Details view**</span></span>

![clip_image006](improving-performance-with-output-caching-cs/_static/image3.jpg)

<span data-ttu-id="97aea-196">L'azione Details() include una proprietà VaryByParam con il valore "Id".</span><span class="sxs-lookup"><span data-stu-id="97aea-196">The Details() action includes a VaryByParam property with the value "Id".</span></span> <span data-ttu-id="97aea-197">Quando diversi valori del parametro Id vengono passati all'azione del controller, vengono generate diverse versioni memorizzate nella cache della vista Dettagli.</span><span class="sxs-lookup"><span data-stu-id="97aea-197">When different values of the Id parameter are passed to the controller action, different cached versions of the Details view are generated.</span></span>

<span data-ttu-id="97aea-198">È importante comprendere i risultati della proprietà VaryByParam in più di memorizzazione nella cache in uso e non inferiore.</span><span class="sxs-lookup"><span data-stu-id="97aea-198">It is important to understand that using the VaryByParam property results in more caching and not less.</span></span> <span data-ttu-id="97aea-199">Una versione diversa memorizzati nella cache della visualizzazione dei dettagli viene creata per ogni versione del parametro Id.</span><span class="sxs-lookup"><span data-stu-id="97aea-199">A different cached version of the Details view is created for each different version of the Id parameter.</span></span>

<span data-ttu-id="97aea-200">È possibile impostare la proprietà VaryByParam per i valori seguenti:</span><span class="sxs-lookup"><span data-stu-id="97aea-200">You can set the VaryByParam property to the following values:</span></span>

> <span data-ttu-id="97aea-201">\* = Creare una versione memorizzata nella cache diversa ogni volta che varia in un parametro di stringa di formato o la query.</span><span class="sxs-lookup"><span data-stu-id="97aea-201">\* = Create a different cached version whenever a form or query string parameter varies.</span></span>
> 
> <span data-ttu-id="97aea-202">None = mai creare diverse versioni memorizzate nella cache</span><span class="sxs-lookup"><span data-stu-id="97aea-202">none = Never create different cached versions</span></span>
> 
> <span data-ttu-id="97aea-203">Elenco di punti e virgola di parametri = crea diverse versioni memorizzate nella cache ogni volta che uno dei parametri di stringa di modulo o una query nell'elenco varia</span><span class="sxs-lookup"><span data-stu-id="97aea-203">Semicolon list of parameters = Create different cached versions whenever any of the form or query string parameters in the list varies</span></span>


## <a name="creating-a-cache-profile"></a><span data-ttu-id="97aea-204">Creazione di un profilo di Cache</span><span class="sxs-lookup"><span data-stu-id="97aea-204">Creating a Cache Profile</span></span>

<span data-ttu-id="97aea-205">Come alternativa alla configurazione delle proprietà della cache di output modificando le proprietà dell'attributo [OutputCache], è possibile creare un profilo della cache nel file di configurazione (Web. config) di web.</span><span class="sxs-lookup"><span data-stu-id="97aea-205">As an alternative to configuring output cache properties by modifying properties of the [OutputCache] attribute, you can create a cache profile in the web configuration (web.config) file.</span></span> <span data-ttu-id="97aea-206">Creazione di un profilo di cache nel file di configurazione web offre due vantaggi importanti.</span><span class="sxs-lookup"><span data-stu-id="97aea-206">Creating a cache profile in the web configuration file offers a couple of important advantages.</span></span>

<span data-ttu-id="97aea-207">In primo luogo, configurando la memorizzazione nella cache di output nel file di configurazione web, è possibile controllare come le azioni del controller memorizzano nella cache il contenuto in un'unica posizione centrale.</span><span class="sxs-lookup"><span data-stu-id="97aea-207">First, by configuring output caching in the web configuration file, you can control how controller actions cache content in one central location.</span></span> <span data-ttu-id="97aea-208">È possibile creare un profilo di cache e applicare il profilo a diversi controller o le azioni del controller.</span><span class="sxs-lookup"><span data-stu-id="97aea-208">You can create one cache profile and apply the profile to several controllers or controller actions.</span></span>

<span data-ttu-id="97aea-209">In secondo luogo, è possibile modificare il file di configurazione web senza ricompilare l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="97aea-209">Second, you can modify the web configuration file without recompiling your application.</span></span> <span data-ttu-id="97aea-210">Se è necessario disabilitare la memorizzazione nella cache per un'applicazione che è già stata distribuita nell'ambiente di produzione, è possibile modificare semplicemente i profili di cache definiti nel file di configurazione web.</span><span class="sxs-lookup"><span data-stu-id="97aea-210">If you need to disable caching for an application that has already been deployed to production, then you can simply modify the cache profiles defined in the web configuration file.</span></span> <span data-ttu-id="97aea-211">Verranno rilevate automaticamente e applicate le modifiche al file di configurazione web.</span><span class="sxs-lookup"><span data-stu-id="97aea-211">Any changes to the web configuration file will be detected automatically and applied.</span></span>

<span data-ttu-id="97aea-212">Ad esempio, il &lt;la memorizzazione nella cache&gt; sezione di configurazione web nel listato 6 definisce un profilo della cache denominato Cache1Hour.</span><span class="sxs-lookup"><span data-stu-id="97aea-212">For example, the &lt;caching&gt; web configuration section in Listing 6 defines a cache profile named Cache1Hour.</span></span> <span data-ttu-id="97aea-213">Il &lt;la memorizzazione nella cache&gt; sezione deve figurare all'interno di &lt;System. Web&gt; sezione di un file di configurazione web.</span><span class="sxs-lookup"><span data-stu-id="97aea-213">The &lt;caching&gt; section must appear within the &lt;system.web&gt; section of a web configuration file.</span></span>

<span data-ttu-id="97aea-214">**Elenco 6 – sezione di memorizzazione nella cache per Web. config**</span><span class="sxs-lookup"><span data-stu-id="97aea-214">**Listing 6 – Caching section for web.config**</span></span>

[!code-xml[Main](improving-performance-with-output-caching-cs/samples/sample6.xml)]

<span data-ttu-id="97aea-215">Il controller nel listato 7 viene illustrato come è possibile applicare il profilo Cache1Hour a un'azione del controller con l'attributo [OutputCache].</span><span class="sxs-lookup"><span data-stu-id="97aea-215">The controller in Listing 7 illustrates how you can apply the Cache1Hour profile to a controller action with the [OutputCache] attribute.</span></span>

<span data-ttu-id="97aea-216">**Elenco 7: Controllers\ProfileController.cs**</span><span class="sxs-lookup"><span data-stu-id="97aea-216">**Listing 7 – Controllers\ProfileController.cs**</span></span>

[!code-csharp[Main](improving-performance-with-output-caching-cs/samples/sample7.cs)]

<span data-ttu-id="97aea-217">Se si richiama l'azione Index () esposto dal controller nel listato 7 contemporaneamente verrà restituito per 1 ora.</span><span class="sxs-lookup"><span data-stu-id="97aea-217">If you invoke the Index() action exposed by the controller in Listing 7 then the same time will be returned for 1 hour.</span></span>

## <a name="summary"></a><span data-ttu-id="97aea-218">Riepilogo</span><span class="sxs-lookup"><span data-stu-id="97aea-218">Summary</span></span>

<span data-ttu-id="97aea-219">La memorizzazione nella cache di output fornisce un metodo molto semplice di migliorare notevolmente le prestazioni delle applicazioni ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="97aea-219">Output caching provides you with a very easy method of dramatically improving the performance of your ASP.NET MVC applications.</span></span> <span data-ttu-id="97aea-220">In questa esercitazione è stato descritto come utilizzare l'attributo [OutputCache] per memorizzare nella cache l'output di azioni del controller.</span><span class="sxs-lookup"><span data-stu-id="97aea-220">In this tutorial, you learned how to use the [OutputCache] attribute to cache the output of controller actions.</span></span> <span data-ttu-id="97aea-221">È stato inoltre descritto come modificare le proprietà dell'attributo [OutputCache] ad esempio le proprietà di durata e VaryByParam per modificare il contenuto Ottiene memorizzato nella cache.</span><span class="sxs-lookup"><span data-stu-id="97aea-221">You also learned how to modify properties of the [OutputCache] attribute such as the Duration and VaryByParam properties to modify how content gets cached.</span></span> <span data-ttu-id="97aea-222">Infine, è stato descritto come definire i profili di cache nel file di configurazione web.</span><span class="sxs-lookup"><span data-stu-id="97aea-222">Finally, you learned how to define cache profiles in the web configuration file.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="97aea-223">[Precedente](understanding-action-filters-cs.md)
> [Successivo](adding-dynamic-content-to-a-cached-page-cs.md)</span><span class="sxs-lookup"><span data-stu-id="97aea-223">[Previous](understanding-action-filters-cs.md)
[Next](adding-dynamic-content-to-a-cached-page-cs.md)</span></span>
